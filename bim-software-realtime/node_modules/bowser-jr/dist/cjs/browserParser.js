"use strict";var t=require("./utils.js");const M={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon",Miui:"miui","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast","Opera Touch":"opera_touch",PhantomJS:"phantomjs","PlayStation 4":"ps4",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",SlimerJS:"slimerjs",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},i={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",miui:"Miui",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",opera_touch:"Opera Touch",phantomjs:"PhantomJS",ps4:"PlayStation 4",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",slimerjs:"SlimerJS",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},o=/version\/(\d+(\.?_?\d+)+)/i,p=[{test:[/googlebot/i],describe(s){const e={name:i.googlebot},r=t.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/opera/i],describe(s){const e={name:i.opera},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/opr\/|opios/i],describe(s){const e={name:i.opera},r=t.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/SamsungBrowser/i],describe(s){const e={name:i.samsung_internet},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/Whale/i],describe(s){const e={name:i.naver},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/MZBrowser/i],describe(s){const e={name:i.mz},r=t.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/focus/i],describe(s){const e={name:i.focus},r=t.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/swing/i],describe(s){const e={name:i.swing},r=t.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/coast/i],describe(s){const e={name:i.opera_coast},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(s){const e={name:i.opera_touch},r=t.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/yabrowser/i],describe(s){const e={name:i.yandex},r=t.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/ucbrowser/i],describe(s){const e={name:i.uc},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/Maxthon|mxios/i],describe(s){const e={name:i.maxthon},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/epiphany/i],describe(s){const e={name:i.epiphany},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/puffin/i],describe(s){const e={name:i.puffin},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/sleipnir/i],describe(s){const e={name:i.sleipnir},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/k-meleon/i],describe(s){const e={name:i.k_meleon},r=t.getFirstMatch(o,s)||t.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/micromessenger/i],describe(s){const e={name:i.wechat},r=t.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/qqbrowser/i],describe(s){const e={name:/qqbrowserlite/i.test(s)?i.qqlite:i.qq},r=t.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/msie|trident/i],describe(s){const e={name:i.ie},r=t.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/\sedg\//i],describe(s){const e={name:i.edge},r=t.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/edg([ea]|ios)/i],describe(s){const e={name:i.edge},r=t.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/vivaldi/i],describe(s){const e={name:i.vivaldi},r=t.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/seamonkey/i],describe(s){const e={name:i.seamonkey},r=t.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/sailfish/i],describe(s){const e={name:i.sailfish},r=t.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,s);return r&&(e.version=r),e}},{test:[/silk/i],describe(s){const e={name:i.amazon_silk},r=t.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/phantom/i],describe(s){const e={name:i.phantomjs},r=t.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/slimerjs/i],describe(s){const e={name:i.slimerjs},r=t.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(s){const e={name:i.blackberry},r=t.getFirstMatch(o,s)||t.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/(web|hpw)[o0]s/i],describe(s){const e={name:i.webos},r=t.getFirstMatch(o,s)||t.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/bada/i],describe(s){const e={name:i.bada},r=t.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/tizen/i],describe(s){const e={name:i.tizen},r=t.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/qupzilla/i],describe(s){const e={name:i.qupzilla},r=t.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/firefox|iceweasel|fxios/i],describe(s){const e={name:i.firefox},r=t.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/electron/i],describe(s){const e={name:i.electron},r=t.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/MiuiBrowser/i],describe(s){const e={name:i.miui},r=t.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/chromium/i],describe(s){const e={name:i.chromium},r=t.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,s)||t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/chrome|crios|crmo/i],describe(s){const e={name:i.chrome},r=t.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test:[/GSA/i],describe(s){const e={name:i.google_search},r=t.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,s);return r&&(e.version=r),e}},{test(s){const e=!s.test(/like android/i),r=s.test(/android/i);return e&&r},describe(s){const e={name:i.android},r=t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/playstation 4/i],describe(s){const e={name:i.ps4},r=t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/safari|applewebkit/i],describe(s){const e={name:i.safari},r=t.getFirstMatch(o,s);return r&&(e.version=r),e}},{test:[/.*/i],describe(s){const e=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,a=s.search("\\(")!==-1?r:e;return{name:t.getFirstMatch(a,s),version:t.getSecondMatch(a,s)}}}];function m(s){return s.split(".").length}function F(s,e,r=!1){const n=m(s),a=m(e);let c=Math.max(n,a),d=0;const h=[s,e].map(l=>{const v=c-m(l);return(l+new Array(v+1).join(".0")).split(".").map(f=>new Array(20-f.length).join("0")+f).reverse()});for(r&&(d=c-Math.min(n,a)),c-=1;c>=d;){if(h[0][c]>h[1][c])return 1;if(h[0][c]===h[1][c]){if(c===d)return 0;c-=1}else if(h[0][c]<h[1][c])return-1}}function _(s){return s in i?i[s]:""}function g(s){let e={};const r=p.find(n=>{if(typeof n.test=="function")return n.test(s);if(n.test instanceof Array)return n.test.some(a=>s.test(a));throw new Error("Browser's test function is not valid")});return r&&(e=r.describe(s.getUA())),{browser:e}}function b(s){try{return s.getResult().browser}catch(e){return g(s).browser}}function u(s,e=!1){var r,n;return e?((r=b(s).name)!=null?r:"").toLowerCase():(n=b(s).name)!=null?n:""}function w(s){var e;return(e=b(s).version)!=null?e:""}function S(s,e,r=!1){const n=u(s,!0);let a=e.toLowerCase();const c=_(a);return r&&c&&(a=c.toLowerCase()),a===n}function B(s,e){var d;let r=[0],n=e,a=!1;const c=w(s);return typeof c!="string"?!1:(e[0]===">"||e[0]==="<"?(n=e.substr(1),e[1]==="="?(a=!0,n=e.substr(2)):r=[],e[0]===">"?r.push(1):r.push(-1)):e[0]==="="?n=e.substr(1):e[0]==="~"&&(a=!0,n=e.substr(1)),r.indexOf((d=F(c,n,a))!=null?d:1/0)>-1)}exports.BROWSER_ALIASES_MAP=M;exports.BROWSER_MAP=i;exports.browserParser=g;exports.compareVersion=B;exports.getBrowser=b;exports.getBrowserName=u;exports.getBrowserVersion=w;exports.isBrowser=S;
