"use strict";var s=require("./utils.js");const i={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"};function d(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}function m(t){const e=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(e.push(0),e[0]===10)switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}function f(t){const e=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(e.push(0),!(e[0]===1&&e[1]<5)){if(e[0]===1&&e[1]<6)return"Cupcake";if(e[0]===1&&e[1]>=6)return"Donut";if(e[0]===2&&e[1]<2)return"Eclair";if(e[0]===2&&e[1]===2)return"Froyo";if(e[0]===2&&e[1]>2)return"Gingerbread";if(e[0]===3)return"Honeycomb";if(e[0]===4&&e[1]<1)return"Ice Cream Sandwich";if(e[0]===4&&e[1]<4)return"Jelly Bean";if(e[0]===4&&e[1]>=4)return"KitKat";if(e[0]===5)return"Lollipop";if(e[0]===6)return"Marshmallow";if(e[0]===7)return"Nougat";if(e[0]===8)return"Oreo";if(e[0]===9)return"Pie"}}const l=[{test:[/Roku\/DVP/],describe(t){const e=s.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:i.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=s.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:i.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=s.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),r=d(e);return{name:i.Windows,version:e,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:i.iOS},r=s.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return r&&(e.version=r),e}},{test:[/macintosh/i],describe(t){const e=s.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),r=m(e),n={name:i.MacOS,version:e};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=s.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:i.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e=s.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),r=f(e),n={name:i.Android,version:e};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=s.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),r={name:i.WebOS};return e&&e.length&&(r.version=e),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=s.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||s.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||s.getFirstMatch(/\bbb(\d+)/i,t);return{name:i.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=s.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:i.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=s.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:i.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:i.Linux}}},{test:[/CrOS/],describe(){return{name:i.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=s.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:i.PlayStation4,version:e}}}];function a(t){let e={};const r=l.find(n=>{if(typeof n.test=="function")return n.test(t);if(n.test instanceof Array)return n.test.some(u=>t.test(u));throw new Error("Browser's test function is not valid")});return r&&(e=r.describe(t.getUA())),{os:e}}function o(t){try{return t.getResult().os}catch(e){return a(t).os}}function c(t,e=!1){var r,n;return e?((r=o(t).name)!=null?r:"").toLowerCase():(n=o(t).name)!=null?n:""}function S(t){var e;return(e=o(t).version)!=null?e:""}function b(t,e=!1){var r,n;return e?((r=o(t).versionName)!=null?r:"").toLowerCase():(n=o(t).versionName)!=null?n:""}function h(t,e){return c(t,!0)===e.toLowerCase()}exports.OS_MAP=i;exports.getOS=o;exports.getOSName=c;exports.getOSVersion=S;exports.getOSVersionName=b;exports.isOS=h;exports.osParser=a;
