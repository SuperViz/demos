var ev=Object.create;var ys=Object.defineProperty,tv=Object.defineProperties,nv=Object.getOwnPropertyDescriptor,iv=Object.getOwnPropertyDescriptors,rv=Object.getOwnPropertyNames,vu=Object.getOwnPropertySymbols,sv=Object.getPrototypeOf,Eu=Object.prototype.hasOwnProperty,ov=Object.prototype.propertyIsEnumerable;var bu=(u,s,i)=>s in u?ys(u,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[s]=i,ie=(u,s)=>{for(var i in s||(s={}))Eu.call(s,i)&&bu(u,i,s[i]);if(vu)for(var i of vu(s))ov.call(s,i)&&bu(u,i,s[i]);return u},We=(u,s)=>tv(u,iv(s));var av=(u,s)=>()=>(u&&(s=u(u=0)),s);var Ee=(u,s)=>()=>(s||u((s={exports:{}}).exports,s),s.exports);var uv=(u,s,i,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let a of rv(s))!Eu.call(u,a)&&a!==i&&ys(u,a,{get:()=>s[a],enumerable:!(o=nv(s,a))||o.enumerable});return u};var Bt=(u,s,i)=>(i=u!=null?ev(sv(u)):{},uv(s||!u||!u.__esModule?ys(i,"default",{value:u,enumerable:!0}):i,u));var ae=(u,s,i)=>new Promise((o,a)=>{var h=p=>{try{c(i.next(p))}catch(g){a(g)}},v=p=>{try{c(i.throw(p))}catch(g){a(g)}},c=p=>p.done?o(p.value):Promise.resolve(p.value).then(h,v);c((i=i.apply(u,s)).next())});var B,I=av(()=>{B={}});var _u=Ee((Cb,Au)=>{I();var hn=1e3,dn=hn*60,fn=dn*60,Yt=fn*24,cv=Yt*7,pv=Yt*365.25;Au.exports=function(u,s){s=s||{};var i=typeof u;if(i==="string"&&u.length>0)return hv(u);if(i==="number"&&isFinite(u))return s.long?fv(u):dv(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function hv(u){if(u=String(u),!(u.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(!!s){var i=parseFloat(s[1]),o=(s[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return i*pv;case"weeks":case"week":case"w":return i*cv;case"days":case"day":case"d":return i*Yt;case"hours":case"hour":case"hrs":case"hr":case"h":return i*fn;case"minutes":case"minute":case"mins":case"min":case"m":return i*dn;case"seconds":case"second":case"secs":case"sec":case"s":return i*hn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function dv(u){var s=Math.abs(u);return s>=Yt?Math.round(u/Yt)+"d":s>=fn?Math.round(u/fn)+"h":s>=dn?Math.round(u/dn)+"m":s>=hn?Math.round(u/hn)+"s":u+"ms"}function fv(u){var s=Math.abs(u);return s>=Yt?Hi(u,s,Yt,"day"):s>=fn?Hi(u,s,fn,"hour"):s>=dn?Hi(u,s,dn,"minute"):s>=hn?Hi(u,s,hn,"second"):u+" ms"}function Hi(u,s,i,o){var a=s>=i*1.5;return Math.round(u/i)+" "+o+(a?"s":"")}});var yu=Ee((Ob,Tu)=>{I();function gv(u){i.debug=i,i.default=i,i.coerce=p,i.disable=h,i.enable=a,i.enabled=v,i.humanize=_u(),i.destroy=g,Object.keys(u).forEach(_=>{i[_]=u[_]}),i.names=[],i.skips=[],i.formatters={};function s(_){let y=0;for(let P=0;P<_.length;P++)y=(y<<5)-y+_.charCodeAt(P),y|=0;return i.colors[Math.abs(y)%i.colors.length]}i.selectColor=s;function i(_){let y,P=null,M,S;function F(...U){if(!F.enabled)return;let D=F,ue=Number(new Date),ce=ue-(y||ue);D.diff=ce,D.prev=y,D.curr=ue,y=ue,U[0]=i.coerce(U[0]),typeof U[0]!="string"&&U.unshift("%O");let he=0;U[0]=U[0].replace(/%([a-zA-Z%])/g,(J,ee)=>{if(J==="%%")return"%";he++;let Te=i.formatters[ee];if(typeof Te=="function"){let me=U[he];J=Te.call(D,me),U.splice(he,1),he--}return J}),i.formatArgs.call(D,U),(D.log||i.log).apply(D,U)}return F.namespace=_,F.useColors=i.useColors(),F.color=i.selectColor(_),F.extend=o,F.destroy=i.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>P!==null?P:(M!==i.namespaces&&(M=i.namespaces,S=i.enabled(_)),S),set:U=>{P=U}}),typeof i.init=="function"&&i.init(F),F}function o(_,y){let P=i(this.namespace+(typeof y=="undefined"?":":y)+_);return P.log=this.log,P}function a(_){i.save(_),i.namespaces=_,i.names=[],i.skips=[];let y,P=(typeof _=="string"?_:"").split(/[\s,]+/),M=P.length;for(y=0;y<M;y++)!P[y]||(_=P[y].replace(/\*/g,".*?"),_[0]==="-"?i.skips.push(new RegExp("^"+_.slice(1)+"$")):i.names.push(new RegExp("^"+_+"$")))}function h(){let _=[...i.names.map(c),...i.skips.map(c).map(y=>"-"+y)].join(",");return i.enable(""),_}function v(_){if(_[_.length-1]==="*")return!0;let y,P;for(y=0,P=i.skips.length;y<P;y++)if(i.skips[y].test(_))return!1;for(y=0,P=i.names.length;y<P;y++)if(i.names[y].test(_))return!0;return!1}function c(_){return _.toString().substring(2,_.toString().length-2).replace(/\.\*\?$/,"*")}function p(_){return _ instanceof Error?_.stack||_.message:_}function g(){}return i.enable(i.load()),i}Tu.exports=gv});var Pu=Ee((Je,$i)=>{I();Je.formatArgs=vv;Je.save=bv;Je.load=Ev;Je.useColors=mv;Je.storage=Av();Je.destroy=(()=>{let u=!1;return()=>{u||(u=!0)}})();Je.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function mv(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function vv(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+$i.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;u.splice(1,0,s,"color: inherit");let i=0,o=0;u[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&(i++,a==="%c"&&(o=i))}),u.splice(o,0,s)}Je.log=console.debug||console.log||(()=>{});function bv(u){try{u?Je.storage.setItem("debug",u):Je.storage.removeItem("debug")}catch(s){}}function Ev(){let u;try{u=Je.storage.getItem("debug")}catch(s){}return!u&&typeof process!="undefined"&&"env"in process&&(u=B.DEBUG),u}function Av(){try{return localStorage}catch(u){}}$i.exports=yu()(Je);var{formatters:_v}=$i.exports;_v.j=function(u){try{return JSON.stringify(u)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}});var zi=Ee((Mb,Cu)=>{I();function Tv(u){var s=typeof u;return u!=null&&(s=="object"||s=="function")}Cu.exports=Tv});var Iu=Ee((Lb,Ou)=>{I();var yv=typeof global=="object"&&global&&global.Object===Object&&global;Ou.exports=yv});var Ps=Ee((Sb,Mu)=>{I();var Pv=Iu(),wv=typeof self=="object"&&self&&self.Object===Object&&self,Cv=Pv||wv||Function("return this")();Mu.exports=Cv});var Su=Ee((Rb,Lu)=>{I();var Ov=Ps(),Iv=function(){return Ov.Date.now()};Lu.exports=Iv});var xu=Ee((xb,Ru)=>{I();var Mv=/\s/;function Lv(u){for(var s=u.length;s--&&Mv.test(u.charAt(s)););return s}Ru.exports=Lv});var Nu=Ee((Fb,Fu)=>{I();var Sv=xu(),Rv=/^\s+/;function xv(u){return u&&u.slice(0,Sv(u)+1).replace(Rv,"")}Fu.exports=xv});var ws=Ee((Nb,Bu)=>{I();var Fv=Ps(),Nv=Fv.Symbol;Bu.exports=Nv});var ku=Ee((Bb,Gu)=>{I();var Du=ws(),Wu=Object.prototype,Bv=Wu.hasOwnProperty,Dv=Wu.toString,Gn=Du?Du.toStringTag:void 0;function Wv(u){var s=Bv.call(u,Gn),i=u[Gn];try{u[Gn]=void 0;var o=!0}catch(h){}var a=Dv.call(u);return o&&(s?u[Gn]=i:delete u[Gn]),a}Gu.exports=Wv});var Hu=Ee((Db,Uu)=>{I();var Gv=Object.prototype,kv=Gv.toString;function Uv(u){return kv.call(u)}Uu.exports=Uv});var Ku=Ee((Wb,Vu)=>{I();var $u=ws(),Hv=ku(),$v=Hu(),zv="[object Null]",Vv="[object Undefined]",zu=$u?$u.toStringTag:void 0;function Kv(u){return u==null?u===void 0?Vv:zv:zu&&zu in Object(u)?Hv(u):$v(u)}Vu.exports=Kv});var Ju=Ee((Gb,qu)=>{I();function qv(u){return u!=null&&typeof u=="object"}qu.exports=qv});var Zu=Ee((kb,Yu)=>{I();var Jv=Ku(),Yv=Ju(),Zv="[object Symbol]";function Xv(u){return typeof u=="symbol"||Yv(u)&&Jv(u)==Zv}Yu.exports=Xv});var el=Ee((Ub,ju)=>{I();var Qv=Nu(),Xu=zi(),jv=Zu(),Qu=0/0,eb=/^[-+]0x[0-9a-f]+$/i,tb=/^0b[01]+$/i,nb=/^0o[0-7]+$/i,ib=parseInt;function rb(u){if(typeof u=="number")return u;if(jv(u))return Qu;if(Xu(u)){var s=typeof u.valueOf=="function"?u.valueOf():u;u=Xu(s)?s+"":s}if(typeof u!="string")return u===0?u:+u;u=Qv(u);var i=tb.test(u);return i||nb.test(u)?ib(u.slice(2),i?2:8):eb.test(u)?Qu:+u}ju.exports=rb});var il=Ee((Hb,nl)=>{I();var sb=zi(),Cs=Su(),tl=el(),ob="Expected a function",ab=Math.max,ub=Math.min;function lb(u,s,i){var o,a,h,v,c,p,g=0,_=!1,y=!1,P=!0;if(typeof u!="function")throw new TypeError(ob);s=tl(s)||0,sb(i)&&(_=!!i.leading,y="maxWait"in i,h=y?ab(tl(i.maxWait)||0,s):h,P="trailing"in i?!!i.trailing:P);function M(J){var ee=o,Te=a;return o=a=void 0,g=J,v=u.apply(Te,ee),v}function S(J){return g=J,c=setTimeout(D,s),_?M(J):v}function F(J){var ee=J-p,Te=J-g,me=s-ee;return y?ub(me,h-Te):me}function U(J){var ee=J-p,Te=J-g;return p===void 0||ee>=s||ee<0||y&&Te>=h}function D(){var J=Cs();if(U(J))return ue(J);c=setTimeout(D,F(J))}function ue(J){return c=void 0,P&&o?M(J):(o=a=void 0,v)}function ce(){c!==void 0&&clearTimeout(c),g=0,o=p=a=c=void 0}function he(){return c===void 0?v:ue(Cs())}function fe(){var J=Cs(),ee=U(J);if(o=arguments,a=this,p=J,ee){if(c===void 0)return S(p);if(y)return clearTimeout(c),c=setTimeout(D,s),M(p)}return c===void 0&&(c=setTimeout(D,s)),v}return fe.cancel=ce,fe.flush=he,fe}nl.exports=lb});var sl=Ee(($b,rl)=>{I();var cb=il(),pb=zi(),hb="Expected a function";function db(u,s,i){var o=!0,a=!0;if(typeof u!="function")throw new TypeError(hb);return pb(i)&&(o="leading"in i?!!i.leading:o,a="trailing"in i?!!i.trailing:a),cb(u,s,{leading:o,maxWait:s,trailing:a})}rl.exports=db});var mn=Ee((gn,Un)=>{I();(function(){var u,s="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",h="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",c=500,p="__lodash_placeholder__",g=1,_=2,y=4,P=1,M=2,S=1,F=2,U=4,D=8,ue=16,ce=32,he=64,fe=128,J=256,ee=512,Te=30,me="...",it=800,wt=16,ct=1,Dt=2,Wt=3,ke=1/0,xe=9007199254740991,Kn=17976931348623157e292,Gt=0/0,Ue=4294967295,qn=Ue-1,Jn=Ue>>>1,Yn=[["ary",fe],["bind",S],["bindKey",F],["curry",D],["curryRight",ue],["flip",ee],["partial",ce],["partialRight",he],["rearg",J]],Zt="[object Arguments]",Zn="[object Array]",fl="[object AsyncFunction]",vn="[object Boolean]",bn="[object Date]",gl="[object DOMException]",Xn="[object Error]",Qn="[object Function]",Gs="[object GeneratorFunction]",rt="[object Map]",En="[object Number]",ml="[object Null]",gt="[object Object]",ks="[object Promise]",vl="[object Proxy]",An="[object RegExp]",st="[object Set]",_n="[object String]",jn="[object Symbol]",bl="[object Undefined]",Tn="[object WeakMap]",El="[object WeakSet]",yn="[object ArrayBuffer]",Xt="[object DataView]",nr="[object Float32Array]",ir="[object Float64Array]",rr="[object Int8Array]",sr="[object Int16Array]",or="[object Int32Array]",ar="[object Uint8Array]",ur="[object Uint8ClampedArray]",lr="[object Uint16Array]",cr="[object Uint32Array]",Al=/\b__p \+= '';/g,_l=/\b(__p \+=) '' \+/g,Tl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Us=/&(?:amp|lt|gt|quot|#39);/g,Hs=/[&<>"']/g,yl=RegExp(Us.source),Pl=RegExp(Hs.source),wl=/<%-([\s\S]+?)%>/g,Cl=/<%([\s\S]+?)%>/g,$s=/<%=([\s\S]+?)%>/g,Ol=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Il=/^\w*$/,Ml=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pr=/[\\^$.*+?()[\]{}|]/g,Ll=RegExp(pr.source),hr=/^\s+/,Sl=/\s/,Rl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xl=/\{\n\/\* \[wrapped with (.+)\] \*/,Fl=/,? & /,Nl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bl=/[()=,{}\[\]\/\s]/,Dl=/\\(\\)?/g,Wl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zs=/\w*$/,Gl=/^[-+]0x[0-9a-f]+$/i,kl=/^0b[01]+$/i,Ul=/^\[object .+?Constructor\]$/,Hl=/^0o[0-7]+$/i,$l=/^(?:0|[1-9]\d*)$/,zl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ei=/($^)/,Vl=/['\n\r\u2028\u2029\\]/g,ti="\\ud800-\\udfff",Kl="\\u0300-\\u036f",ql="\\ufe20-\\ufe2f",Jl="\\u20d0-\\u20ff",Vs=Kl+ql+Jl,Ks="\\u2700-\\u27bf",qs="a-z\\xdf-\\xf6\\xf8-\\xff",Yl="\\xac\\xb1\\xd7\\xf7",Zl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xl="\\u2000-\\u206f",Ql=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Js="A-Z\\xc0-\\xd6\\xd8-\\xde",Ys="\\ufe0e\\ufe0f",Zs=Yl+Zl+Xl+Ql,dr="['\u2019]",jl="["+ti+"]",Xs="["+Zs+"]",ni="["+Vs+"]",Qs="\\d+",ec="["+Ks+"]",js="["+qs+"]",eo="[^"+ti+Zs+Qs+Ks+qs+Js+"]",fr="\\ud83c[\\udffb-\\udfff]",tc="(?:"+ni+"|"+fr+")",to="[^"+ti+"]",gr="(?:\\ud83c[\\udde6-\\uddff]){2}",mr="[\\ud800-\\udbff][\\udc00-\\udfff]",Qt="["+Js+"]",no="\\u200d",io="(?:"+js+"|"+eo+")",nc="(?:"+Qt+"|"+eo+")",ro="(?:"+dr+"(?:d|ll|m|re|s|t|ve))?",so="(?:"+dr+"(?:D|LL|M|RE|S|T|VE))?",oo=tc+"?",ao="["+Ys+"]?",ic="(?:"+no+"(?:"+[to,gr,mr].join("|")+")"+ao+oo+")*",rc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",uo=ao+oo+ic,oc="(?:"+[ec,gr,mr].join("|")+")"+uo,ac="(?:"+[to+ni+"?",ni,gr,mr,jl].join("|")+")",uc=RegExp(dr,"g"),lc=RegExp(ni,"g"),vr=RegExp(fr+"(?="+fr+")|"+ac+uo,"g"),cc=RegExp([Qt+"?"+js+"+"+ro+"(?="+[Xs,Qt,"$"].join("|")+")",nc+"+"+so+"(?="+[Xs,Qt+io,"$"].join("|")+")",Qt+"?"+io+"+"+ro,Qt+"+"+so,sc,rc,Qs,oc].join("|"),"g"),pc=RegExp("["+no+ti+Vs+Ys+"]"),hc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,dc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fc=-1,le={};le[nr]=le[ir]=le[rr]=le[sr]=le[or]=le[ar]=le[ur]=le[lr]=le[cr]=!0,le[Zt]=le[Zn]=le[yn]=le[vn]=le[Xt]=le[bn]=le[Xn]=le[Qn]=le[rt]=le[En]=le[gt]=le[An]=le[st]=le[_n]=le[Tn]=!1;var oe={};oe[Zt]=oe[Zn]=oe[yn]=oe[Xt]=oe[vn]=oe[bn]=oe[nr]=oe[ir]=oe[rr]=oe[sr]=oe[or]=oe[rt]=oe[En]=oe[gt]=oe[An]=oe[st]=oe[_n]=oe[jn]=oe[ar]=oe[ur]=oe[lr]=oe[cr]=!0,oe[Xn]=oe[Qn]=oe[Tn]=!1;var gc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ec=parseFloat,Ac=parseInt,lo=typeof global=="object"&&global&&global.Object===Object&&global,_c=typeof self=="object"&&self&&self.Object===Object&&self,ye=lo||_c||Function("return this")(),br=typeof gn=="object"&&gn&&!gn.nodeType&&gn,kt=br&&typeof Un=="object"&&Un&&!Un.nodeType&&Un,co=kt&&kt.exports===br,Er=co&&lo.process,Ye=function(){try{var E=kt&&kt.require&&kt.require("util").types;return E||Er&&Er.binding&&Er.binding("util")}catch(w){}}(),po=Ye&&Ye.isArrayBuffer,ho=Ye&&Ye.isDate,fo=Ye&&Ye.isMap,go=Ye&&Ye.isRegExp,mo=Ye&&Ye.isSet,vo=Ye&&Ye.isTypedArray;function He(E,w,T){switch(T.length){case 0:return E.call(w);case 1:return E.call(w,T[0]);case 2:return E.call(w,T[0],T[1]);case 3:return E.call(w,T[0],T[1],T[2])}return E.apply(w,T)}function Tc(E,w,T,x){for(var H=-1,Q=E==null?0:E.length;++H<Q;){var Ae=E[H];w(x,Ae,T(Ae),E)}return x}function Ze(E,w){for(var T=-1,x=E==null?0:E.length;++T<x&&w(E[T],T,E)!==!1;);return E}function yc(E,w){for(var T=E==null?0:E.length;T--&&w(E[T],T,E)!==!1;);return E}function bo(E,w){for(var T=-1,x=E==null?0:E.length;++T<x;)if(!w(E[T],T,E))return!1;return!0}function Ct(E,w){for(var T=-1,x=E==null?0:E.length,H=0,Q=[];++T<x;){var Ae=E[T];w(Ae,T,E)&&(Q[H++]=Ae)}return Q}function ii(E,w){var T=E==null?0:E.length;return!!T&&jt(E,w,0)>-1}function Ar(E,w,T){for(var x=-1,H=E==null?0:E.length;++x<H;)if(T(w,E[x]))return!0;return!1}function pe(E,w){for(var T=-1,x=E==null?0:E.length,H=Array(x);++T<x;)H[T]=w(E[T],T,E);return H}function Ot(E,w){for(var T=-1,x=w.length,H=E.length;++T<x;)E[H+T]=w[T];return E}function _r(E,w,T,x){var H=-1,Q=E==null?0:E.length;for(x&&Q&&(T=E[++H]);++H<Q;)T=w(T,E[H],H,E);return T}function Pc(E,w,T,x){var H=E==null?0:E.length;for(x&&H&&(T=E[--H]);H--;)T=w(T,E[H],H,E);return T}function Tr(E,w){for(var T=-1,x=E==null?0:E.length;++T<x;)if(w(E[T],T,E))return!0;return!1}var wc=yr("length");function Cc(E){return E.split("")}function Oc(E){return E.match(Nl)||[]}function Eo(E,w,T){var x;return T(E,function(H,Q,Ae){if(w(H,Q,Ae))return x=Q,!1}),x}function ri(E,w,T,x){for(var H=E.length,Q=T+(x?1:-1);x?Q--:++Q<H;)if(w(E[Q],Q,E))return Q;return-1}function jt(E,w,T){return w===w?Gc(E,w,T):ri(E,Ao,T)}function Ic(E,w,T,x){for(var H=T-1,Q=E.length;++H<Q;)if(x(E[H],w))return H;return-1}function Ao(E){return E!==E}function _o(E,w){var T=E==null?0:E.length;return T?wr(E,w)/T:Gt}function yr(E){return function(w){return w==null?u:w[E]}}function Pr(E){return function(w){return E==null?u:E[w]}}function To(E,w,T,x,H){return H(E,function(Q,Ae,ne){T=x?(x=!1,Q):w(T,Q,Ae,ne)}),T}function Mc(E,w){var T=E.length;for(E.sort(w);T--;)E[T]=E[T].value;return E}function wr(E,w){for(var T,x=-1,H=E.length;++x<H;){var Q=w(E[x]);Q!==u&&(T=T===u?Q:T+Q)}return T}function Cr(E,w){for(var T=-1,x=Array(E);++T<E;)x[T]=w(T);return x}function Lc(E,w){return pe(w,function(T){return[T,E[T]]})}function yo(E){return E&&E.slice(0,Oo(E)+1).replace(hr,"")}function $e(E){return function(w){return E(w)}}function Or(E,w){return pe(w,function(T){return E[T]})}function Pn(E,w){return E.has(w)}function Po(E,w){for(var T=-1,x=E.length;++T<x&&jt(w,E[T],0)>-1;);return T}function wo(E,w){for(var T=E.length;T--&&jt(w,E[T],0)>-1;);return T}function Sc(E,w){for(var T=E.length,x=0;T--;)E[T]===w&&++x;return x}var Rc=Pr(gc),xc=Pr(mc);function Fc(E){return"\\"+bc[E]}function Nc(E,w){return E==null?u:E[w]}function en(E){return pc.test(E)}function Bc(E){return hc.test(E)}function Dc(E){for(var w,T=[];!(w=E.next()).done;)T.push(w.value);return T}function Ir(E){var w=-1,T=Array(E.size);return E.forEach(function(x,H){T[++w]=[H,x]}),T}function Co(E,w){return function(T){return E(w(T))}}function It(E,w){for(var T=-1,x=E.length,H=0,Q=[];++T<x;){var Ae=E[T];(Ae===w||Ae===p)&&(E[T]=p,Q[H++]=T)}return Q}function si(E){var w=-1,T=Array(E.size);return E.forEach(function(x){T[++w]=x}),T}function Wc(E){var w=-1,T=Array(E.size);return E.forEach(function(x){T[++w]=[x,x]}),T}function Gc(E,w,T){for(var x=T-1,H=E.length;++x<H;)if(E[x]===w)return x;return-1}function kc(E,w,T){for(var x=T+1;x--;)if(E[x]===w)return x;return x}function tn(E){return en(E)?Hc(E):wc(E)}function ot(E){return en(E)?$c(E):Cc(E)}function Oo(E){for(var w=E.length;w--&&Sl.test(E.charAt(w)););return w}var Uc=Pr(vc);function Hc(E){for(var w=vr.lastIndex=0;vr.test(E);)++w;return w}function $c(E){return E.match(vr)||[]}function zc(E){return E.match(cc)||[]}var Vc=function E(w){w=w==null?ye:Mt.defaults(ye.Object(),w,Mt.pick(ye,dc));var T=w.Array,x=w.Date,H=w.Error,Q=w.Function,Ae=w.Math,ne=w.Object,Mr=w.RegExp,Kc=w.String,Xe=w.TypeError,oi=T.prototype,qc=Q.prototype,nn=ne.prototype,ai=w["__core-js_shared__"],ui=qc.toString,te=nn.hasOwnProperty,Jc=0,Io=function(){var e=/[^.]+$/.exec(ai&&ai.keys&&ai.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),li=nn.toString,Yc=ui.call(ne),Zc=ye._,Xc=Mr("^"+ui.call(te).replace(pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ci=co?w.Buffer:u,Lt=w.Symbol,pi=w.Uint8Array,Mo=ci?ci.allocUnsafe:u,hi=Co(ne.getPrototypeOf,ne),Lo=ne.create,So=nn.propertyIsEnumerable,di=oi.splice,Ro=Lt?Lt.isConcatSpreadable:u,wn=Lt?Lt.iterator:u,Ut=Lt?Lt.toStringTag:u,fi=function(){try{var e=Kt(ne,"defineProperty");return e({},"",{}),e}catch(t){}}(),Qc=w.clearTimeout!==ye.clearTimeout&&w.clearTimeout,jc=x&&x.now!==ye.Date.now&&x.now,ep=w.setTimeout!==ye.setTimeout&&w.setTimeout,gi=Ae.ceil,mi=Ae.floor,Lr=ne.getOwnPropertySymbols,tp=ci?ci.isBuffer:u,xo=w.isFinite,np=oi.join,ip=Co(ne.keys,ne),_e=Ae.max,Oe=Ae.min,rp=x.now,sp=w.parseInt,Fo=Ae.random,op=oi.reverse,Sr=Kt(w,"DataView"),Cn=Kt(w,"Map"),Rr=Kt(w,"Promise"),rn=Kt(w,"Set"),On=Kt(w,"WeakMap"),In=Kt(ne,"create"),vi=On&&new On,sn={},ap=qt(Sr),up=qt(Cn),lp=qt(Rr),cp=qt(rn),pp=qt(On),bi=Lt?Lt.prototype:u,Mn=bi?bi.valueOf:u,No=bi?bi.toString:u;function d(e){if(ge(e)&&!$(e)&&!(e instanceof Z)){if(e instanceof Qe)return e;if(te.call(e,"__wrapped__"))return Ba(e)}return new Qe(e)}var on=function(){function e(){}return function(t){if(!de(t))return{};if(Lo)return Lo(t);e.prototype=t;var n=new e;return e.prototype=u,n}}();function Ei(){}function Qe(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=u}d.templateSettings={escape:wl,evaluate:Cl,interpolate:$s,variable:"",imports:{_:d}},d.prototype=Ei.prototype,d.prototype.constructor=d,Qe.prototype=on(Ei.prototype),Qe.prototype.constructor=Qe;function Z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ue,this.__views__=[]}function hp(){var e=new Z(this.__wrapped__);return e.__actions__=Fe(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Fe(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Fe(this.__views__),e}function dp(){if(this.__filtered__){var e=new Z(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function fp(){var e=this.__wrapped__.value(),t=this.__dir__,n=$(e),r=t<0,l=n?e.length:0,f=Ch(0,l,this.__views__),m=f.start,b=f.end,A=b-m,C=r?b:m-1,O=this.__iteratees__,L=O.length,R=0,N=Oe(A,this.__takeCount__);if(!n||!r&&l==A&&N==A)return sa(e,this.__actions__);var G=[];e:for(;A--&&R<N;){C+=t;for(var K=-1,k=e[C];++K<L;){var Y=O[K],X=Y.iteratee,Ke=Y.type,Se=X(k);if(Ke==Dt)k=Se;else if(!Se){if(Ke==ct)continue e;break e}}G[R++]=k}return G}Z.prototype=on(Ei.prototype),Z.prototype.constructor=Z;function Ht(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function gp(){this.__data__=In?In(null):{},this.size=0}function mp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function vp(e){var t=this.__data__;if(In){var n=t[e];return n===v?u:n}return te.call(t,e)?t[e]:u}function bp(e){var t=this.__data__;return In?t[e]!==u:te.call(t,e)}function Ep(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=In&&t===u?v:t,this}Ht.prototype.clear=gp,Ht.prototype.delete=mp,Ht.prototype.get=vp,Ht.prototype.has=bp,Ht.prototype.set=Ep;function mt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ap(){this.__data__=[],this.size=0}function _p(e){var t=this.__data__,n=Ai(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():di.call(t,n,1),--this.size,!0}function Tp(e){var t=this.__data__,n=Ai(t,e);return n<0?u:t[n][1]}function yp(e){return Ai(this.__data__,e)>-1}function Pp(e,t){var n=this.__data__,r=Ai(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}mt.prototype.clear=Ap,mt.prototype.delete=_p,mt.prototype.get=Tp,mt.prototype.has=yp,mt.prototype.set=Pp;function vt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function wp(){this.size=0,this.__data__={hash:new Ht,map:new(Cn||mt),string:new Ht}}function Cp(e){var t=Ri(this,e).delete(e);return this.size-=t?1:0,t}function Op(e){return Ri(this,e).get(e)}function Ip(e){return Ri(this,e).has(e)}function Mp(e,t){var n=Ri(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}vt.prototype.clear=wp,vt.prototype.delete=Cp,vt.prototype.get=Op,vt.prototype.has=Ip,vt.prototype.set=Mp;function $t(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new vt;++t<n;)this.add(e[t])}function Lp(e){return this.__data__.set(e,v),this}function Sp(e){return this.__data__.has(e)}$t.prototype.add=$t.prototype.push=Lp,$t.prototype.has=Sp;function at(e){var t=this.__data__=new mt(e);this.size=t.size}function Rp(){this.__data__=new mt,this.size=0}function xp(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Fp(e){return this.__data__.get(e)}function Np(e){return this.__data__.has(e)}function Bp(e,t){var n=this.__data__;if(n instanceof mt){var r=n.__data__;if(!Cn||r.length<i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new vt(r)}return n.set(e,t),this.size=n.size,this}at.prototype.clear=Rp,at.prototype.delete=xp,at.prototype.get=Fp,at.prototype.has=Np,at.prototype.set=Bp;function Bo(e,t){var n=$(e),r=!n&&Jt(e),l=!n&&!r&&Nt(e),f=!n&&!r&&!l&&cn(e),m=n||r||l||f,b=m?Cr(e.length,Kc):[],A=b.length;for(var C in e)(t||te.call(e,C))&&!(m&&(C=="length"||l&&(C=="offset"||C=="parent")||f&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||_t(C,A)))&&b.push(C);return b}function Do(e){var t=e.length;return t?e[$r(0,t-1)]:u}function Dp(e,t){return xi(Fe(e),zt(t,0,e.length))}function Wp(e){return xi(Fe(e))}function xr(e,t,n){(n!==u&&!ut(e[t],n)||n===u&&!(t in e))&&bt(e,t,n)}function Ln(e,t,n){var r=e[t];(!(te.call(e,t)&&ut(r,n))||n===u&&!(t in e))&&bt(e,t,n)}function Ai(e,t){for(var n=e.length;n--;)if(ut(e[n][0],t))return n;return-1}function Gp(e,t,n,r){return St(e,function(l,f,m){t(r,l,n(l),m)}),r}function Wo(e,t){return e&&ht(t,Pe(t),e)}function kp(e,t){return e&&ht(t,Be(t),e)}function bt(e,t,n){t=="__proto__"&&fi?fi(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Fr(e,t){for(var n=-1,r=t.length,l=T(r),f=e==null;++n<r;)l[n]=f?u:fs(e,t[n]);return l}function zt(e,t,n){return e===e&&(n!==u&&(e=e<=n?e:n),t!==u&&(e=e>=t?e:t)),e}function je(e,t,n,r,l,f){var m,b=t&g,A=t&_,C=t&y;if(n&&(m=l?n(e,r,l,f):n(e)),m!==u)return m;if(!de(e))return e;var O=$(e);if(O){if(m=Ih(e),!b)return Fe(e,m)}else{var L=Ie(e),R=L==Qn||L==Gs;if(Nt(e))return ua(e,b);if(L==gt||L==Zt||R&&!l){if(m=A||R?{}:Oa(e),!b)return A?vh(e,kp(m,e)):mh(e,Wo(m,e))}else{if(!oe[L])return l?e:{};m=Mh(e,L,b)}}f||(f=new at);var N=f.get(e);if(N)return N;f.set(e,m),nu(e)?e.forEach(function(k){m.add(je(k,t,n,k,e,f))}):eu(e)&&e.forEach(function(k,Y){m.set(Y,je(k,t,n,Y,e,f))});var G=C?A?es:jr:A?Be:Pe,K=O?u:G(e);return Ze(K||e,function(k,Y){K&&(Y=k,k=e[Y]),Ln(m,Y,je(k,t,n,Y,e,f))}),m}function Up(e){var t=Pe(e);return function(n){return Go(n,e,t)}}function Go(e,t,n){var r=n.length;if(e==null)return!r;for(e=ne(e);r--;){var l=n[r],f=t[l],m=e[l];if(m===u&&!(l in e)||!f(m))return!1}return!0}function ko(e,t,n){if(typeof e!="function")throw new Xe(a);return Dn(function(){e.apply(u,n)},t)}function Sn(e,t,n,r){var l=-1,f=ii,m=!0,b=e.length,A=[],C=t.length;if(!b)return A;n&&(t=pe(t,$e(n))),r?(f=Ar,m=!1):t.length>=i&&(f=Pn,m=!1,t=new $t(t));e:for(;++l<b;){var O=e[l],L=n==null?O:n(O);if(O=r||O!==0?O:0,m&&L===L){for(var R=C;R--;)if(t[R]===L)continue e;A.push(O)}else f(t,L,r)||A.push(O)}return A}var St=da(pt),Uo=da(Br,!0);function Hp(e,t){var n=!0;return St(e,function(r,l,f){return n=!!t(r,l,f),n}),n}function _i(e,t,n){for(var r=-1,l=e.length;++r<l;){var f=e[r],m=t(f);if(m!=null&&(b===u?m===m&&!Ve(m):n(m,b)))var b=m,A=f}return A}function $p(e,t,n,r){var l=e.length;for(n=V(n),n<0&&(n=-n>l?0:l+n),r=r===u||r>l?l:V(r),r<0&&(r+=l),r=n>r?0:ru(r);n<r;)e[n++]=t;return e}function Ho(e,t){var n=[];return St(e,function(r,l,f){t(r,l,f)&&n.push(r)}),n}function we(e,t,n,r,l){var f=-1,m=e.length;for(n||(n=Sh),l||(l=[]);++f<m;){var b=e[f];t>0&&n(b)?t>1?we(b,t-1,n,r,l):Ot(l,b):r||(l[l.length]=b)}return l}var Nr=fa(),$o=fa(!0);function pt(e,t){return e&&Nr(e,t,Pe)}function Br(e,t){return e&&$o(e,t,Pe)}function Ti(e,t){return Ct(t,function(n){return Tt(e[n])})}function Vt(e,t){t=xt(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[dt(t[n++])];return n&&n==r?e:u}function zo(e,t,n){var r=t(e);return $(e)?r:Ot(r,n(e))}function Me(e){return e==null?e===u?bl:ml:Ut&&Ut in ne(e)?wh(e):Wh(e)}function Dr(e,t){return e>t}function zp(e,t){return e!=null&&te.call(e,t)}function Vp(e,t){return e!=null&&t in ne(e)}function Kp(e,t,n){return e>=Oe(t,n)&&e<_e(t,n)}function Wr(e,t,n){for(var r=n?Ar:ii,l=e[0].length,f=e.length,m=f,b=T(f),A=1/0,C=[];m--;){var O=e[m];m&&t&&(O=pe(O,$e(t))),A=Oe(O.length,A),b[m]=!n&&(t||l>=120&&O.length>=120)?new $t(m&&O):u}O=e[0];var L=-1,R=b[0];e:for(;++L<l&&C.length<A;){var N=O[L],G=t?t(N):N;if(N=n||N!==0?N:0,!(R?Pn(R,G):r(C,G,n))){for(m=f;--m;){var K=b[m];if(!(K?Pn(K,G):r(e[m],G,n)))continue e}R&&R.push(G),C.push(N)}}return C}function qp(e,t,n,r){return pt(e,function(l,f,m){t(r,n(l),f,m)}),r}function Rn(e,t,n){t=xt(t,e),e=Sa(e,t);var r=e==null?e:e[dt(tt(t))];return r==null?u:He(r,e,n)}function Vo(e){return ge(e)&&Me(e)==Zt}function Jp(e){return ge(e)&&Me(e)==yn}function Yp(e){return ge(e)&&Me(e)==bn}function xn(e,t,n,r,l){return e===t?!0:e==null||t==null||!ge(e)&&!ge(t)?e!==e&&t!==t:Zp(e,t,n,r,xn,l)}function Zp(e,t,n,r,l,f){var m=$(e),b=$(t),A=m?Zn:Ie(e),C=b?Zn:Ie(t);A=A==Zt?gt:A,C=C==Zt?gt:C;var O=A==gt,L=C==gt,R=A==C;if(R&&Nt(e)){if(!Nt(t))return!1;m=!0,O=!1}if(R&&!O)return f||(f=new at),m||cn(e)?Pa(e,t,n,r,l,f):yh(e,t,A,n,r,l,f);if(!(n&P)){var N=O&&te.call(e,"__wrapped__"),G=L&&te.call(t,"__wrapped__");if(N||G){var K=N?e.value():e,k=G?t.value():t;return f||(f=new at),l(K,k,n,r,f)}}return R?(f||(f=new at),Ph(e,t,n,r,l,f)):!1}function Xp(e){return ge(e)&&Ie(e)==rt}function Gr(e,t,n,r){var l=n.length,f=l,m=!r;if(e==null)return!f;for(e=ne(e);l--;){var b=n[l];if(m&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++l<f;){b=n[l];var A=b[0],C=e[A],O=b[1];if(m&&b[2]){if(C===u&&!(A in e))return!1}else{var L=new at;if(r)var R=r(C,O,A,e,t,L);if(!(R===u?xn(O,C,P|M,r,L):R))return!1}}return!0}function Ko(e){if(!de(e)||xh(e))return!1;var t=Tt(e)?Xc:Ul;return t.test(qt(e))}function Qp(e){return ge(e)&&Me(e)==An}function jp(e){return ge(e)&&Ie(e)==st}function eh(e){return ge(e)&&Gi(e.length)&&!!le[Me(e)]}function qo(e){return typeof e=="function"?e:e==null?De:typeof e=="object"?$(e)?Zo(e[0],e[1]):Yo(e):gu(e)}function kr(e){if(!Bn(e))return ip(e);var t=[];for(var n in ne(e))te.call(e,n)&&n!="constructor"&&t.push(n);return t}function th(e){if(!de(e))return Dh(e);var t=Bn(e),n=[];for(var r in e)r=="constructor"&&(t||!te.call(e,r))||n.push(r);return n}function Ur(e,t){return e<t}function Jo(e,t){var n=-1,r=Ne(e)?T(e.length):[];return St(e,function(l,f,m){r[++n]=t(l,f,m)}),r}function Yo(e){var t=ns(e);return t.length==1&&t[0][2]?Ma(t[0][0],t[0][1]):function(n){return n===e||Gr(n,e,t)}}function Zo(e,t){return rs(e)&&Ia(t)?Ma(dt(e),t):function(n){var r=fs(n,e);return r===u&&r===t?gs(n,e):xn(t,r,P|M)}}function yi(e,t,n,r,l){e!==t&&Nr(t,function(f,m){if(l||(l=new at),de(f))nh(e,t,m,n,yi,r,l);else{var b=r?r(os(e,m),f,m+"",e,t,l):u;b===u&&(b=f),xr(e,m,b)}},Be)}function nh(e,t,n,r,l,f,m){var b=os(e,n),A=os(t,n),C=m.get(A);if(C){xr(e,n,C);return}var O=f?f(b,A,n+"",e,t,m):u,L=O===u;if(L){var R=$(A),N=!R&&Nt(A),G=!R&&!N&&cn(A);O=A,R||N||G?$(b)?O=b:ve(b)?O=Fe(b):N?(L=!1,O=ua(A,!0)):G?(L=!1,O=la(A,!0)):O=[]:Wn(A)||Jt(A)?(O=b,Jt(b)?O=su(b):(!de(b)||Tt(b))&&(O=Oa(A))):L=!1}L&&(m.set(A,O),l(O,A,r,f,m),m.delete(A)),xr(e,n,O)}function Xo(e,t){var n=e.length;if(!!n)return t+=t<0?n:0,_t(t,n)?e[t]:u}function Qo(e,t,n){t.length?t=pe(t,function(f){return $(f)?function(m){return Vt(m,f.length===1?f[0]:f)}:f}):t=[De];var r=-1;t=pe(t,$e(W()));var l=Jo(e,function(f,m,b){var A=pe(t,function(C){return C(f)});return{criteria:A,index:++r,value:f}});return Mc(l,function(f,m){return gh(f,m,n)})}function ih(e,t){return jo(e,t,function(n,r){return gs(e,r)})}function jo(e,t,n){for(var r=-1,l=t.length,f={};++r<l;){var m=t[r],b=Vt(e,m);n(b,m)&&Fn(f,xt(m,e),b)}return f}function rh(e){return function(t){return Vt(t,e)}}function Hr(e,t,n,r){var l=r?Ic:jt,f=-1,m=t.length,b=e;for(e===t&&(t=Fe(t)),n&&(b=pe(e,$e(n)));++f<m;)for(var A=0,C=t[f],O=n?n(C):C;(A=l(b,O,A,r))>-1;)b!==e&&di.call(b,A,1),di.call(e,A,1);return e}function ea(e,t){for(var n=e?t.length:0,r=n-1;n--;){var l=t[n];if(n==r||l!==f){var f=l;_t(l)?di.call(e,l,1):Kr(e,l)}}return e}function $r(e,t){return e+mi(Fo()*(t-e+1))}function sh(e,t,n,r){for(var l=-1,f=_e(gi((t-e)/(n||1)),0),m=T(f);f--;)m[r?f:++l]=e,e+=n;return m}function zr(e,t){var n="";if(!e||t<1||t>xe)return n;do t%2&&(n+=e),t=mi(t/2),t&&(e+=e);while(t);return n}function q(e,t){return as(La(e,t,De),e+"")}function oh(e){return Do(pn(e))}function ah(e,t){var n=pn(e);return xi(n,zt(t,0,n.length))}function Fn(e,t,n,r){if(!de(e))return e;t=xt(t,e);for(var l=-1,f=t.length,m=f-1,b=e;b!=null&&++l<f;){var A=dt(t[l]),C=n;if(A==="__proto__"||A==="constructor"||A==="prototype")return e;if(l!=m){var O=b[A];C=r?r(O,A,b):u,C===u&&(C=de(O)?O:_t(t[l+1])?[]:{})}Ln(b,A,C),b=b[A]}return e}var ta=vi?function(e,t){return vi.set(e,t),e}:De,uh=fi?function(e,t){return fi(e,"toString",{configurable:!0,enumerable:!1,value:vs(t),writable:!0})}:De;function lh(e){return xi(pn(e))}function et(e,t,n){var r=-1,l=e.length;t<0&&(t=-t>l?0:l+t),n=n>l?l:n,n<0&&(n+=l),l=t>n?0:n-t>>>0,t>>>=0;for(var f=T(l);++r<l;)f[r]=e[r+t];return f}function ch(e,t){var n;return St(e,function(r,l,f){return n=t(r,l,f),!n}),!!n}function Pi(e,t,n){var r=0,l=e==null?r:e.length;if(typeof t=="number"&&t===t&&l<=Jn){for(;r<l;){var f=r+l>>>1,m=e[f];m!==null&&!Ve(m)&&(n?m<=t:m<t)?r=f+1:l=f}return l}return Vr(e,t,De,n)}function Vr(e,t,n,r){var l=0,f=e==null?0:e.length;if(f===0)return 0;t=n(t);for(var m=t!==t,b=t===null,A=Ve(t),C=t===u;l<f;){var O=mi((l+f)/2),L=n(e[O]),R=L!==u,N=L===null,G=L===L,K=Ve(L);if(m)var k=r||G;else C?k=G&&(r||R):b?k=G&&R&&(r||!N):A?k=G&&R&&!N&&(r||!K):N||K?k=!1:k=r?L<=t:L<t;k?l=O+1:f=O}return Oe(f,qn)}function na(e,t){for(var n=-1,r=e.length,l=0,f=[];++n<r;){var m=e[n],b=t?t(m):m;if(!n||!ut(b,A)){var A=b;f[l++]=m===0?0:m}}return f}function ia(e){return typeof e=="number"?e:Ve(e)?Gt:+e}function ze(e){if(typeof e=="string")return e;if($(e))return pe(e,ze)+"";if(Ve(e))return No?No.call(e):"";var t=e+"";return t=="0"&&1/e==-ke?"-0":t}function Rt(e,t,n){var r=-1,l=ii,f=e.length,m=!0,b=[],A=b;if(n)m=!1,l=Ar;else if(f>=i){var C=t?null:_h(e);if(C)return si(C);m=!1,l=Pn,A=new $t}else A=t?[]:b;e:for(;++r<f;){var O=e[r],L=t?t(O):O;if(O=n||O!==0?O:0,m&&L===L){for(var R=A.length;R--;)if(A[R]===L)continue e;t&&A.push(L),b.push(O)}else l(A,L,n)||(A!==b&&A.push(L),b.push(O))}return b}function Kr(e,t){return t=xt(t,e),e=Sa(e,t),e==null||delete e[dt(tt(t))]}function ra(e,t,n,r){return Fn(e,t,n(Vt(e,t)),r)}function wi(e,t,n,r){for(var l=e.length,f=r?l:-1;(r?f--:++f<l)&&t(e[f],f,e););return n?et(e,r?0:f,r?f+1:l):et(e,r?f+1:0,r?l:f)}function sa(e,t){var n=e;return n instanceof Z&&(n=n.value()),_r(t,function(r,l){return l.func.apply(l.thisArg,Ot([r],l.args))},n)}function qr(e,t,n){var r=e.length;if(r<2)return r?Rt(e[0]):[];for(var l=-1,f=T(r);++l<r;)for(var m=e[l],b=-1;++b<r;)b!=l&&(f[l]=Sn(f[l]||m,e[b],t,n));return Rt(we(f,1),t,n)}function oa(e,t,n){for(var r=-1,l=e.length,f=t.length,m={};++r<l;){var b=r<f?t[r]:u;n(m,e[r],b)}return m}function Jr(e){return ve(e)?e:[]}function Yr(e){return typeof e=="function"?e:De}function xt(e,t){return $(e)?e:rs(e,t)?[e]:Na(j(e))}var ph=q;function Ft(e,t,n){var r=e.length;return n=n===u?r:n,!t&&n>=r?e:et(e,t,n)}var aa=Qc||function(e){return ye.clearTimeout(e)};function ua(e,t){if(t)return e.slice();var n=e.length,r=Mo?Mo(n):new e.constructor(n);return e.copy(r),r}function Zr(e){var t=new e.constructor(e.byteLength);return new pi(t).set(new pi(e)),t}function hh(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function dh(e){var t=new e.constructor(e.source,zs.exec(e));return t.lastIndex=e.lastIndex,t}function fh(e){return Mn?ne(Mn.call(e)):{}}function la(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ca(e,t){if(e!==t){var n=e!==u,r=e===null,l=e===e,f=Ve(e),m=t!==u,b=t===null,A=t===t,C=Ve(t);if(!b&&!C&&!f&&e>t||f&&m&&A&&!b&&!C||r&&m&&A||!n&&A||!l)return 1;if(!r&&!f&&!C&&e<t||C&&n&&l&&!r&&!f||b&&n&&l||!m&&l||!A)return-1}return 0}function gh(e,t,n){for(var r=-1,l=e.criteria,f=t.criteria,m=l.length,b=n.length;++r<m;){var A=ca(l[r],f[r]);if(A){if(r>=b)return A;var C=n[r];return A*(C=="desc"?-1:1)}}return e.index-t.index}function pa(e,t,n,r){for(var l=-1,f=e.length,m=n.length,b=-1,A=t.length,C=_e(f-m,0),O=T(A+C),L=!r;++b<A;)O[b]=t[b];for(;++l<m;)(L||l<f)&&(O[n[l]]=e[l]);for(;C--;)O[b++]=e[l++];return O}function ha(e,t,n,r){for(var l=-1,f=e.length,m=-1,b=n.length,A=-1,C=t.length,O=_e(f-b,0),L=T(O+C),R=!r;++l<O;)L[l]=e[l];for(var N=l;++A<C;)L[N+A]=t[A];for(;++m<b;)(R||l<f)&&(L[N+n[m]]=e[l++]);return L}function Fe(e,t){var n=-1,r=e.length;for(t||(t=T(r));++n<r;)t[n]=e[n];return t}function ht(e,t,n,r){var l=!n;n||(n={});for(var f=-1,m=t.length;++f<m;){var b=t[f],A=r?r(n[b],e[b],b,n,e):u;A===u&&(A=e[b]),l?bt(n,b,A):Ln(n,b,A)}return n}function mh(e,t){return ht(e,is(e),t)}function vh(e,t){return ht(e,wa(e),t)}function Ci(e,t){return function(n,r){var l=$(n)?Tc:Gp,f=t?t():{};return l(n,e,W(r,2),f)}}function an(e){return q(function(t,n){var r=-1,l=n.length,f=l>1?n[l-1]:u,m=l>2?n[2]:u;for(f=e.length>3&&typeof f=="function"?(l--,f):u,m&&Le(n[0],n[1],m)&&(f=l<3?u:f,l=1),t=ne(t);++r<l;){var b=n[r];b&&e(t,b,r,f)}return t})}function da(e,t){return function(n,r){if(n==null)return n;if(!Ne(n))return e(n,r);for(var l=n.length,f=t?l:-1,m=ne(n);(t?f--:++f<l)&&r(m[f],f,m)!==!1;);return n}}function fa(e){return function(t,n,r){for(var l=-1,f=ne(t),m=r(t),b=m.length;b--;){var A=m[e?b:++l];if(n(f[A],A,f)===!1)break}return t}}function bh(e,t,n){var r=t&S,l=Nn(e);function f(){var m=this&&this!==ye&&this instanceof f?l:e;return m.apply(r?n:this,arguments)}return f}function ga(e){return function(t){t=j(t);var n=en(t)?ot(t):u,r=n?n[0]:t.charAt(0),l=n?Ft(n,1).join(""):t.slice(1);return r[e]()+l}}function un(e){return function(t){return _r(du(hu(t).replace(uc,"")),e,"")}}function Nn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=on(e.prototype),r=e.apply(n,t);return de(r)?r:n}}function Eh(e,t,n){var r=Nn(e);function l(){for(var f=arguments.length,m=T(f),b=f,A=ln(l);b--;)m[b]=arguments[b];var C=f<3&&m[0]!==A&&m[f-1]!==A?[]:It(m,A);if(f-=C.length,f<n)return Aa(e,t,Oi,l.placeholder,u,m,C,u,u,n-f);var O=this&&this!==ye&&this instanceof l?r:e;return He(O,this,m)}return l}function ma(e){return function(t,n,r){var l=ne(t);if(!Ne(t)){var f=W(n,3);t=Pe(t),n=function(b){return f(l[b],b,l)}}var m=e(t,n,r);return m>-1?l[f?t[m]:m]:u}}function va(e){return At(function(t){var n=t.length,r=n,l=Qe.prototype.thru;for(e&&t.reverse();r--;){var f=t[r];if(typeof f!="function")throw new Xe(a);if(l&&!m&&Si(f)=="wrapper")var m=new Qe([],!0)}for(r=m?r:n;++r<n;){f=t[r];var b=Si(f),A=b=="wrapper"?ts(f):u;A&&ss(A[0])&&A[1]==(fe|D|ce|J)&&!A[4].length&&A[9]==1?m=m[Si(A[0])].apply(m,A[3]):m=f.length==1&&ss(f)?m[b]():m.thru(f)}return function(){var C=arguments,O=C[0];if(m&&C.length==1&&$(O))return m.plant(O).value();for(var L=0,R=n?t[L].apply(this,C):O;++L<n;)R=t[L].call(this,R);return R}})}function Oi(e,t,n,r,l,f,m,b,A,C){var O=t&fe,L=t&S,R=t&F,N=t&(D|ue),G=t&ee,K=R?u:Nn(e);function k(){for(var Y=arguments.length,X=T(Y),Ke=Y;Ke--;)X[Ke]=arguments[Ke];if(N)var Se=ln(k),qe=Sc(X,Se);if(r&&(X=pa(X,r,l,N)),f&&(X=ha(X,f,m,N)),Y-=qe,N&&Y<C){var be=It(X,Se);return Aa(e,t,Oi,k.placeholder,n,X,be,b,A,C-Y)}var lt=L?n:this,Pt=R?lt[e]:e;return Y=X.length,b?X=Gh(X,b):G&&Y>1&&X.reverse(),O&&A<Y&&(X.length=A),this&&this!==ye&&this instanceof k&&(Pt=K||Nn(Pt)),Pt.apply(lt,X)}return k}function ba(e,t){return function(n,r){return qp(n,e,t(r),{})}}function Ii(e,t){return function(n,r){var l;if(n===u&&r===u)return t;if(n!==u&&(l=n),r!==u){if(l===u)return r;typeof n=="string"||typeof r=="string"?(n=ze(n),r=ze(r)):(n=ia(n),r=ia(r)),l=e(n,r)}return l}}function Xr(e){return At(function(t){return t=pe(t,$e(W())),q(function(n){var r=this;return e(t,function(l){return He(l,r,n)})})})}function Mi(e,t){t=t===u?" ":ze(t);var n=t.length;if(n<2)return n?zr(t,e):t;var r=zr(t,gi(e/tn(t)));return en(t)?Ft(ot(r),0,e).join(""):r.slice(0,e)}function Ah(e,t,n,r){var l=t&S,f=Nn(e);function m(){for(var b=-1,A=arguments.length,C=-1,O=r.length,L=T(O+A),R=this&&this!==ye&&this instanceof m?f:e;++C<O;)L[C]=r[C];for(;A--;)L[C++]=arguments[++b];return He(R,l?n:this,L)}return m}function Ea(e){return function(t,n,r){return r&&typeof r!="number"&&Le(t,n,r)&&(n=r=u),t=yt(t),n===u?(n=t,t=0):n=yt(n),r=r===u?t<n?1:-1:yt(r),sh(t,n,r,e)}}function Li(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=nt(t),n=nt(n)),e(t,n)}}function Aa(e,t,n,r,l,f,m,b,A,C){var O=t&D,L=O?m:u,R=O?u:m,N=O?f:u,G=O?u:f;t|=O?ce:he,t&=~(O?he:ce),t&U||(t&=~(S|F));var K=[e,t,l,N,L,G,R,b,A,C],k=n.apply(u,K);return ss(e)&&Ra(k,K),k.placeholder=r,xa(k,e,t)}function Qr(e){var t=Ae[e];return function(n,r){if(n=nt(n),r=r==null?0:Oe(V(r),292),r&&xo(n)){var l=(j(n)+"e").split("e"),f=t(l[0]+"e"+(+l[1]+r));return l=(j(f)+"e").split("e"),+(l[0]+"e"+(+l[1]-r))}return t(n)}}var _h=rn&&1/si(new rn([,-0]))[1]==ke?function(e){return new rn(e)}:As;function _a(e){return function(t){var n=Ie(t);return n==rt?Ir(t):n==st?Wc(t):Lc(t,e(t))}}function Et(e,t,n,r,l,f,m,b){var A=t&F;if(!A&&typeof e!="function")throw new Xe(a);var C=r?r.length:0;if(C||(t&=~(ce|he),r=l=u),m=m===u?m:_e(V(m),0),b=b===u?b:V(b),C-=l?l.length:0,t&he){var O=r,L=l;r=l=u}var R=A?u:ts(e),N=[e,t,n,r,l,O,L,f,m,b];if(R&&Bh(N,R),e=N[0],t=N[1],n=N[2],r=N[3],l=N[4],b=N[9]=N[9]===u?A?0:e.length:_e(N[9]-C,0),!b&&t&(D|ue)&&(t&=~(D|ue)),!t||t==S)var G=bh(e,t,n);else t==D||t==ue?G=Eh(e,t,b):(t==ce||t==(S|ce))&&!l.length?G=Ah(e,t,n,r):G=Oi.apply(u,N);var K=R?ta:Ra;return xa(K(G,N),e,t)}function Ta(e,t,n,r){return e===u||ut(e,nn[n])&&!te.call(r,n)?t:e}function ya(e,t,n,r,l,f){return de(e)&&de(t)&&(f.set(t,e),yi(e,t,u,ya,f),f.delete(t)),e}function Th(e){return Wn(e)?u:e}function Pa(e,t,n,r,l,f){var m=n&P,b=e.length,A=t.length;if(b!=A&&!(m&&A>b))return!1;var C=f.get(e),O=f.get(t);if(C&&O)return C==t&&O==e;var L=-1,R=!0,N=n&M?new $t:u;for(f.set(e,t),f.set(t,e);++L<b;){var G=e[L],K=t[L];if(r)var k=m?r(K,G,L,t,e,f):r(G,K,L,e,t,f);if(k!==u){if(k)continue;R=!1;break}if(N){if(!Tr(t,function(Y,X){if(!Pn(N,X)&&(G===Y||l(G,Y,n,r,f)))return N.push(X)})){R=!1;break}}else if(!(G===K||l(G,K,n,r,f))){R=!1;break}}return f.delete(e),f.delete(t),R}function yh(e,t,n,r,l,f,m){switch(n){case Xt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case yn:return!(e.byteLength!=t.byteLength||!f(new pi(e),new pi(t)));case vn:case bn:case En:return ut(+e,+t);case Xn:return e.name==t.name&&e.message==t.message;case An:case _n:return e==t+"";case rt:var b=Ir;case st:var A=r&P;if(b||(b=si),e.size!=t.size&&!A)return!1;var C=m.get(e);if(C)return C==t;r|=M,m.set(e,t);var O=Pa(b(e),b(t),r,l,f,m);return m.delete(e),O;case jn:if(Mn)return Mn.call(e)==Mn.call(t)}return!1}function Ph(e,t,n,r,l,f){var m=n&P,b=jr(e),A=b.length,C=jr(t),O=C.length;if(A!=O&&!m)return!1;for(var L=A;L--;){var R=b[L];if(!(m?R in t:te.call(t,R)))return!1}var N=f.get(e),G=f.get(t);if(N&&G)return N==t&&G==e;var K=!0;f.set(e,t),f.set(t,e);for(var k=m;++L<A;){R=b[L];var Y=e[R],X=t[R];if(r)var Ke=m?r(X,Y,R,t,e,f):r(Y,X,R,e,t,f);if(!(Ke===u?Y===X||l(Y,X,n,r,f):Ke)){K=!1;break}k||(k=R=="constructor")}if(K&&!k){var Se=e.constructor,qe=t.constructor;Se!=qe&&"constructor"in e&&"constructor"in t&&!(typeof Se=="function"&&Se instanceof Se&&typeof qe=="function"&&qe instanceof qe)&&(K=!1)}return f.delete(e),f.delete(t),K}function At(e){return as(La(e,u,Ga),e+"")}function jr(e){return zo(e,Pe,is)}function es(e){return zo(e,Be,wa)}var ts=vi?function(e){return vi.get(e)}:As;function Si(e){for(var t=e.name+"",n=sn[t],r=te.call(sn,t)?n.length:0;r--;){var l=n[r],f=l.func;if(f==null||f==e)return l.name}return t}function ln(e){var t=te.call(d,"placeholder")?d:e;return t.placeholder}function W(){var e=d.iteratee||bs;return e=e===bs?qo:e,arguments.length?e(arguments[0],arguments[1]):e}function Ri(e,t){var n=e.__data__;return Rh(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ns(e){for(var t=Pe(e),n=t.length;n--;){var r=t[n],l=e[r];t[n]=[r,l,Ia(l)]}return t}function Kt(e,t){var n=Nc(e,t);return Ko(n)?n:u}function wh(e){var t=te.call(e,Ut),n=e[Ut];try{e[Ut]=u;var r=!0}catch(f){}var l=li.call(e);return r&&(t?e[Ut]=n:delete e[Ut]),l}var is=Lr?function(e){return e==null?[]:(e=ne(e),Ct(Lr(e),function(t){return So.call(e,t)}))}:_s,wa=Lr?function(e){for(var t=[];e;)Ot(t,is(e)),e=hi(e);return t}:_s,Ie=Me;(Sr&&Ie(new Sr(new ArrayBuffer(1)))!=Xt||Cn&&Ie(new Cn)!=rt||Rr&&Ie(Rr.resolve())!=ks||rn&&Ie(new rn)!=st||On&&Ie(new On)!=Tn)&&(Ie=function(e){var t=Me(e),n=t==gt?e.constructor:u,r=n?qt(n):"";if(r)switch(r){case ap:return Xt;case up:return rt;case lp:return ks;case cp:return st;case pp:return Tn}return t});function Ch(e,t,n){for(var r=-1,l=n.length;++r<l;){var f=n[r],m=f.size;switch(f.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Oe(t,e+m);break;case"takeRight":e=_e(e,t-m);break}}return{start:e,end:t}}function Oh(e){var t=e.match(xl);return t?t[1].split(Fl):[]}function Ca(e,t,n){t=xt(t,e);for(var r=-1,l=t.length,f=!1;++r<l;){var m=dt(t[r]);if(!(f=e!=null&&n(e,m)))break;e=e[m]}return f||++r!=l?f:(l=e==null?0:e.length,!!l&&Gi(l)&&_t(m,l)&&($(e)||Jt(e)))}function Ih(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&te.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Oa(e){return typeof e.constructor=="function"&&!Bn(e)?on(hi(e)):{}}function Mh(e,t,n){var r=e.constructor;switch(t){case yn:return Zr(e);case vn:case bn:return new r(+e);case Xt:return hh(e,n);case nr:case ir:case rr:case sr:case or:case ar:case ur:case lr:case cr:return la(e,n);case rt:return new r;case En:case _n:return new r(e);case An:return dh(e);case st:return new r;case jn:return fh(e)}}function Lh(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Rl,`{
/* [wrapped with `+t+`] */
`)}function Sh(e){return $(e)||Jt(e)||!!(Ro&&e&&e[Ro])}function _t(e,t){var n=typeof e;return t=t==null?xe:t,!!t&&(n=="number"||n!="symbol"&&$l.test(e))&&e>-1&&e%1==0&&e<t}function Le(e,t,n){if(!de(n))return!1;var r=typeof t;return(r=="number"?Ne(n)&&_t(t,n.length):r=="string"&&t in n)?ut(n[t],e):!1}function rs(e,t){if($(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ve(e)?!0:Il.test(e)||!Ol.test(e)||t!=null&&e in ne(t)}function Rh(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ss(e){var t=Si(e),n=d[t];if(typeof n!="function"||!(t in Z.prototype))return!1;if(e===n)return!0;var r=ts(n);return!!r&&e===r[0]}function xh(e){return!!Io&&Io in e}var Fh=ai?Tt:Ts;function Bn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||nn;return e===n}function Ia(e){return e===e&&!de(e)}function Ma(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==u||e in ne(n))}}function Nh(e){var t=Di(e,function(r){return n.size===c&&n.clear(),r}),n=t.cache;return t}function Bh(e,t){var n=e[1],r=t[1],l=n|r,f=l<(S|F|fe),m=r==fe&&n==D||r==fe&&n==J&&e[7].length<=t[8]||r==(fe|J)&&t[7].length<=t[8]&&n==D;if(!(f||m))return e;r&S&&(e[2]=t[2],l|=n&S?0:U);var b=t[3];if(b){var A=e[3];e[3]=A?pa(A,b,t[4]):b,e[4]=A?It(e[3],p):t[4]}return b=t[5],b&&(A=e[5],e[5]=A?ha(A,b,t[6]):b,e[6]=A?It(e[5],p):t[6]),b=t[7],b&&(e[7]=b),r&fe&&(e[8]=e[8]==null?t[8]:Oe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=l,e}function Dh(e){var t=[];if(e!=null)for(var n in ne(e))t.push(n);return t}function Wh(e){return li.call(e)}function La(e,t,n){return t=_e(t===u?e.length-1:t,0),function(){for(var r=arguments,l=-1,f=_e(r.length-t,0),m=T(f);++l<f;)m[l]=r[t+l];l=-1;for(var b=T(t+1);++l<t;)b[l]=r[l];return b[t]=n(m),He(e,this,b)}}function Sa(e,t){return t.length<2?e:Vt(e,et(t,0,-1))}function Gh(e,t){for(var n=e.length,r=Oe(t.length,n),l=Fe(e);r--;){var f=t[r];e[r]=_t(f,n)?l[f]:u}return e}function os(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Ra=Fa(ta),Dn=ep||function(e,t){return ye.setTimeout(e,t)},as=Fa(uh);function xa(e,t,n){var r=t+"";return as(e,Lh(r,kh(Oh(r),n)))}function Fa(e){var t=0,n=0;return function(){var r=rp(),l=wt-(r-n);if(n=r,l>0){if(++t>=it)return arguments[0]}else t=0;return e.apply(u,arguments)}}function xi(e,t){var n=-1,r=e.length,l=r-1;for(t=t===u?r:t;++n<t;){var f=$r(n,l),m=e[f];e[f]=e[n],e[n]=m}return e.length=t,e}var Na=Nh(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ml,function(n,r,l,f){t.push(l?f.replace(Dl,"$1"):r||n)}),t});function dt(e){if(typeof e=="string"||Ve(e))return e;var t=e+"";return t=="0"&&1/e==-ke?"-0":t}function qt(e){if(e!=null){try{return ui.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function kh(e,t){return Ze(Yn,function(n){var r="_."+n[0];t&n[1]&&!ii(e,r)&&e.push(r)}),e.sort()}function Ba(e){if(e instanceof Z)return e.clone();var t=new Qe(e.__wrapped__,e.__chain__);return t.__actions__=Fe(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Uh(e,t,n){(n?Le(e,t,n):t===u)?t=1:t=_e(V(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var l=0,f=0,m=T(gi(r/t));l<r;)m[f++]=et(e,l,l+=t);return m}function Hh(e){for(var t=-1,n=e==null?0:e.length,r=0,l=[];++t<n;){var f=e[t];f&&(l[r++]=f)}return l}function $h(){var e=arguments.length;if(!e)return[];for(var t=T(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Ot($(n)?Fe(n):[n],we(t,1))}var zh=q(function(e,t){return ve(e)?Sn(e,we(t,1,ve,!0)):[]}),Vh=q(function(e,t){var n=tt(t);return ve(n)&&(n=u),ve(e)?Sn(e,we(t,1,ve,!0),W(n,2)):[]}),Kh=q(function(e,t){var n=tt(t);return ve(n)&&(n=u),ve(e)?Sn(e,we(t,1,ve,!0),u,n):[]});function qh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:V(t),et(e,t<0?0:t,r)):[]}function Jh(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:V(t),t=r-t,et(e,0,t<0?0:t)):[]}function Yh(e,t){return e&&e.length?wi(e,W(t,3),!0,!0):[]}function Zh(e,t){return e&&e.length?wi(e,W(t,3),!0):[]}function Xh(e,t,n,r){var l=e==null?0:e.length;return l?(n&&typeof n!="number"&&Le(e,t,n)&&(n=0,r=l),$p(e,t,n,r)):[]}function Da(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var l=n==null?0:V(n);return l<0&&(l=_e(r+l,0)),ri(e,W(t,3),l)}function Wa(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var l=r-1;return n!==u&&(l=V(n),l=n<0?_e(r+l,0):Oe(l,r-1)),ri(e,W(t,3),l,!0)}function Ga(e){var t=e==null?0:e.length;return t?we(e,1):[]}function Qh(e){var t=e==null?0:e.length;return t?we(e,ke):[]}function jh(e,t){var n=e==null?0:e.length;return n?(t=t===u?1:V(t),we(e,t)):[]}function ed(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var l=e[t];r[l[0]]=l[1]}return r}function ka(e){return e&&e.length?e[0]:u}function td(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var l=n==null?0:V(n);return l<0&&(l=_e(r+l,0)),jt(e,t,l)}function nd(e){var t=e==null?0:e.length;return t?et(e,0,-1):[]}var id=q(function(e){var t=pe(e,Jr);return t.length&&t[0]===e[0]?Wr(t):[]}),rd=q(function(e){var t=tt(e),n=pe(e,Jr);return t===tt(n)?t=u:n.pop(),n.length&&n[0]===e[0]?Wr(n,W(t,2)):[]}),sd=q(function(e){var t=tt(e),n=pe(e,Jr);return t=typeof t=="function"?t:u,t&&n.pop(),n.length&&n[0]===e[0]?Wr(n,u,t):[]});function od(e,t){return e==null?"":np.call(e,t)}function tt(e){var t=e==null?0:e.length;return t?e[t-1]:u}function ad(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var l=r;return n!==u&&(l=V(n),l=l<0?_e(r+l,0):Oe(l,r-1)),t===t?kc(e,t,l):ri(e,Ao,l,!0)}function ud(e,t){return e&&e.length?Xo(e,V(t)):u}var ld=q(Ua);function Ua(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}function cd(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,W(n,2)):e}function pd(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,u,n):e}var hd=At(function(e,t){var n=e==null?0:e.length,r=Fr(e,t);return ea(e,pe(t,function(l){return _t(l,n)?+l:l}).sort(ca)),r});function dd(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,l=[],f=e.length;for(t=W(t,3);++r<f;){var m=e[r];t(m,r,e)&&(n.push(m),l.push(r))}return ea(e,l),n}function us(e){return e==null?e:op.call(e)}function fd(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&Le(e,t,n)?(t=0,n=r):(t=t==null?0:V(t),n=n===u?r:V(n)),et(e,t,n)):[]}function gd(e,t){return Pi(e,t)}function md(e,t,n){return Vr(e,t,W(n,2))}function vd(e,t){var n=e==null?0:e.length;if(n){var r=Pi(e,t);if(r<n&&ut(e[r],t))return r}return-1}function bd(e,t){return Pi(e,t,!0)}function Ed(e,t,n){return Vr(e,t,W(n,2),!0)}function Ad(e,t){var n=e==null?0:e.length;if(n){var r=Pi(e,t,!0)-1;if(ut(e[r],t))return r}return-1}function _d(e){return e&&e.length?na(e):[]}function Td(e,t){return e&&e.length?na(e,W(t,2)):[]}function yd(e){var t=e==null?0:e.length;return t?et(e,1,t):[]}function Pd(e,t,n){return e&&e.length?(t=n||t===u?1:V(t),et(e,0,t<0?0:t)):[]}function wd(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===u?1:V(t),t=r-t,et(e,t<0?0:t,r)):[]}function Cd(e,t){return e&&e.length?wi(e,W(t,3),!1,!0):[]}function Od(e,t){return e&&e.length?wi(e,W(t,3)):[]}var Id=q(function(e){return Rt(we(e,1,ve,!0))}),Md=q(function(e){var t=tt(e);return ve(t)&&(t=u),Rt(we(e,1,ve,!0),W(t,2))}),Ld=q(function(e){var t=tt(e);return t=typeof t=="function"?t:u,Rt(we(e,1,ve,!0),u,t)});function Sd(e){return e&&e.length?Rt(e):[]}function Rd(e,t){return e&&e.length?Rt(e,W(t,2)):[]}function xd(e,t){return t=typeof t=="function"?t:u,e&&e.length?Rt(e,u,t):[]}function ls(e){if(!(e&&e.length))return[];var t=0;return e=Ct(e,function(n){if(ve(n))return t=_e(n.length,t),!0}),Cr(t,function(n){return pe(e,yr(n))})}function Ha(e,t){if(!(e&&e.length))return[];var n=ls(e);return t==null?n:pe(n,function(r){return He(t,u,r)})}var Fd=q(function(e,t){return ve(e)?Sn(e,t):[]}),Nd=q(function(e){return qr(Ct(e,ve))}),Bd=q(function(e){var t=tt(e);return ve(t)&&(t=u),qr(Ct(e,ve),W(t,2))}),Dd=q(function(e){var t=tt(e);return t=typeof t=="function"?t:u,qr(Ct(e,ve),u,t)}),Wd=q(ls);function Gd(e,t){return oa(e||[],t||[],Ln)}function kd(e,t){return oa(e||[],t||[],Fn)}var Ud=q(function(e){var t=e.length,n=t>1?e[t-1]:u;return n=typeof n=="function"?(e.pop(),n):u,Ha(e,n)});function $a(e){var t=d(e);return t.__chain__=!0,t}function Hd(e,t){return t(e),e}function Fi(e,t){return t(e)}var $d=At(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,l=function(f){return Fr(f,e)};return t>1||this.__actions__.length||!(r instanceof Z)||!_t(n)?this.thru(l):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Fi,args:[l],thisArg:u}),new Qe(r,this.__chain__).thru(function(f){return t&&!f.length&&f.push(u),f}))});function zd(){return $a(this)}function Vd(){return new Qe(this.value(),this.__chain__)}function Kd(){this.__values__===u&&(this.__values__=iu(this.value()));var e=this.__index__>=this.__values__.length,t=e?u:this.__values__[this.__index__++];return{done:e,value:t}}function qd(){return this}function Jd(e){for(var t,n=this;n instanceof Ei;){var r=Ba(n);r.__index__=0,r.__values__=u,t?l.__wrapped__=r:t=r;var l=r;n=n.__wrapped__}return l.__wrapped__=e,t}function Yd(){var e=this.__wrapped__;if(e instanceof Z){var t=e;return this.__actions__.length&&(t=new Z(this)),t=t.reverse(),t.__actions__.push({func:Fi,args:[us],thisArg:u}),new Qe(t,this.__chain__)}return this.thru(us)}function Zd(){return sa(this.__wrapped__,this.__actions__)}var Xd=Ci(function(e,t,n){te.call(e,n)?++e[n]:bt(e,n,1)});function Qd(e,t,n){var r=$(e)?bo:Hp;return n&&Le(e,t,n)&&(t=u),r(e,W(t,3))}function jd(e,t){var n=$(e)?Ct:Ho;return n(e,W(t,3))}var ef=ma(Da),tf=ma(Wa);function nf(e,t){return we(Ni(e,t),1)}function rf(e,t){return we(Ni(e,t),ke)}function sf(e,t,n){return n=n===u?1:V(n),we(Ni(e,t),n)}function za(e,t){var n=$(e)?Ze:St;return n(e,W(t,3))}function Va(e,t){var n=$(e)?yc:Uo;return n(e,W(t,3))}var of=Ci(function(e,t,n){te.call(e,n)?e[n].push(t):bt(e,n,[t])});function af(e,t,n,r){e=Ne(e)?e:pn(e),n=n&&!r?V(n):0;var l=e.length;return n<0&&(n=_e(l+n,0)),ki(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&jt(e,t,n)>-1}var uf=q(function(e,t,n){var r=-1,l=typeof t=="function",f=Ne(e)?T(e.length):[];return St(e,function(m){f[++r]=l?He(t,m,n):Rn(m,t,n)}),f}),lf=Ci(function(e,t,n){bt(e,n,t)});function Ni(e,t){var n=$(e)?pe:Jo;return n(e,W(t,3))}function cf(e,t,n,r){return e==null?[]:($(t)||(t=t==null?[]:[t]),n=r?u:n,$(n)||(n=n==null?[]:[n]),Qo(e,t,n))}var pf=Ci(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function hf(e,t,n){var r=$(e)?_r:To,l=arguments.length<3;return r(e,W(t,4),n,l,St)}function df(e,t,n){var r=$(e)?Pc:To,l=arguments.length<3;return r(e,W(t,4),n,l,Uo)}function ff(e,t){var n=$(e)?Ct:Ho;return n(e,Wi(W(t,3)))}function gf(e){var t=$(e)?Do:oh;return t(e)}function mf(e,t,n){(n?Le(e,t,n):t===u)?t=1:t=V(t);var r=$(e)?Dp:ah;return r(e,t)}function vf(e){var t=$(e)?Wp:lh;return t(e)}function bf(e){if(e==null)return 0;if(Ne(e))return ki(e)?tn(e):e.length;var t=Ie(e);return t==rt||t==st?e.size:kr(e).length}function Ef(e,t,n){var r=$(e)?Tr:ch;return n&&Le(e,t,n)&&(t=u),r(e,W(t,3))}var Af=q(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Le(e,t[0],t[1])?t=[]:n>2&&Le(t[0],t[1],t[2])&&(t=[t[0]]),Qo(e,we(t,1),[])}),Bi=jc||function(){return ye.Date.now()};function _f(e,t){if(typeof t!="function")throw new Xe(a);return e=V(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ka(e,t,n){return t=n?u:t,t=e&&t==null?e.length:t,Et(e,fe,u,u,u,u,t)}function qa(e,t){var n;if(typeof t!="function")throw new Xe(a);return e=V(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=u),n}}var cs=q(function(e,t,n){var r=S;if(n.length){var l=It(n,ln(cs));r|=ce}return Et(e,r,t,n,l)}),Ja=q(function(e,t,n){var r=S|F;if(n.length){var l=It(n,ln(Ja));r|=ce}return Et(t,r,e,n,l)});function Ya(e,t,n){t=n?u:t;var r=Et(e,D,u,u,u,u,u,t);return r.placeholder=Ya.placeholder,r}function Za(e,t,n){t=n?u:t;var r=Et(e,ue,u,u,u,u,u,t);return r.placeholder=Za.placeholder,r}function Xa(e,t,n){var r,l,f,m,b,A,C=0,O=!1,L=!1,R=!0;if(typeof e!="function")throw new Xe(a);t=nt(t)||0,de(n)&&(O=!!n.leading,L="maxWait"in n,f=L?_e(nt(n.maxWait)||0,t):f,R="trailing"in n?!!n.trailing:R);function N(be){var lt=r,Pt=l;return r=l=u,C=be,m=e.apply(Pt,lt),m}function G(be){return C=be,b=Dn(Y,t),O?N(be):m}function K(be){var lt=be-A,Pt=be-C,mu=t-lt;return L?Oe(mu,f-Pt):mu}function k(be){var lt=be-A,Pt=be-C;return A===u||lt>=t||lt<0||L&&Pt>=f}function Y(){var be=Bi();if(k(be))return X(be);b=Dn(Y,K(be))}function X(be){return b=u,R&&r?N(be):(r=l=u,m)}function Ke(){b!==u&&aa(b),C=0,r=A=l=b=u}function Se(){return b===u?m:X(Bi())}function qe(){var be=Bi(),lt=k(be);if(r=arguments,l=this,A=be,lt){if(b===u)return G(A);if(L)return aa(b),b=Dn(Y,t),N(A)}return b===u&&(b=Dn(Y,t)),m}return qe.cancel=Ke,qe.flush=Se,qe}var Tf=q(function(e,t){return ko(e,1,t)}),yf=q(function(e,t,n){return ko(e,nt(t)||0,n)});function Pf(e){return Et(e,ee)}function Di(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Xe(a);var n=function(){var r=arguments,l=t?t.apply(this,r):r[0],f=n.cache;if(f.has(l))return f.get(l);var m=e.apply(this,r);return n.cache=f.set(l,m)||f,m};return n.cache=new(Di.Cache||vt),n}Di.Cache=vt;function Wi(e){if(typeof e!="function")throw new Xe(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function wf(e){return qa(2,e)}var Cf=ph(function(e,t){t=t.length==1&&$(t[0])?pe(t[0],$e(W())):pe(we(t,1),$e(W()));var n=t.length;return q(function(r){for(var l=-1,f=Oe(r.length,n);++l<f;)r[l]=t[l].call(this,r[l]);return He(e,this,r)})}),ps=q(function(e,t){var n=It(t,ln(ps));return Et(e,ce,u,t,n)}),Qa=q(function(e,t){var n=It(t,ln(Qa));return Et(e,he,u,t,n)}),Of=At(function(e,t){return Et(e,J,u,u,u,t)});function If(e,t){if(typeof e!="function")throw new Xe(a);return t=t===u?t:V(t),q(e,t)}function Mf(e,t){if(typeof e!="function")throw new Xe(a);return t=t==null?0:_e(V(t),0),q(function(n){var r=n[t],l=Ft(n,0,t);return r&&Ot(l,r),He(e,this,l)})}function Lf(e,t,n){var r=!0,l=!0;if(typeof e!="function")throw new Xe(a);return de(n)&&(r="leading"in n?!!n.leading:r,l="trailing"in n?!!n.trailing:l),Xa(e,t,{leading:r,maxWait:t,trailing:l})}function Sf(e){return Ka(e,1)}function Rf(e,t){return ps(Yr(t),e)}function xf(){if(!arguments.length)return[];var e=arguments[0];return $(e)?e:[e]}function Ff(e){return je(e,y)}function Nf(e,t){return t=typeof t=="function"?t:u,je(e,y,t)}function Bf(e){return je(e,g|y)}function Df(e,t){return t=typeof t=="function"?t:u,je(e,g|y,t)}function Wf(e,t){return t==null||Go(e,t,Pe(t))}function ut(e,t){return e===t||e!==e&&t!==t}var Gf=Li(Dr),kf=Li(function(e,t){return e>=t}),Jt=Vo(function(){return arguments}())?Vo:function(e){return ge(e)&&te.call(e,"callee")&&!So.call(e,"callee")},$=T.isArray,Uf=po?$e(po):Jp;function Ne(e){return e!=null&&Gi(e.length)&&!Tt(e)}function ve(e){return ge(e)&&Ne(e)}function Hf(e){return e===!0||e===!1||ge(e)&&Me(e)==vn}var Nt=tp||Ts,$f=ho?$e(ho):Yp;function zf(e){return ge(e)&&e.nodeType===1&&!Wn(e)}function Vf(e){if(e==null)return!0;if(Ne(e)&&($(e)||typeof e=="string"||typeof e.splice=="function"||Nt(e)||cn(e)||Jt(e)))return!e.length;var t=Ie(e);if(t==rt||t==st)return!e.size;if(Bn(e))return!kr(e).length;for(var n in e)if(te.call(e,n))return!1;return!0}function Kf(e,t){return xn(e,t)}function qf(e,t,n){n=typeof n=="function"?n:u;var r=n?n(e,t):u;return r===u?xn(e,t,u,n):!!r}function hs(e){if(!ge(e))return!1;var t=Me(e);return t==Xn||t==gl||typeof e.message=="string"&&typeof e.name=="string"&&!Wn(e)}function Jf(e){return typeof e=="number"&&xo(e)}function Tt(e){if(!de(e))return!1;var t=Me(e);return t==Qn||t==Gs||t==fl||t==vl}function ja(e){return typeof e=="number"&&e==V(e)}function Gi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=xe}function de(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ge(e){return e!=null&&typeof e=="object"}var eu=fo?$e(fo):Xp;function Yf(e,t){return e===t||Gr(e,t,ns(t))}function Zf(e,t,n){return n=typeof n=="function"?n:u,Gr(e,t,ns(t),n)}function Xf(e){return tu(e)&&e!=+e}function Qf(e){if(Fh(e))throw new H(o);return Ko(e)}function jf(e){return e===null}function eg(e){return e==null}function tu(e){return typeof e=="number"||ge(e)&&Me(e)==En}function Wn(e){if(!ge(e)||Me(e)!=gt)return!1;var t=hi(e);if(t===null)return!0;var n=te.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ui.call(n)==Yc}var ds=go?$e(go):Qp;function tg(e){return ja(e)&&e>=-xe&&e<=xe}var nu=mo?$e(mo):jp;function ki(e){return typeof e=="string"||!$(e)&&ge(e)&&Me(e)==_n}function Ve(e){return typeof e=="symbol"||ge(e)&&Me(e)==jn}var cn=vo?$e(vo):eh;function ng(e){return e===u}function ig(e){return ge(e)&&Ie(e)==Tn}function rg(e){return ge(e)&&Me(e)==El}var sg=Li(Ur),og=Li(function(e,t){return e<=t});function iu(e){if(!e)return[];if(Ne(e))return ki(e)?ot(e):Fe(e);if(wn&&e[wn])return Dc(e[wn]());var t=Ie(e),n=t==rt?Ir:t==st?si:pn;return n(e)}function yt(e){if(!e)return e===0?e:0;if(e=nt(e),e===ke||e===-ke){var t=e<0?-1:1;return t*Kn}return e===e?e:0}function V(e){var t=yt(e),n=t%1;return t===t?n?t-n:t:0}function ru(e){return e?zt(V(e),0,Ue):0}function nt(e){if(typeof e=="number")return e;if(Ve(e))return Gt;if(de(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=de(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=yo(e);var n=kl.test(e);return n||Hl.test(e)?Ac(e.slice(2),n?2:8):Gl.test(e)?Gt:+e}function su(e){return ht(e,Be(e))}function ag(e){return e?zt(V(e),-xe,xe):e===0?e:0}function j(e){return e==null?"":ze(e)}var ug=an(function(e,t){if(Bn(t)||Ne(t)){ht(t,Pe(t),e);return}for(var n in t)te.call(t,n)&&Ln(e,n,t[n])}),ou=an(function(e,t){ht(t,Be(t),e)}),Ui=an(function(e,t,n,r){ht(t,Be(t),e,r)}),lg=an(function(e,t,n,r){ht(t,Pe(t),e,r)}),cg=At(Fr);function pg(e,t){var n=on(e);return t==null?n:Wo(n,t)}var hg=q(function(e,t){e=ne(e);var n=-1,r=t.length,l=r>2?t[2]:u;for(l&&Le(t[0],t[1],l)&&(r=1);++n<r;)for(var f=t[n],m=Be(f),b=-1,A=m.length;++b<A;){var C=m[b],O=e[C];(O===u||ut(O,nn[C])&&!te.call(e,C))&&(e[C]=f[C])}return e}),dg=q(function(e){return e.push(u,ya),He(au,u,e)});function fg(e,t){return Eo(e,W(t,3),pt)}function gg(e,t){return Eo(e,W(t,3),Br)}function mg(e,t){return e==null?e:Nr(e,W(t,3),Be)}function vg(e,t){return e==null?e:$o(e,W(t,3),Be)}function bg(e,t){return e&&pt(e,W(t,3))}function Eg(e,t){return e&&Br(e,W(t,3))}function Ag(e){return e==null?[]:Ti(e,Pe(e))}function _g(e){return e==null?[]:Ti(e,Be(e))}function fs(e,t,n){var r=e==null?u:Vt(e,t);return r===u?n:r}function Tg(e,t){return e!=null&&Ca(e,t,zp)}function gs(e,t){return e!=null&&Ca(e,t,Vp)}var yg=ba(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=li.call(t)),e[t]=n},vs(De)),Pg=ba(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=li.call(t)),te.call(e,t)?e[t].push(n):e[t]=[n]},W),wg=q(Rn);function Pe(e){return Ne(e)?Bo(e):kr(e)}function Be(e){return Ne(e)?Bo(e,!0):th(e)}function Cg(e,t){var n={};return t=W(t,3),pt(e,function(r,l,f){bt(n,t(r,l,f),r)}),n}function Og(e,t){var n={};return t=W(t,3),pt(e,function(r,l,f){bt(n,l,t(r,l,f))}),n}var Ig=an(function(e,t,n){yi(e,t,n)}),au=an(function(e,t,n,r){yi(e,t,n,r)}),Mg=At(function(e,t){var n={};if(e==null)return n;var r=!1;t=pe(t,function(f){return f=xt(f,e),r||(r=f.length>1),f}),ht(e,es(e),n),r&&(n=je(n,g|_|y,Th));for(var l=t.length;l--;)Kr(n,t[l]);return n});function Lg(e,t){return uu(e,Wi(W(t)))}var Sg=At(function(e,t){return e==null?{}:ih(e,t)});function uu(e,t){if(e==null)return{};var n=pe(es(e),function(r){return[r]});return t=W(t),jo(e,n,function(r,l){return t(r,l[0])})}function Rg(e,t,n){t=xt(t,e);var r=-1,l=t.length;for(l||(l=1,e=u);++r<l;){var f=e==null?u:e[dt(t[r])];f===u&&(r=l,f=n),e=Tt(f)?f.call(e):f}return e}function xg(e,t,n){return e==null?e:Fn(e,t,n)}function Fg(e,t,n,r){return r=typeof r=="function"?r:u,e==null?e:Fn(e,t,n,r)}var lu=_a(Pe),cu=_a(Be);function Ng(e,t,n){var r=$(e),l=r||Nt(e)||cn(e);if(t=W(t,4),n==null){var f=e&&e.constructor;l?n=r?new f:[]:de(e)?n=Tt(f)?on(hi(e)):{}:n={}}return(l?Ze:pt)(e,function(m,b,A){return t(n,m,b,A)}),n}function Bg(e,t){return e==null?!0:Kr(e,t)}function Dg(e,t,n){return e==null?e:ra(e,t,Yr(n))}function Wg(e,t,n,r){return r=typeof r=="function"?r:u,e==null?e:ra(e,t,Yr(n),r)}function pn(e){return e==null?[]:Or(e,Pe(e))}function Gg(e){return e==null?[]:Or(e,Be(e))}function kg(e,t,n){return n===u&&(n=t,t=u),n!==u&&(n=nt(n),n=n===n?n:0),t!==u&&(t=nt(t),t=t===t?t:0),zt(nt(e),t,n)}function Ug(e,t,n){return t=yt(t),n===u?(n=t,t=0):n=yt(n),e=nt(e),Kp(e,t,n)}function Hg(e,t,n){if(n&&typeof n!="boolean"&&Le(e,t,n)&&(t=n=u),n===u&&(typeof t=="boolean"?(n=t,t=u):typeof e=="boolean"&&(n=e,e=u)),e===u&&t===u?(e=0,t=1):(e=yt(e),t===u?(t=e,e=0):t=yt(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var l=Fo();return Oe(e+l*(t-e+Ec("1e-"+((l+"").length-1))),t)}return $r(e,t)}var $g=un(function(e,t,n){return t=t.toLowerCase(),e+(n?pu(t):t)});function pu(e){return ms(j(e).toLowerCase())}function hu(e){return e=j(e),e&&e.replace(zl,Rc).replace(lc,"")}function zg(e,t,n){e=j(e),t=ze(t);var r=e.length;n=n===u?r:zt(V(n),0,r);var l=n;return n-=t.length,n>=0&&e.slice(n,l)==t}function Vg(e){return e=j(e),e&&Pl.test(e)?e.replace(Hs,xc):e}function Kg(e){return e=j(e),e&&Ll.test(e)?e.replace(pr,"\\$&"):e}var qg=un(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Jg=un(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Yg=ga("toLowerCase");function Zg(e,t,n){e=j(e),t=V(t);var r=t?tn(e):0;if(!t||r>=t)return e;var l=(t-r)/2;return Mi(mi(l),n)+e+Mi(gi(l),n)}function Xg(e,t,n){e=j(e),t=V(t);var r=t?tn(e):0;return t&&r<t?e+Mi(t-r,n):e}function Qg(e,t,n){e=j(e),t=V(t);var r=t?tn(e):0;return t&&r<t?Mi(t-r,n)+e:e}function jg(e,t,n){return n||t==null?t=0:t&&(t=+t),sp(j(e).replace(hr,""),t||0)}function em(e,t,n){return(n?Le(e,t,n):t===u)?t=1:t=V(t),zr(j(e),t)}function tm(){var e=arguments,t=j(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var nm=un(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function im(e,t,n){return n&&typeof n!="number"&&Le(e,t,n)&&(t=n=u),n=n===u?Ue:n>>>0,n?(e=j(e),e&&(typeof t=="string"||t!=null&&!ds(t))&&(t=ze(t),!t&&en(e))?Ft(ot(e),0,n):e.split(t,n)):[]}var rm=un(function(e,t,n){return e+(n?" ":"")+ms(t)});function sm(e,t,n){return e=j(e),n=n==null?0:zt(V(n),0,e.length),t=ze(t),e.slice(n,n+t.length)==t}function om(e,t,n){var r=d.templateSettings;n&&Le(e,t,n)&&(t=u),e=j(e),t=Ui({},t,r,Ta);var l=Ui({},t.imports,r.imports,Ta),f=Pe(l),m=Or(l,f),b,A,C=0,O=t.interpolate||ei,L="__p += '",R=Mr((t.escape||ei).source+"|"+O.source+"|"+(O===$s?Wl:ei).source+"|"+(t.evaluate||ei).source+"|$","g"),N="//# sourceURL="+(te.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fc+"]")+`
`;e.replace(R,function(k,Y,X,Ke,Se,qe){return X||(X=Ke),L+=e.slice(C,qe).replace(Vl,Fc),Y&&(b=!0,L+=`' +
__e(`+Y+`) +
'`),Se&&(A=!0,L+=`';
`+Se+`;
__p += '`),X&&(L+=`' +
((__t = (`+X+`)) == null ? '' : __t) +
'`),C=qe+k.length,k}),L+=`';
`;var G=te.call(t,"variable")&&t.variable;if(!G)L=`with (obj) {
`+L+`
}
`;else if(Bl.test(G))throw new H(h);L=(A?L.replace(Al,""):L).replace(_l,"$1").replace(Tl,"$1;"),L="function("+(G||"obj")+`) {
`+(G?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var K=fu(function(){return Q(f,N+"return "+L).apply(u,m)});if(K.source=L,hs(K))throw K;return K}function am(e){return j(e).toLowerCase()}function um(e){return j(e).toUpperCase()}function lm(e,t,n){if(e=j(e),e&&(n||t===u))return yo(e);if(!e||!(t=ze(t)))return e;var r=ot(e),l=ot(t),f=Po(r,l),m=wo(r,l)+1;return Ft(r,f,m).join("")}function cm(e,t,n){if(e=j(e),e&&(n||t===u))return e.slice(0,Oo(e)+1);if(!e||!(t=ze(t)))return e;var r=ot(e),l=wo(r,ot(t))+1;return Ft(r,0,l).join("")}function pm(e,t,n){if(e=j(e),e&&(n||t===u))return e.replace(hr,"");if(!e||!(t=ze(t)))return e;var r=ot(e),l=Po(r,ot(t));return Ft(r,l).join("")}function hm(e,t){var n=Te,r=me;if(de(t)){var l="separator"in t?t.separator:l;n="length"in t?V(t.length):n,r="omission"in t?ze(t.omission):r}e=j(e);var f=e.length;if(en(e)){var m=ot(e);f=m.length}if(n>=f)return e;var b=n-tn(r);if(b<1)return r;var A=m?Ft(m,0,b).join(""):e.slice(0,b);if(l===u)return A+r;if(m&&(b+=A.length-b),ds(l)){if(e.slice(b).search(l)){var C,O=A;for(l.global||(l=Mr(l.source,j(zs.exec(l))+"g")),l.lastIndex=0;C=l.exec(O);)var L=C.index;A=A.slice(0,L===u?b:L)}}else if(e.indexOf(ze(l),b)!=b){var R=A.lastIndexOf(l);R>-1&&(A=A.slice(0,R))}return A+r}function dm(e){return e=j(e),e&&yl.test(e)?e.replace(Us,Uc):e}var fm=un(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ms=ga("toUpperCase");function du(e,t,n){return e=j(e),t=n?u:t,t===u?Bc(e)?zc(e):Oc(e):e.match(t)||[]}var fu=q(function(e,t){try{return He(e,u,t)}catch(n){return hs(n)?n:new H(n)}}),gm=At(function(e,t){return Ze(t,function(n){n=dt(n),bt(e,n,cs(e[n],e))}),e});function mm(e){var t=e==null?0:e.length,n=W();return e=t?pe(e,function(r){if(typeof r[1]!="function")throw new Xe(a);return[n(r[0]),r[1]]}):[],q(function(r){for(var l=-1;++l<t;){var f=e[l];if(He(f[0],this,r))return He(f[1],this,r)}})}function vm(e){return Up(je(e,g))}function vs(e){return function(){return e}}function bm(e,t){return e==null||e!==e?t:e}var Em=va(),Am=va(!0);function De(e){return e}function bs(e){return qo(typeof e=="function"?e:je(e,g))}function _m(e){return Yo(je(e,g))}function Tm(e,t){return Zo(e,je(t,g))}var ym=q(function(e,t){return function(n){return Rn(n,e,t)}}),Pm=q(function(e,t){return function(n){return Rn(e,n,t)}});function Es(e,t,n){var r=Pe(t),l=Ti(t,r);n==null&&!(de(t)&&(l.length||!r.length))&&(n=t,t=e,e=this,l=Ti(t,Pe(t)));var f=!(de(n)&&"chain"in n)||!!n.chain,m=Tt(e);return Ze(l,function(b){var A=t[b];e[b]=A,m&&(e.prototype[b]=function(){var C=this.__chain__;if(f||C){var O=e(this.__wrapped__),L=O.__actions__=Fe(this.__actions__);return L.push({func:A,args:arguments,thisArg:e}),O.__chain__=C,O}return A.apply(e,Ot([this.value()],arguments))})}),e}function wm(){return ye._===this&&(ye._=Zc),this}function As(){}function Cm(e){return e=V(e),q(function(t){return Xo(t,e)})}var Om=Xr(pe),Im=Xr(bo),Mm=Xr(Tr);function gu(e){return rs(e)?yr(dt(e)):rh(e)}function Lm(e){return function(t){return e==null?u:Vt(e,t)}}var Sm=Ea(),Rm=Ea(!0);function _s(){return[]}function Ts(){return!1}function xm(){return{}}function Fm(){return""}function Nm(){return!0}function Bm(e,t){if(e=V(e),e<1||e>xe)return[];var n=Ue,r=Oe(e,Ue);t=W(t),e-=Ue;for(var l=Cr(r,t);++n<e;)t(n);return l}function Dm(e){return $(e)?pe(e,dt):Ve(e)?[e]:Fe(Na(j(e)))}function Wm(e){var t=++Jc;return j(e)+t}var Gm=Ii(function(e,t){return e+t},0),km=Qr("ceil"),Um=Ii(function(e,t){return e/t},1),Hm=Qr("floor");function $m(e){return e&&e.length?_i(e,De,Dr):u}function zm(e,t){return e&&e.length?_i(e,W(t,2),Dr):u}function Vm(e){return _o(e,De)}function Km(e,t){return _o(e,W(t,2))}function qm(e){return e&&e.length?_i(e,De,Ur):u}function Jm(e,t){return e&&e.length?_i(e,W(t,2),Ur):u}var Ym=Ii(function(e,t){return e*t},1),Zm=Qr("round"),Xm=Ii(function(e,t){return e-t},0);function Qm(e){return e&&e.length?wr(e,De):0}function jm(e,t){return e&&e.length?wr(e,W(t,2)):0}return d.after=_f,d.ary=Ka,d.assign=ug,d.assignIn=ou,d.assignInWith=Ui,d.assignWith=lg,d.at=cg,d.before=qa,d.bind=cs,d.bindAll=gm,d.bindKey=Ja,d.castArray=xf,d.chain=$a,d.chunk=Uh,d.compact=Hh,d.concat=$h,d.cond=mm,d.conforms=vm,d.constant=vs,d.countBy=Xd,d.create=pg,d.curry=Ya,d.curryRight=Za,d.debounce=Xa,d.defaults=hg,d.defaultsDeep=dg,d.defer=Tf,d.delay=yf,d.difference=zh,d.differenceBy=Vh,d.differenceWith=Kh,d.drop=qh,d.dropRight=Jh,d.dropRightWhile=Yh,d.dropWhile=Zh,d.fill=Xh,d.filter=jd,d.flatMap=nf,d.flatMapDeep=rf,d.flatMapDepth=sf,d.flatten=Ga,d.flattenDeep=Qh,d.flattenDepth=jh,d.flip=Pf,d.flow=Em,d.flowRight=Am,d.fromPairs=ed,d.functions=Ag,d.functionsIn=_g,d.groupBy=of,d.initial=nd,d.intersection=id,d.intersectionBy=rd,d.intersectionWith=sd,d.invert=yg,d.invertBy=Pg,d.invokeMap=uf,d.iteratee=bs,d.keyBy=lf,d.keys=Pe,d.keysIn=Be,d.map=Ni,d.mapKeys=Cg,d.mapValues=Og,d.matches=_m,d.matchesProperty=Tm,d.memoize=Di,d.merge=Ig,d.mergeWith=au,d.method=ym,d.methodOf=Pm,d.mixin=Es,d.negate=Wi,d.nthArg=Cm,d.omit=Mg,d.omitBy=Lg,d.once=wf,d.orderBy=cf,d.over=Om,d.overArgs=Cf,d.overEvery=Im,d.overSome=Mm,d.partial=ps,d.partialRight=Qa,d.partition=pf,d.pick=Sg,d.pickBy=uu,d.property=gu,d.propertyOf=Lm,d.pull=ld,d.pullAll=Ua,d.pullAllBy=cd,d.pullAllWith=pd,d.pullAt=hd,d.range=Sm,d.rangeRight=Rm,d.rearg=Of,d.reject=ff,d.remove=dd,d.rest=If,d.reverse=us,d.sampleSize=mf,d.set=xg,d.setWith=Fg,d.shuffle=vf,d.slice=fd,d.sortBy=Af,d.sortedUniq=_d,d.sortedUniqBy=Td,d.split=im,d.spread=Mf,d.tail=yd,d.take=Pd,d.takeRight=wd,d.takeRightWhile=Cd,d.takeWhile=Od,d.tap=Hd,d.throttle=Lf,d.thru=Fi,d.toArray=iu,d.toPairs=lu,d.toPairsIn=cu,d.toPath=Dm,d.toPlainObject=su,d.transform=Ng,d.unary=Sf,d.union=Id,d.unionBy=Md,d.unionWith=Ld,d.uniq=Sd,d.uniqBy=Rd,d.uniqWith=xd,d.unset=Bg,d.unzip=ls,d.unzipWith=Ha,d.update=Dg,d.updateWith=Wg,d.values=pn,d.valuesIn=Gg,d.without=Fd,d.words=du,d.wrap=Rf,d.xor=Nd,d.xorBy=Bd,d.xorWith=Dd,d.zip=Wd,d.zipObject=Gd,d.zipObjectDeep=kd,d.zipWith=Ud,d.entries=lu,d.entriesIn=cu,d.extend=ou,d.extendWith=Ui,Es(d,d),d.add=Gm,d.attempt=fu,d.camelCase=$g,d.capitalize=pu,d.ceil=km,d.clamp=kg,d.clone=Ff,d.cloneDeep=Bf,d.cloneDeepWith=Df,d.cloneWith=Nf,d.conformsTo=Wf,d.deburr=hu,d.defaultTo=bm,d.divide=Um,d.endsWith=zg,d.eq=ut,d.escape=Vg,d.escapeRegExp=Kg,d.every=Qd,d.find=ef,d.findIndex=Da,d.findKey=fg,d.findLast=tf,d.findLastIndex=Wa,d.findLastKey=gg,d.floor=Hm,d.forEach=za,d.forEachRight=Va,d.forIn=mg,d.forInRight=vg,d.forOwn=bg,d.forOwnRight=Eg,d.get=fs,d.gt=Gf,d.gte=kf,d.has=Tg,d.hasIn=gs,d.head=ka,d.identity=De,d.includes=af,d.indexOf=td,d.inRange=Ug,d.invoke=wg,d.isArguments=Jt,d.isArray=$,d.isArrayBuffer=Uf,d.isArrayLike=Ne,d.isArrayLikeObject=ve,d.isBoolean=Hf,d.isBuffer=Nt,d.isDate=$f,d.isElement=zf,d.isEmpty=Vf,d.isEqual=Kf,d.isEqualWith=qf,d.isError=hs,d.isFinite=Jf,d.isFunction=Tt,d.isInteger=ja,d.isLength=Gi,d.isMap=eu,d.isMatch=Yf,d.isMatchWith=Zf,d.isNaN=Xf,d.isNative=Qf,d.isNil=eg,d.isNull=jf,d.isNumber=tu,d.isObject=de,d.isObjectLike=ge,d.isPlainObject=Wn,d.isRegExp=ds,d.isSafeInteger=tg,d.isSet=nu,d.isString=ki,d.isSymbol=Ve,d.isTypedArray=cn,d.isUndefined=ng,d.isWeakMap=ig,d.isWeakSet=rg,d.join=od,d.kebabCase=qg,d.last=tt,d.lastIndexOf=ad,d.lowerCase=Jg,d.lowerFirst=Yg,d.lt=sg,d.lte=og,d.max=$m,d.maxBy=zm,d.mean=Vm,d.meanBy=Km,d.min=qm,d.minBy=Jm,d.stubArray=_s,d.stubFalse=Ts,d.stubObject=xm,d.stubString=Fm,d.stubTrue=Nm,d.multiply=Ym,d.nth=ud,d.noConflict=wm,d.noop=As,d.now=Bi,d.pad=Zg,d.padEnd=Xg,d.padStart=Qg,d.parseInt=jg,d.random=Hg,d.reduce=hf,d.reduceRight=df,d.repeat=em,d.replace=tm,d.result=Rg,d.round=Zm,d.runInContext=E,d.sample=gf,d.size=bf,d.snakeCase=nm,d.some=Ef,d.sortedIndex=gd,d.sortedIndexBy=md,d.sortedIndexOf=vd,d.sortedLastIndex=bd,d.sortedLastIndexBy=Ed,d.sortedLastIndexOf=Ad,d.startCase=rm,d.startsWith=sm,d.subtract=Xm,d.sum=Qm,d.sumBy=jm,d.template=om,d.times=Bm,d.toFinite=yt,d.toInteger=V,d.toLength=ru,d.toLower=am,d.toNumber=nt,d.toSafeInteger=ag,d.toString=j,d.toUpper=um,d.trim=lm,d.trimEnd=cm,d.trimStart=pm,d.truncate=hm,d.unescape=dm,d.uniqueId=Wm,d.upperCase=fm,d.upperFirst=ms,d.each=za,d.eachRight=Va,d.first=ka,Es(d,function(){var e={};return pt(d,function(t,n){te.call(d.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),d.VERSION=s,Ze(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),Ze(["drop","take"],function(e,t){Z.prototype[e]=function(n){n=n===u?1:_e(V(n),0);var r=this.__filtered__&&!t?new Z(this):this.clone();return r.__filtered__?r.__takeCount__=Oe(n,r.__takeCount__):r.__views__.push({size:Oe(n,Ue),type:e+(r.__dir__<0?"Right":"")}),r},Z.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),Ze(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==ct||n==Wt;Z.prototype[e]=function(l){var f=this.clone();return f.__iteratees__.push({iteratee:W(l,3),type:n}),f.__filtered__=f.__filtered__||r,f}}),Ze(["head","last"],function(e,t){var n="take"+(t?"Right":"");Z.prototype[e]=function(){return this[n](1).value()[0]}}),Ze(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Z.prototype[e]=function(){return this.__filtered__?new Z(this):this[n](1)}}),Z.prototype.compact=function(){return this.filter(De)},Z.prototype.find=function(e){return this.filter(e).head()},Z.prototype.findLast=function(e){return this.reverse().find(e)},Z.prototype.invokeMap=q(function(e,t){return typeof e=="function"?new Z(this):this.map(function(n){return Rn(n,e,t)})}),Z.prototype.reject=function(e){return this.filter(Wi(W(e)))},Z.prototype.slice=function(e,t){e=V(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Z(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==u&&(t=V(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Z.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Z.prototype.toArray=function(){return this.take(Ue)},pt(Z.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),l=d[r?"take"+(t=="last"?"Right":""):t],f=r||/^find/.test(t);!l||(d.prototype[t]=function(){var m=this.__wrapped__,b=r?[1]:arguments,A=m instanceof Z,C=b[0],O=A||$(m),L=function(Y){var X=l.apply(d,Ot([Y],b));return r&&R?X[0]:X};O&&n&&typeof C=="function"&&C.length!=1&&(A=O=!1);var R=this.__chain__,N=!!this.__actions__.length,G=f&&!R,K=A&&!N;if(!f&&O){m=K?m:new Z(this);var k=e.apply(m,b);return k.__actions__.push({func:Fi,args:[L],thisArg:u}),new Qe(k,R)}return G&&K?e.apply(this,b):(k=this.thru(L),G?r?k.value()[0]:k.value():k)})}),Ze(["pop","push","shift","sort","splice","unshift"],function(e){var t=oi[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var l=arguments;if(r&&!this.__chain__){var f=this.value();return t.apply($(f)?f:[],l)}return this[n](function(m){return t.apply($(m)?m:[],l)})}}),pt(Z.prototype,function(e,t){var n=d[t];if(n){var r=n.name+"";te.call(sn,r)||(sn[r]=[]),sn[r].push({name:t,func:n})}}),sn[Oi(u,F).name]=[{name:"wrapper",func:u}],Z.prototype.clone=hp,Z.prototype.reverse=dp,Z.prototype.value=fp,d.prototype.at=$d,d.prototype.chain=zd,d.prototype.commit=Vd,d.prototype.next=Kd,d.prototype.plant=Jd,d.prototype.reverse=Yd,d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=Zd,d.prototype.first=d.prototype.head,wn&&(d.prototype[wn]=qd),d},Mt=Vc();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ye._=Mt,define(function(){return Mt})):kt?((kt.exports=Mt)._=Mt,br._=Mt):ye._=Mt}).call(gn)});var ll=Ee(($n,Rs)=>{I();(function(u,s){typeof $n=="object"&&typeof Rs=="object"?Rs.exports=s():typeof define=="function"&&define.amd?define([],s):typeof $n=="object"?$n.bowser=s():u.bowser=s()})($n,function(){return function(u){var s={};function i(o){if(s[o])return s[o].exports;var a=s[o]={i:o,l:!1,exports:{}};return u[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=u,i.c=s,i.d=function(o,a,h){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:h})},i.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var v in o)i.d(h,v,function(c){return o[c]}.bind(null,v));return h},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=90)}({17:function(u,s,i){"use strict";s.__esModule=!0,s.default=void 0;var o=i(18),a=function(){function h(){}return h.getFirstMatch=function(v,c){var p=c.match(v);return p&&p.length>0&&p[1]||""},h.getSecondMatch=function(v,c){var p=c.match(v);return p&&p.length>1&&p[2]||""},h.matchAndReturnConst=function(v,c,p){if(v.test(c))return p},h.getWindowsVersionName=function(v){switch(v){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},h.getMacOSVersionName=function(v){var c=v.split(".").splice(0,2).map(function(p){return parseInt(p,10)||0});if(c.push(0),c[0]===10)switch(c[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},h.getAndroidVersionName=function(v){var c=v.split(".").splice(0,2).map(function(p){return parseInt(p,10)||0});if(c.push(0),!(c[0]===1&&c[1]<5))return c[0]===1&&c[1]<6?"Cupcake":c[0]===1&&c[1]>=6?"Donut":c[0]===2&&c[1]<2?"Eclair":c[0]===2&&c[1]===2?"Froyo":c[0]===2&&c[1]>2?"Gingerbread":c[0]===3?"Honeycomb":c[0]===4&&c[1]<1?"Ice Cream Sandwich":c[0]===4&&c[1]<4?"Jelly Bean":c[0]===4&&c[1]>=4?"KitKat":c[0]===5?"Lollipop":c[0]===6?"Marshmallow":c[0]===7?"Nougat":c[0]===8?"Oreo":c[0]===9?"Pie":void 0},h.getVersionPrecision=function(v){return v.split(".").length},h.compareVersions=function(v,c,p){p===void 0&&(p=!1);var g=h.getVersionPrecision(v),_=h.getVersionPrecision(c),y=Math.max(g,_),P=0,M=h.map([v,c],function(S){var F=y-h.getVersionPrecision(S),U=S+new Array(F+1).join(".0");return h.map(U.split("."),function(D){return new Array(20-D.length).join("0")+D}).reverse()});for(p&&(P=y-Math.min(g,_)),y-=1;y>=P;){if(M[0][y]>M[1][y])return 1;if(M[0][y]===M[1][y]){if(y===P)return 0;y-=1}else if(M[0][y]<M[1][y])return-1}},h.map=function(v,c){var p,g=[];if(Array.prototype.map)return Array.prototype.map.call(v,c);for(p=0;p<v.length;p+=1)g.push(c(v[p]));return g},h.find=function(v,c){var p,g;if(Array.prototype.find)return Array.prototype.find.call(v,c);for(p=0,g=v.length;p<g;p+=1){var _=v[p];if(c(_,p))return _}},h.assign=function(v){for(var c,p,g=v,_=arguments.length,y=new Array(_>1?_-1:0),P=1;P<_;P++)y[P-1]=arguments[P];if(Object.assign)return Object.assign.apply(Object,[v].concat(y));var M=function(){var S=y[c];typeof S=="object"&&S!==null&&Object.keys(S).forEach(function(F){g[F]=S[F]})};for(c=0,p=y.length;c<p;c+=1)M();return v},h.getBrowserAlias=function(v){return o.BROWSER_ALIASES_MAP[v]},h.getBrowserTypeByAlias=function(v){return o.BROWSER_MAP[v]||""},h}();s.default=a,u.exports=s.default},18:function(u,s,i){"use strict";s.__esModule=!0,s.ENGINE_MAP=s.OS_MAP=s.PLATFORMS_MAP=s.BROWSER_MAP=s.BROWSER_ALIASES_MAP=void 0,s.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},s.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},s.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},s.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},s.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(u,s,i){"use strict";s.__esModule=!0,s.default=void 0;var o,a=(o=i(91))&&o.__esModule?o:{default:o},h=i(18);function v(p,g){for(var _=0;_<g.length;_++){var y=g[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(p,y.key,y)}}var c=function(){function p(){}var g,_,y;return p.getParser=function(P,M){if(M===void 0&&(M=!1),typeof P!="string")throw new Error("UserAgent should be a string");return new a.default(P,M)},p.parse=function(P){return new a.default(P).getResult()},g=p,y=[{key:"BROWSER_MAP",get:function(){return h.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return h.ENGINE_MAP}},{key:"OS_MAP",get:function(){return h.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return h.PLATFORMS_MAP}}],(_=null)&&v(g.prototype,_),y&&v(g,y),p}();s.default=c,u.exports=s.default},91:function(u,s,i){"use strict";s.__esModule=!0,s.default=void 0;var o=p(i(92)),a=p(i(93)),h=p(i(94)),v=p(i(95)),c=p(i(17));function p(_){return _&&_.__esModule?_:{default:_}}var g=function(){function _(P,M){if(M===void 0&&(M=!1),P==null||P==="")throw new Error("UserAgent parameter can't be empty");this._ua=P,this.parsedResult={},M!==!0&&this.parse()}var y=_.prototype;return y.getUA=function(){return this._ua},y.test=function(P){return P.test(this._ua)},y.parseBrowser=function(){var P=this;this.parsedResult.browser={};var M=c.default.find(o.default,function(S){if(typeof S.test=="function")return S.test(P);if(S.test instanceof Array)return S.test.some(function(F){return P.test(F)});throw new Error("Browser's test function is not valid")});return M&&(this.parsedResult.browser=M.describe(this.getUA())),this.parsedResult.browser},y.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},y.getBrowserName=function(P){return P?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},y.getBrowserVersion=function(){return this.getBrowser().version},y.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},y.parseOS=function(){var P=this;this.parsedResult.os={};var M=c.default.find(a.default,function(S){if(typeof S.test=="function")return S.test(P);if(S.test instanceof Array)return S.test.some(function(F){return P.test(F)});throw new Error("Browser's test function is not valid")});return M&&(this.parsedResult.os=M.describe(this.getUA())),this.parsedResult.os},y.getOSName=function(P){var M=this.getOS().name;return P?String(M).toLowerCase()||"":M||""},y.getOSVersion=function(){return this.getOS().version},y.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},y.getPlatformType=function(P){P===void 0&&(P=!1);var M=this.getPlatform().type;return P?String(M).toLowerCase()||"":M||""},y.parsePlatform=function(){var P=this;this.parsedResult.platform={};var M=c.default.find(h.default,function(S){if(typeof S.test=="function")return S.test(P);if(S.test instanceof Array)return S.test.some(function(F){return P.test(F)});throw new Error("Browser's test function is not valid")});return M&&(this.parsedResult.platform=M.describe(this.getUA())),this.parsedResult.platform},y.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},y.getEngineName=function(P){return P?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},y.parseEngine=function(){var P=this;this.parsedResult.engine={};var M=c.default.find(v.default,function(S){if(typeof S.test=="function")return S.test(P);if(S.test instanceof Array)return S.test.some(function(F){return P.test(F)});throw new Error("Browser's test function is not valid")});return M&&(this.parsedResult.engine=M.describe(this.getUA())),this.parsedResult.engine},y.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},y.getResult=function(){return c.default.assign({},this.parsedResult)},y.satisfies=function(P){var M=this,S={},F=0,U={},D=0;if(Object.keys(P).forEach(function(me){var it=P[me];typeof it=="string"?(U[me]=it,D+=1):typeof it=="object"&&(S[me]=it,F+=1)}),F>0){var ue=Object.keys(S),ce=c.default.find(ue,function(me){return M.isOS(me)});if(ce){var he=this.satisfies(S[ce]);if(he!==void 0)return he}var fe=c.default.find(ue,function(me){return M.isPlatform(me)});if(fe){var J=this.satisfies(S[fe]);if(J!==void 0)return J}}if(D>0){var ee=Object.keys(U),Te=c.default.find(ee,function(me){return M.isBrowser(me,!0)});if(Te!==void 0)return this.compareVersion(U[Te])}},y.isBrowser=function(P,M){M===void 0&&(M=!1);var S=this.getBrowserName().toLowerCase(),F=P.toLowerCase(),U=c.default.getBrowserTypeByAlias(F);return M&&U&&(F=U.toLowerCase()),F===S},y.compareVersion=function(P){var M=[0],S=P,F=!1,U=this.getBrowserVersion();if(typeof U=="string")return P[0]===">"||P[0]==="<"?(S=P.substr(1),P[1]==="="?(F=!0,S=P.substr(2)):M=[],P[0]===">"?M.push(1):M.push(-1)):P[0]==="="?S=P.substr(1):P[0]==="~"&&(F=!0,S=P.substr(1)),M.indexOf(c.default.compareVersions(U,S,F))>-1},y.isOS=function(P){return this.getOSName(!0)===String(P).toLowerCase()},y.isPlatform=function(P){return this.getPlatformType(!0)===String(P).toLowerCase()},y.isEngine=function(P){return this.getEngineName(!0)===String(P).toLowerCase()},y.is=function(P,M){return M===void 0&&(M=!1),this.isBrowser(P,M)||this.isOS(P)||this.isPlatform(P)},y.some=function(P){var M=this;return P===void 0&&(P=[]),P.some(function(S){return M.is(S)})},_}();s.default=g,u.exports=s.default},92:function(u,s,i){"use strict";s.__esModule=!0,s.default=void 0;var o,a=(o=i(17))&&o.__esModule?o:{default:o},h=/version\/(\d+(\.?_?\d+)+)/i,v=[{test:[/googlebot/i],describe:function(c){var p={name:"Googlebot"},g=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/opera/i],describe:function(c){var p={name:"Opera"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/opr\/|opios/i],describe:function(c){var p={name:"Opera"},g=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/SamsungBrowser/i],describe:function(c){var p={name:"Samsung Internet for Android"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/Whale/i],describe:function(c){var p={name:"NAVER Whale Browser"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/MZBrowser/i],describe:function(c){var p={name:"MZ Browser"},g=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/focus/i],describe:function(c){var p={name:"Focus"},g=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/swing/i],describe:function(c){var p={name:"Swing"},g=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/coast/i],describe:function(c){var p={name:"Opera Coast"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(c){var p={name:"Opera Touch"},g=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/yabrowser/i],describe:function(c){var p={name:"Yandex Browser"},g=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/ucbrowser/i],describe:function(c){var p={name:"UC Browser"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/Maxthon|mxios/i],describe:function(c){var p={name:"Maxthon"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/epiphany/i],describe:function(c){var p={name:"Epiphany"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/puffin/i],describe:function(c){var p={name:"Puffin"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/sleipnir/i],describe:function(c){var p={name:"Sleipnir"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/k-meleon/i],describe:function(c){var p={name:"K-Meleon"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/micromessenger/i],describe:function(c){var p={name:"WeChat"},g=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/qqbrowser/i],describe:function(c){var p={name:/qqbrowserlite/i.test(c)?"QQ Browser Lite":"QQ Browser"},g=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/msie|trident/i],describe:function(c){var p={name:"Internet Explorer"},g=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/\sedg\//i],describe:function(c){var p={name:"Microsoft Edge"},g=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/edg([ea]|ios)/i],describe:function(c){var p={name:"Microsoft Edge"},g=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/vivaldi/i],describe:function(c){var p={name:"Vivaldi"},g=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/seamonkey/i],describe:function(c){var p={name:"SeaMonkey"},g=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/sailfish/i],describe:function(c){var p={name:"Sailfish"},g=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,c);return g&&(p.version=g),p}},{test:[/silk/i],describe:function(c){var p={name:"Amazon Silk"},g=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/phantom/i],describe:function(c){var p={name:"PhantomJS"},g=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/slimerjs/i],describe:function(c){var p={name:"SlimerJS"},g=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var p={name:"BlackBerry"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var p={name:"WebOS Browser"},g=a.default.getFirstMatch(h,c)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/bada/i],describe:function(c){var p={name:"Bada"},g=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/tizen/i],describe:function(c){var p={name:"Tizen"},g=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/qupzilla/i],describe:function(c){var p={name:"QupZilla"},g=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/firefox|iceweasel|fxios/i],describe:function(c){var p={name:"Firefox"},g=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/electron/i],describe:function(c){var p={name:"Electron"},g=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/MiuiBrowser/i],describe:function(c){var p={name:"Miui"},g=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/chromium/i],describe:function(c){var p={name:"Chromium"},g=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,c)||a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/chrome|crios|crmo/i],describe:function(c){var p={name:"Chrome"},g=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/GSA/i],describe:function(c){var p={name:"Google Search"},g=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:function(c){var p=!c.test(/like android/i),g=c.test(/android/i);return p&&g},describe:function(c){var p={name:"Android Browser"},g=a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/playstation 4/i],describe:function(c){var p={name:"PlayStation 4"},g=a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/safari|applewebkit/i],describe:function(c){var p={name:"Safari"},g=a.default.getFirstMatch(h,c);return g&&(p.version=g),p}},{test:[/.*/i],describe:function(c){var p=c.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(p,c),version:a.default.getSecondMatch(p,c)}}}];s.default=v,u.exports=s.default},93:function(u,s,i){"use strict";s.__esModule=!0,s.default=void 0;var o,a=(o=i(17))&&o.__esModule?o:{default:o},h=i(18),v=[{test:[/Roku\/DVP/],describe:function(c){var p=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,c);return{name:h.OS_MAP.Roku,version:p}}},{test:[/windows phone/i],describe:function(c){var p=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,c);return{name:h.OS_MAP.WindowsPhone,version:p}}},{test:[/windows /i],describe:function(c){var p=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,c),g=a.default.getWindowsVersionName(p);return{name:h.OS_MAP.Windows,version:p,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(c){var p={name:h.OS_MAP.iOS},g=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,c);return g&&(p.version=g),p}},{test:[/macintosh/i],describe:function(c){var p=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,c).replace(/[_\s]/g,"."),g=a.default.getMacOSVersionName(p),_={name:h.OS_MAP.MacOS,version:p};return g&&(_.versionName=g),_}},{test:[/(ipod|iphone|ipad)/i],describe:function(c){var p=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,c).replace(/[_\s]/g,".");return{name:h.OS_MAP.iOS,version:p}}},{test:function(c){var p=!c.test(/like android/i),g=c.test(/android/i);return p&&g},describe:function(c){var p=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,c),g=a.default.getAndroidVersionName(p),_={name:h.OS_MAP.Android,version:p};return g&&(_.versionName=g),_}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var p=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,c),g={name:h.OS_MAP.WebOS};return p&&p.length&&(g.version=p),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var p=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,c)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,c)||a.default.getFirstMatch(/\bbb(\d+)/i,c);return{name:h.OS_MAP.BlackBerry,version:p}}},{test:[/bada/i],describe:function(c){var p=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,c);return{name:h.OS_MAP.Bada,version:p}}},{test:[/tizen/i],describe:function(c){var p=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,c);return{name:h.OS_MAP.Tizen,version:p}}},{test:[/linux/i],describe:function(){return{name:h.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:h.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(c){var p=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,c);return{name:h.OS_MAP.PlayStation4,version:p}}}];s.default=v,u.exports=s.default},94:function(u,s,i){"use strict";s.__esModule=!0,s.default=void 0;var o,a=(o=i(17))&&o.__esModule?o:{default:o},h=i(18),v=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(c){var p=a.default.getFirstMatch(/(can-l01)/i,c)&&"Nova",g={type:h.PLATFORMS_MAP.mobile,vendor:"Huawei"};return p&&(g.model=p),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet}}},{test:function(c){var p=c.test(/ipod|iphone/i),g=c.test(/like (ipod|iphone)/i);return p&&!g},describe:function(c){var p=a.default.getFirstMatch(/(ipod|iphone)/i,c);return{type:h.PLATFORMS_MAP.mobile,vendor:"Apple",model:p}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:h.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:h.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName(!0)==="blackberry"},describe:function(){return{type:h.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(c){return c.getBrowserName(!0)==="bada"},describe:function(){return{type:h.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getBrowserName()==="windows phone"},describe:function(){return{type:h.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(c){var p=Number(String(c.getOSVersion()).split(".")[0]);return c.getOSName(!0)==="android"&&p>=3},describe:function(){return{type:h.PLATFORMS_MAP.tablet}}},{test:function(c){return c.getOSName(!0)==="android"},describe:function(){return{type:h.PLATFORMS_MAP.mobile}}},{test:function(c){return c.getOSName(!0)==="macos"},describe:function(){return{type:h.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(c){return c.getOSName(!0)==="windows"},describe:function(){return{type:h.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="linux"},describe:function(){return{type:h.PLATFORMS_MAP.desktop}}},{test:function(c){return c.getOSName(!0)==="playstation 4"},describe:function(){return{type:h.PLATFORMS_MAP.tv}}},{test:function(c){return c.getOSName(!0)==="roku"},describe:function(){return{type:h.PLATFORMS_MAP.tv}}}];s.default=v,u.exports=s.default},95:function(u,s,i){"use strict";s.__esModule=!0,s.default=void 0;var o,a=(o=i(17))&&o.__esModule?o:{default:o},h=i(18),v=[{test:function(c){return c.getBrowserName(!0)==="microsoft edge"},describe:function(c){if(/\sedg\//i.test(c))return{name:h.ENGINE_MAP.Blink};var p=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,c);return{name:h.ENGINE_MAP.EdgeHTML,version:p}}},{test:[/trident/i],describe:function(c){var p={name:h.ENGINE_MAP.Trident},g=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:function(c){return c.test(/presto/i)},describe:function(c){var p={name:h.ENGINE_MAP.Presto},g=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:function(c){var p=c.test(/gecko/i),g=c.test(/like gecko/i);return p&&!g},describe:function(c){var p={name:h.ENGINE_MAP.Gecko},g=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:h.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(c){var p={name:h.ENGINE_MAP.WebKit},g=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,c);return g&&(p.version=g),p}}];s.default=v,u.exports=s.default}})})});I();I();I();I();I();var Ce=(a,h,v,...c)=>ae(void 0,[a,h,v,...c],function*(u,s,i,o={}){let p=yield fetch(u,{method:s,headers:ie({"Content-Type":"application/json"},o),body:i?JSON.stringify(i):null});if(!p.ok)throw p;try{return yield p.json()}catch(g){return p.ok}});I();var wu=Bt(Pu()),re=class{constructor(s){this.debug=(0,wu.default)(s)}log(s,...i){this.debug(s,...i)}};I();I();var ol=Bt(sl());var se=class{constructor(s={}){this.subscribe=s=>{this.callbacks.push(s)};this.unsubscribe=s=>{this.callbacks=this.callbacks.filter(i=>i!==s)};this.publish=(...s)=>{!this.callbacks||this.callbacks.forEach(i=>{this.callListener(i,s).catch(o=>{var a;(a=this.logger)==null||a.log("superviz-sdk:observer-helper:publish:error",`
            Failed to execute callback on publish value.
            Callback: ${i}
            Event: ${JSON.stringify(s)}
            Error: ${o}
          `)})})};this.reset=()=>{this.callbacks=[]};this.destroy=()=>{delete this.logger,delete this.callbacks};this.callListener=(s,i)=>new Promise((o,a)=>{try{let h=s(...i);o(h)}catch(h){a(h)}});let{logger:i,throttleTime:o}=s;this.logger=i||new re("@superviz/sdk/observer-helper"),this.throttle=o,this.callbacks=[],this.throttle&&(this.publish=(0,ol.default)(this.publish,this.throttle))}};var kn=class{constructor(){this.observers={};this.subscribe=(s,i)=>{this.logger.log(`subscribed to ${s} event`),this.observers[s]||(this.observers[s]=new se({logger:this.logger})),this.observers[s].subscribe(i)};this.unsubscribe=(s,i)=>{if(this.logger.log(`unsubscribed from ${s} event`),!!this.observers[s]){if(!i){this.observers[s].destroy(),delete this.observers[s];return}this.observers[s].unsubscribe(i)}};this.publish=(s,i)=>{s in this.observers&&this.observers[s].publish(i)}}};I();I();I();var al=Bt(mn()),Os=class{setConfig(s){this.configuration=s}get(s,i){return this.configuration?al.default.get(this.configuration,s,i):i}},z=new Os;var Re=class{static createUrl(s,i,o={}){let a=new URL(i,s);return Object.keys(o).forEach(h=>a.searchParams.append(h,o[h])),a.toString()}static validateApiKey(s,i){let o="/user/checkapikey",a=this.createUrl(s,o);return Ce(a,"POST",{apiKey:i})}static fetchConfig(s,i){let o="/immersive-config",a=this.createUrl(s,o);return Ce(a,"POST",{apiKey:i})}static fetchLimits(s,i){return ae(this,null,function*(){let o="/user/check_limits",a=this.createUrl(s,o);return(yield Ce(a,"GET","",{apikey:i})).usage})}static fetchWaterMark(s,i){return ae(this,null,function*(){let o="/user/watermark",a=this.createUrl(s,o),{message:h}=yield Ce(a,"POST",{apiKey:i});return h})}static createAnnotations(s,i,o){return ae(this,null,function*(){let a="/annotations",h=this.createUrl(s,a);return Ce(h,"POST",ie({},o),{apikey:i})})}static updateComment(s,i,o,a){return ae(this,null,function*(){let h=`/comments/${o}`,v=this.createUrl(s,h);return Ce(v,"PUT",{text:a},{apikey:i})})}static createComment(s,i,o){return ae(this,null,function*(){let a="/comments",h=this.createUrl(s,a);return Ce(h,"POST",ie({},o),{apikey:i})})}static fetchAnnotation(s,i,o){return ae(this,null,function*(){let a="/annotations",h=this.createUrl(s,a,{roomId:o.roomId,url:o.url});return Ce(h,"GET",void 0,{apikey:i})})}static resolveAnnotation(s,i,o){return ae(this,null,function*(){let a=`/annotations/resolve/${o}`,h=this.createUrl(s,a);return Ce(h,"POST",{},{apikey:i})})}static deleteComment(s,i,o){return ae(this,null,function*(){let a=`/comments/${o}`,h=this.createUrl(s,a);return Ce(h,"DELETE",{},{apikey:i})})}static deleteAnnotation(s,i,o){return ae(this,null,function*(){let a=`/annotations/${o}`,h=this.createUrl(s,a);return Ce(h,"DELETE",{},{apikey:i})})}static createOrUpdateParticipant(s){return ae(this,null,function*(){let i=z.get("apiUrl"),o="/participants",a=this.createUrl(i,o);return Ce(a,"POST",ie({},s),{apikey:z.get("apiKey")})})}static sendActivity(s,i,o,a){return ae(this,null,function*(){let h="/activity",v=z.get("apiUrl"),c=z.get("roomId"),p=z.get("apiKey"),g=this.createUrl(v,h);return Ce(g,"POST",{groupId:i,groupName:o,meetingId:c,product:a,userId:s},{apikey:p})})}static fetchParticipantsByGroup(s){return ae(this,null,function*(){let i=`/groups/participants/${s}`,o=z.get("apiUrl"),a=this.createUrl(o,i,{take:1e4});return Ce(a,"GET",void 0,{apikey:z.get("apiKey")})})}static createMentions(s){return ae(this,null,function*(){let i="/mentions",o=z.get("apiUrl"),a=this.createUrl(o,i);return Ce(a,"POST",s,{apikey:z.get("apiKey")})})}};I();var Ge=class extends kn{constructor(){super(...arguments);this.isAttached=!1;this.attach=i=>{if(Object.values(i).includes(null)||Object.values(i).includes(void 0)){let p=`${this.name} @ attach - params are required`;throw this.logger.log(p),new Error(p)}let{realtime:o,localParticipant:a,group:h,config:v,eventBus:c}=i;if(!o.isDomainWhitelisted){let p=`Component ${this.name} can't be used because this website's domain is not whitelisted. Please add your domain in https://dashboard.superviz.com/developer`;this.logger.log(p);return}if(z.setConfig(v),this.realtime=o,this.localParticipant=a,this.group=h,this.eventBus=c,this.isAttached=!0,!this.realtime.isJoinedRoom){this.logger.log(`${this.name} @ attach - not joined yet`),setTimeout(()=>{this.logger.log(`${this.name} @ attach - retrying`),this.attach(i)},1e3);return}this.logger.log(`${this.name} @ attached`),this.start(),this.publish("mount")};this.detach=()=>{if(!this.isAttached){this.logger.log(`${this.name} @ detach - component is not attached`);return}this.logger.log("detached"),this.publish("unmount"),this.destroy(),Object.values(this.observers).forEach(i=>{i.reset(),i.destroy()}),this.observers=void 0,this.realtime=void 0,this.localParticipant=void 0,this.isAttached=!1}}};I();I();var Vi=(i=>(i.LEFT="left",i.RIGHT="right",i))(Vi||{}),Is=(a=>(a.TOP_LEFT="top-left",a.TOP_RIGHT="top-right",a.BOTTOM_LEFT="bottom-left",a.BOTTOM_RIGHT="bottom-right",a))(Is||{});var Ms=class extends Ge{constructor(i,o){var a,h,v;super();this.sidebarOpen=!1;this.layoutOptions={};this.openThreads=()=>{var i;this.sidebarOpen||((i=this.element)==null||i.setAttribute("open",""),this.sidebarOpen=!0,document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0})))};this.closeThreads=()=>{var i;!this.sidebarOpen||((i=this.element)==null||i.removeAttribute("open"),this.sidebarOpen=!1,document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0})))};this.togglePinActive=()=>{if(this.pinActive){this.disable();return}this.enable()};this.onPinFixed=i=>{this.coordinates=i};this.toggleAnnotationSidebar=()=>{this.element.toggleAttribute("open"),this.sidebarOpen=this.element.hasAttribute("open"),document.body.dispatchEvent(new CustomEvent("prepare-to-create-annotation",{detail:void 0,composed:!0,bubbles:!0})),document.body.dispatchEvent(new CustomEvent("toggle-annotation-sidebar",{detail:{open:this.sidebarOpen},composed:!0,bubbles:!0}))};this.onSelectAnnotation=i=>{this.sidebarOpen||this.toggleAnnotationSidebar()};this.positionFloatingButton=()=>{var p,g;this.button=document.createElement("superviz-comments-button");let i=(p=this.layoutOptions)==null?void 0:p.buttonLocation,o=(g=this.layoutOptions)==null?void 0:g.position;if(!i){document.body.appendChild(this.button),this.button.commentsPosition=o;return}let a="",h=Object.values(Is),v=!1,c=!h.includes(i.toLocaleLowerCase());if(c){let _=window.document.body.querySelector(`#${i}`);_?(_.appendChild(this.button),a="position: relative"):(v=!0,i="top-left")}if(!c||v){document.body.appendChild(this.button);let[_,y]=i.split("-");a=`${_}: 20px; ${y}: 20px;`}this.button.positionStyles=a,this.button.commentsPosition=o};this.positionComments=()=>{var a;this.element=document.createElement("superviz-comments"),this.element.setAttribute("comments",JSON.stringify([])),this.element.side="left",this.element.offset=this.offset,document.body.appendChild(this.element);let i=(a=this.layoutOptions)==null?void 0:a.position;if(!i)return;let o=i.toUpperCase();!Vi[o]||(this.element.side=Vi[o])};this.createAnnotation=o=>ae(this,[o],function*({detail:i}){try{let{text:a,mentions:h}=i,{url:v}=this,c=ie({},this.coordinates),p=yield Re.createAnnotations(z.get("apiUrl"),z.get("apiKey"),{roomId:z.get("roomId"),position:JSON.stringify(c),url:v,userId:this.localParticipant.id}),g=yield this.createComment(p.uuid,a,h);this.addAnnotation(We(ie({},p),{comments:[g]})),this.pinAdapter.removeAnnotationPin("temporary-pin"),document.body.dispatchEvent(new CustomEvent("select-annotation",{detail:{uuid:p.uuid,haltGoToPin:!0,newPin:!0},composed:!0,bubbles:!0}))}catch(a){this.logger.log("error when creating annotation",a)}});this.deleteAnnotation=o=>ae(this,[o],function*({detail:i}){try{let{uuid:a}=i;yield Re.deleteAnnotation(z.get("apiUrl"),z.get("apiKey"),a);let h=this.annotations.filter(v=>v.uuid!==a);this.updateAnnotationList(h),this.pinAdapter.removeAnnotationPin(a),this.element.updateAnnotations(this.annotations)}catch(a){this.logger.log("error when deleting annotation",a)}});this.updateComment=o=>ae(this,[o],function*({detail:i}){try{let{uuid:a,text:h,mentions:v}=i,c=yield Re.updateComment(z.get("apiUrl"),z.get("apiKey"),a,h);yield Re.createMentions({commentsId:c.uuid,participants:v.map(g=>({id:g.userId}))});let p=this.annotations.map(g=>Object.assign({},g,{comments:g.comments.map(_=>_.uuid===a?Object.assign({},_,{text:h,mentions:v}):_)}));this.updateAnnotationList(p)}catch(a){this.logger.log("error when updating comment",a)}});this.resolveAnnotation=o=>ae(this,[o],function*({detail:i}){try{let{uuid:a}=i,{resolved:h}=yield Re.resolveAnnotation(z.get("apiUrl"),z.get("apiKey"),a),v=this.annotations.map(c=>c.uuid===a?Object.assign({},c,{resolved:h}):c);if(this.updateAnnotationList(v),h){this.pinAdapter.removeAnnotationPin(a);return}this.pinAdapter.updateAnnotations(this.annotations)}catch(a){this.logger.log("error when resolve annotation",a)}});this.deleteComment=o=>ae(this,[o],function*({detail:i}){try{let{uuid:a,annotationId:h}=i;if(!a||!h)return;yield Re.deleteComment(z.get("apiUrl"),z.get("apiKey"),a);let v=this.annotations.find(p=>p.uuid===h);v.comments=v.comments.filter(p=>p.uuid!==a);let c=this.annotations.map(p=>p.uuid===h?v:p);this.element.updateAnnotations(c),this.updateAnnotationList(c)}catch(a){this.logger.log("error when deleting comment",a)}});this.onAnnotationListUpdate=i=>{let{data:o,clientId:a}=i;this.localParticipant.id!==a&&(this.annotations=o,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations))};this.name="comments",this.logger=new re("@superviz/sdk/comments-component"),this.annotations=[],this.layoutOptions={buttonLocation:(a=o==null?void 0:o.buttonLocation)!=null?a:"top-left",position:(h=o==null?void 0:o.position)!=null?h:"left"},this.hideDefaultButton=(v=o==null?void 0:o.hideDefaultButton)!=null?v:!1,this.setStyles(o==null?void 0:o.styles),this.offset=o==null?void 0:o.offset,setTimeout(()=>{var c,p,g,_,y;i.setCommentsMetadata((p=(c=this.layoutOptions)==null?void 0:c.position)!=null?p:"left",(_=(g=this.localParticipant)==null?void 0:g.avatar)==null?void 0:_.imageUrl,(y=this.localParticipant)==null?void 0:y.name)}),this.pinAdapter=i}enable(){this.pinAdapter.setActive(!0),this.pinActive=!0,this.publish("pin-mode.active"),document.body.dispatchEvent(new CustomEvent("toggle-pin-active",{detail:{isActive:!0}}))}disable(){this.pinAdapter.setActive(!1),this.pinActive=!1,this.publish("pin-mode.inactive"),document.body.dispatchEvent(new CustomEvent("toggle-pin-active",{detail:{isActive:!1}}))}get url(){let i=new URL(this.clientUrl);return i.search="",i.toString()}start(){this.clientUrl=window.location.href,this.positionComments(),this.hideDefaultButton||this.positionFloatingButton(),this.fetchAnnotations(),this.waterMarkState(),this.participantsList(),this.addListeners(),this.pinAdapter.setPinsVisibility(!0)}destroy(){var i;this.logger.log("comments component @ destroy"),this.destroyListeners(),(i=this.button)==null||i.remove(),this.element.remove(),this.element=void 0,this.pinAdapter.destroy()}addListeners(){var i;(i=this.button)==null||i.addEventListener("toggle",this.togglePinActive),this.element.addEventListener("close-threads",this.closeThreads),document.body.addEventListener("create-annotation",this.createAnnotation),this.element.addEventListener("resolve-annotation",this.resolveAnnotation),this.element.addEventListener("delete-annotation",this.deleteAnnotation),this.element.addEventListener("create-comment",({detail:o})=>{this.createComment(o.uuid,o.text,o.mentions,!0)}),this.element.addEventListener("update-comment",this.updateComment),this.element.addEventListener("delete-comment",this.deleteComment),document.body.addEventListener("select-annotation",this.onSelectAnnotation),this.realtime.commentsObserver.subscribe(this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.subscribe(this.onPinFixed)}destroyListeners(){var i;(i=this.button)==null||i.removeEventListener("toggle",this.togglePinActive),this.element.removeEventListener("close-threads",this.closeThreads),this.element.removeEventListener("resolve-annotation",this.resolveAnnotation),this.element.removeEventListener("create-comment",({detail:o})=>{this.createComment(o.uuid,o.text,o.mentions,!0)}),this.element.removeEventListener("update-comment",this.updateComment),this.element.removeEventListener("delete-comment",this.deleteComment),document.body.removeEventListener("select-annotation",this.onSelectAnnotation),document.body.removeEventListener("create-annotation",this.createAnnotation),this.realtime.commentsObserver.unsubscribe(this.onAnnotationListUpdate),this.pinAdapter.onPinFixedObserver.unsubscribe(this.onPinFixed)}setStyles(i=""){if(!i)return;let o=document.createElement("style");o.textContent=i,o.id="superviz-comments-styles",document.head.appendChild(o)}createComment(v,c){return ae(this,arguments,function*(i,o,a=[],h=!1){try{let p=yield Re.createComment(z.get("apiUrl"),z.get("apiKey"),{annotationId:i,userId:this.localParticipant.id,text:o});return yield Re.createMentions({commentsId:p.uuid,participants:a.map(g=>({id:g.userId,readed:0}))}),p.mentions=a,h&&this.addComment(i,p),p}catch(p){this.logger.log("error when creating comment",p)}})}addAnnotation(i){let o=[i,...this.annotations];this.element.updateAnnotations(o),this.pinAdapter.updateAnnotations(o),this.updateAnnotationList(o)}updateAnnotationList(i){this.annotations=i,this.realtime.updateComments(i)}addComment(i,o){let a=this.annotations.find(v=>v.uuid===i);a.comments.push(o);let h=this.annotations.map(v=>v.uuid===i?a:v);this.updateAnnotationList(h),this.element.updateAnnotations(h)}fetchAnnotations(){return ae(this,null,function*(){try{let i=yield Re.fetchAnnotation(z.get("apiUrl"),z.get("apiKey"),{roomId:z.get("roomId"),url:this.url});this.annotations=i,this.element.updateAnnotations(this.annotations),this.pinAdapter.updateAnnotations(this.annotations)}catch(i){this.logger.log("error when fetching annotations",i)}})}waterMarkState(){return ae(this,null,function*(){try{let i=yield Re.fetchWaterMark(z.get("apiUrl"),z.get("apiKey"));this.element.waterMarkStatus(i)}catch(i){this.logger.log("error when fetching waterMark",i)}})}participantsList(){return ae(this,null,function*(){try{let o=(yield Re.fetchParticipantsByGroup(this.group.id)).data;this.pinAdapter.participantsList=o,this.element.participantsList=o}catch(i){this.logger.log("error when fetching participantsList",i)}})}};I();I();var Ls=class{constructor(s,i){this.isPinsVisible=!0;this.selectedPin=null;this.temporaryPinCoordinates=null;this.commentsSide="left";this.localParticipant={};this.setCommentsMetadata=(s,i,o)=>{this.commentsSide=s,this.localParticipant.avatar=i,this.localParticipant.name=o};this.resetPins=s=>{s&&(s==null?void 0:s.key)!=="Escape"||(this.resetSelectedPin(),this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};this.animate=()=>{(this.isActive||this.isPinsVisible)&&(this.renderAnnotationsPins(),this.divWrapper=this.renderDivWrapper()),this.temporaryPinCoordinates&&this.renderTemporaryPin(),requestAnimationFrame(this.animate)};this.setMouseDownCoordinates=({x:s,y:i})=>{this.mouseDownCoordinates={x:s,y:i}};this.annotationSelected=({detail:{uuid:s,haltGoToPin:i,newPin:o}})=>{var v,c;if(!s)return;o&&this.pins.get(s).setAttribute("newPin","");let a=JSON.parse((c=(v=this.selectedPin)==null?void 0:v.getAttribute("annotation"))!=null?c:"{}");if(this.resetPins(),(a==null?void 0:a.uuid)===s)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let h=this.pins.get(s);!h||(h.setAttribute("active",""),this.selectedPin=h,!i&&this.goToPin(s))};this.onClick=s=>{if(!this.isActive)return;let i=this.canvas.getBoundingClientRect(),{x:o,y:a}=this.mouseDownCoordinates,h=o-i.x,v=a-i.y,c=s.clientX-i.left,p=s.clientY-i.top;if(Math.hypot(c-h,p-v)>10)return;let P=this.canvas.getContext("2d").getTransform().inverse(),M=new DOMPoint(c,p-31).matrixTransform(P);this.onPinFixedObserver.publish({x:M.x,y:M.y,type:"canvas"}),this.resetSelectedPin(),this.temporaryPinCoordinates={x:M.x,y:M.y},this.renderTemporaryPin();let S=document.getElementById("superviz-temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,S.setAttribute("movedPosition",String(this.movedTemporaryPin)),!this.selectedPin&&document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onToggleAnnotationSidebar=({detail:s})=>{let{open:i}=s;i||(this.pins.forEach(o=>{o.removeAttribute("active")}),this.pins.has("temporary-pin")&&this.removeAnnotationPin("temporary-pin"))};this.hideTemporaryPin=s=>{var y;let i=s.target,o=i.contains(this.canvas),{x:a,y:h}=s,{left:v,top:c,right:p,bottom:g}=this.canvas.getBoundingClientRect(),_=a>v&&a<p&&h>c&&h<g;this.canvas.contains(i)||((y=this.pins.get("temporary-pin"))==null?void 0:y.contains(i))||o&&_||(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates=null)};if(this.logger=new re("@superviz/sdk/comments-component/canvas-pin-adapter"),this.canvas=document.getElementById(s),this.isActive=!1,this.pins=new Map,this.goToPinCallback=i==null?void 0:i.onGoToPin,!this.canvas){let o=`Canvas with id ${s} not found`;throw this.logger.log(o),new Error(o)}this.canvasSides=this.canvas.getBoundingClientRect(),document.body.style.position="relative",this.onPinFixedObserver=new se({logger:this.logger}),this.divWrapper=this.renderDivWrapper(),this.annotations=[],this.renderAnnotationsPins(),this.animateFrame=requestAnimationFrame(this.animate),document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("keyup",this.resetPins)}destroy(){this.removeListeners(),this.removeAnnotationsPins(),this.pins=new Map,this.divWrapper.remove(),this.onPinFixedObserver.destroy(),this.onPinFixedObserver=null,this.canvas.style.cursor="default",this.annotations=[],cancelAnimationFrame(this.animateFrame),document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("keyup",this.resetPins)}setPinsVisibility(s){if(this.isPinsVisible=s,this.isPinsVisible){this.renderAnnotationsPins();return}this.removeAnnotationsPins()}setActive(s){if(this.isActive!==s){if(this.isActive=s,this.isActive){this.originalCanvasCursor=this.canvas.style.cursor,this.canvas.style.cursor='url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer',this.addListeners();return}this.resetPins(),this.removeListeners(),this.canvas.style.cursor=this.originalCanvasCursor}}updateAnnotations(s){this.logger.log("updateAnnotations",s),this.annotations=s,!(!this.isActive&&!this.isPinsVisible)&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}removeAnnotationPin(s){let i=this.pins.get(s);!i||(i.remove(),this.pins.delete(s),s!=="temporary-pin"&&(this.annotations=this.annotations.filter(o=>o.uuid!==s)))}renderTemporaryPin(){var P,M;let s=document.getElementById("superviz-temporary-pin");s||(s=document.createElement("superviz-comments-annotation-pin"),s.id="superviz-temporary-pin",s.setAttribute("type","add"),s.setAttribute("showInput",""),s.setAttribute("containerSides",JSON.stringify(this.canvasSides)),s.setAttribute("commentsSide",this.commentsSide),s.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),s.setAttribute("annotation",JSON.stringify({})),s.setAttribute("localAvatar",(P=this.localParticipant.avatar)!=null?P:""),s.setAttribute("participantsList",JSON.stringify(this.participants)),s.setAttribute("localName",(M=this.localParticipant.name)!=null?M:""),s.setAttributeNode(document.createAttribute("active")),this.divWrapper.appendChild(s));let{x:i,y:o}=this.temporaryPinCoordinates,h=this.canvas.getContext("2d").getTransform(),v=h.e,c=h.f,p=h.a,g=h.d,_=i*p+v,y=o*g+c;s.setAttribute("position",JSON.stringify({x:_,y})),this.pins.set("temporary-pin",s)}addListeners(){this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.setMouseDownCoordinates),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}removeListeners(){this.canvas.removeEventListener("click",this.onClick),this.canvas.removeEventListener("mousedown",this.setMouseDownCoordinates),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}resetSelectedPin(){!this.selectedPin||(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}renderDivWrapper(){let s=this.canvas.getBoundingClientRect(),i=this.divWrapper;return i||(i=document.createElement("div"),i.id="superviz-canvas-wrapper",["","static"].includes(this.canvas.parentElement.style.position)&&(this.canvas.parentElement.style.position="relative")),i.style.position="absolute",i.style.top=`${this.canvas.offsetTop}px`,i.style.left=`${this.canvas.offsetLeft}px`,i.style.width=`${s.width}px`,i.style.height=`${s.height}px`,i.style.pointerEvents="none",i.style.overflow="hidden",document.getElementById("superviz-canvas-wrapper")||this.canvas.parentElement.appendChild(i),i}renderAnnotationsPins(){if((!this.annotations.length||this.canvas.style.display==="none")&&!this.pins.get("temporary-pin")){this.removeAnnotationsPins();return}this.annotations.forEach(s=>{if(s.resolved)return;let i=JSON.parse(s.position);if((i==null?void 0:i.type)!=="canvas")return;let{x:o,y:a}=i,v=this.canvas.getContext("2d").getTransform(),c=v.e,p=v.f,g=v.a,_=v.d,y=o*g+c,P=a*_+p;if(this.pins.has(s.uuid)){let S=this.pins.get(s.uuid);if(this.divWrapper.clientWidth>y&&this.divWrapper.clientHeight>P){S.setAttribute("style","opacity: 1"),this.pins.get(s.uuid).setAttribute("position",JSON.stringify({x:y,y:P}));return}S.setAttribute("style","opacity: 0");return}let M=document.createElement("superviz-comments-annotation-pin");M.setAttribute("type","show"),M.setAttribute("participantsList",JSON.stringify(this.participants)),M.setAttribute("annotation",JSON.stringify(s)),M.setAttribute("position",JSON.stringify({x:y,y:P})),M.id=s.uuid,this.divWrapper.appendChild(M),this.pins.set(s.uuid,M)})}removeAnnotationsPins(){this.pins.forEach(s=>{s.remove()}),this.pins.clear()}set participantsList(s){this.participants=s}goToPin(s){let i=this.annotations.find(M=>M.uuid===s);if(!i)return;let o=JSON.parse(i.position);if((o==null?void 0:o.type)!=="canvas")return;let a=this.canvas.getBoundingClientRect(),{width:h,height:v}=a,{x:c,y:p}=o,g=h/2,_=v/2,y=g-c,P=_-p;this.goToPinCallback&&this.goToPinCallback({x:y,y:P})}};I();var ul=Bt(mn());var Ss=class{constructor(s,i={}){this.localParticipant={};this.isPinsVisible=!0;this.selectedPin=null;this.dataAttribute="data-superviz-id";this.commentsSide="left";this.temporaryPinCoordinates={};this.elementsWithDataId={};this.divWrappers=new Map;this.voidElementsWrappers=new Map;this.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","svg","rect","ellipse"];this.animate=()=>{this.voidElementsWrappers&&(this.updatePinsPositions(),this.animateFrame=requestAnimationFrame(this.animate))};this.setCommentsMetadata=(s,i,o)=>{this.commentsSide=s,this.localParticipant.avatar=i,this.localParticipant.name=o};this.hideTemporaryPin=s=>{var v;let i=s.target,o=this.divWrappers.get(this.temporaryPinCoordinates.elementId);if(!o)return;let a=o.contains(i),h=(v=this.pins.get("temporary-pin"))==null?void 0:v.contains(i);a||h||(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={})};this.resetPins=s=>{s&&(s==null?void 0:s.key)!=="Escape"||(this.resetSelectedPin(),this.resetHoveredWrapper(),this.temporaryPinCoordinates.elementId&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates={}))};this.annotationSelected=({detail:{uuid:s,newPin:i}})=>{if(!s)return;i&&this.pins.get(s).setAttribute("newPin","");let o=this.annotations.find(v=>{var c;return v.uuid===((c=this.selectedPin)==null?void 0:c.id)});if(this.resetPins(),(o==null?void 0:o.uuid)===s)return;document.body.dispatchEvent(new CustomEvent("close-temporary-annotation"));let a=this.pins.get(s);if(!a)return;a.setAttribute("active",""),this.selectedPin=a;let h=this.annotations.find(v=>v.uuid===s);this.selectedPin.setAttribute("elementId",JSON.parse(h.position).elementId)};this.onClick=s=>{if(!this.isActive||s.target===this.pins.get("temporary-pin"))return;let i=s.target,o=s.currentTarget;if(i!==o&&this.pins.has(i.id))return;let a=o.getAttribute("data-wrapper-id"),h=o.getBoundingClientRect(),{x:v,y:c}=this.mouseDownCoordinates,p=s.clientX-h.left,g=s.clientY-h.top,_=v-h.x,y=c-h.y;if(Math.hypot(p-_,g-y)>10)return;let{width:M,height:S}=o.getBoundingClientRect(),F=32,U=o.getBoundingClientRect().width/o.offsetWidth||1;p=p*100/M,g=(g-F*U)*100/S,this.onPinFixedObserver.publish({x:p,y:g,type:"html",elementId:a}),this.resetSelectedPin(),this.temporaryPinCoordinates=We(ie({},this.temporaryPinCoordinates),{x:p,y:g}),this.renderTemporaryPin(a);let D=this.pins.get("temporary-pin");this.movedTemporaryPin=!this.movedTemporaryPin,D.setAttribute("movedPosition",String(this.movedTemporaryPin)),document.body.dispatchEvent(new CustomEvent("unselect-annotation"))};this.onMouseDown=({x:s,y:i})=>{this.mouseDownCoordinates={x:s,y:i}};this.handleMutationObserverChanges=s=>{s.forEach(i=>{var g;let{target:o,oldValue:a}=i,h=o.getAttribute(this.dataAttribute);if(!h&&!a||h===a)return;let v=this.dataAttributeValueFilters.some(_=>a.match(_));if(!h&&a&&!v){this.removeAnnotationPin("temporary-pin"),this.clearElement(a),((g=this.selectedPin)==null?void 0:g.getAttribute("elementId"))===a&&(document.body.dispatchEvent(new CustomEvent("unselect-annotation")),this.selectedPin=null);return}let p=this.dataAttributeValueFilters.some(_=>h.match(_));(a&&this.elementsWithDataId[a]||p)&&this.clearElement(a),!p&&(this.setElementReadyToPin(o,h),this.renderAnnotationsPins())})};this.onToggleAnnotationSidebar=({detail:s})=>{let{open:i}=s;i||(this.resetSelectedPin(),this.pins.has("temporary-pin")&&(this.removeAnnotationPin("temporary-pin"),this.temporaryPinCoordinates.elementId=void 0))};this.onMouseEnter=s=>{var h;let i=s.target;if(this.hoveredWrapper=i,!((h=i.getAttribute("data-wrapper-type"))==null?void 0:h.includes("ellipse"))){this.hoveredWrapper.style.setProperty("outline","1px solid rgb(var(--sv-primary))");return}let a=i.querySelector("ellipse");a.setAttribute("stroke","rgb(var(--sv-primary))"),a.setAttribute("stroke-width","1")};this.onMouseLeave=s=>{var h;let i=s.target;if(this.hoveredWrapper=i,!((h=i.getAttribute("data-wrapper-type"))==null?void 0:h.includes("ellipse"))){this.hoveredWrapper.style.setProperty("outline","");return}let a=i.querySelector("ellipse");a.removeAttribute("stroke"),a.removeAttribute("stroke-width")};if(this.logger=new re("@superviz/sdk/comments-component/container-pin-adapter"),this.container=document.getElementById(s),!this.container){let h=`Element with id ${s} not found`;throw this.logger.log(h),new Error(h)}if(typeof i!="object")throw new Error("Second argument of the HTMLPin constructor must be an object");let{dataAttributeName:o,dataAttributeValueFilters:a}=i;if(o==="")throw new Error("dataAttributeName must be a non-empty string");if(o===null)throw new Error("dataAttributeName cannot be null");if(o!==void 0&&typeof o!="string")throw new Error("dataAttributeName must be a non-empty string");this.dataAttribute=o||this.dataAttribute,this.dataAttributeValueFilters=a||[],this.isActive=!1,this.prepareElements(),this.mutationObserver=new MutationObserver(this.handleMutationObserverChanges),this.observeContainer(),this.pins=new Map,this.onPinFixedObserver=new se({logger:this.logger}),this.annotations=[],document.body.addEventListener("select-annotation",this.annotationSelected),document.body.addEventListener("keyup",this.resetPins),this.voidElementsWrappers.size&&(this.animateFrame=requestAnimationFrame(this.animate))}destroy(){var s;this.logger.log("Destroying HTML Pin Adapter for Comments"),this.removeListeners(),this.removeObservers(),this.divWrappers.forEach(i=>i.remove()),this.divWrappers.clear(),this.pins.forEach(i=>i.remove()),this.pins.clear(),this.divWrappers=void 0,this.pins=void 0,this.elementsWithDataId=void 0,this.logger=void 0,this.onPinFixedObserver.destroy(),this.onPinFixedObserver=void 0,this.container=void 0,this.voidElementsWrappers.clear(),this.voidElementsWrappers=void 0,this.annotations=[],(s=this.svgWrappers)==null||s.remove(),this.svgWrappers=void 0,document.body.removeEventListener("select-annotation",this.annotationSelected),document.body.removeEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),cancelAnimationFrame(this.animateFrame)}addElementListeners(s){this.divWrappers.get(s).addEventListener("click",this.onClick,!0),this.divWrappers.get(s).addEventListener("mousedown",this.onMouseDown),this.divWrappers.get(s).addEventListener("mouseenter",this.onMouseEnter),this.divWrappers.get(s).addEventListener("mouseleave",this.onMouseLeave)}removeElementListeners(s){this.divWrappers.get(s).removeEventListener("click",this.onClick,!0),this.divWrappers.get(s).removeEventListener("mousedown",this.onMouseDown),this.divWrappers.get(s).removeEventListener("mouseenter",this.onMouseEnter),this.divWrappers.get(s).removeEventListener("mouseleave",this.onMouseLeave)}set participantsList(s){this.participants=s}removeObservers(){this.mutationObserver.disconnect(),this.mutationObserver=void 0}addListeners(){this.divWrappers.forEach((s,i)=>this.addElementListeners(i)),document.body.addEventListener("toggle-annotation-sidebar",this.onToggleAnnotationSidebar),document.body.addEventListener("click",this.hideTemporaryPin)}removeListeners(){this.divWrappers.forEach((s,i)=>this.removeElementListeners(i)),document.body.removeEventListener("keyup",this.resetPins),document.body.removeEventListener("click",this.hideTemporaryPin)}observeContainer(){this.mutationObserver.observe(this.container,{subtree:!0,attributes:!0,attributeFilter:[this.dataAttribute],attributeOldValue:!0})}prepareElements(){this.container.querySelectorAll(`[${this.dataAttribute}]`).forEach(i=>{let o=i.getAttribute(this.dataAttribute);this.dataAttributeValueFilters.some(h=>o.match(h))||this.setElementReadyToPin(i,o)})}addAllCursors(){this.divWrappers.forEach((s,i)=>{this.addCursor(s,i)})}removeAddCursor(){this.divWrappers.forEach((s,i)=>{let o=s,a=s.getAttribute("data-wrapper-type");if(a){let h=a.split("-")[1];o=this.divWrappers.get(i).querySelector(h)}o.style.setProperty("cursor","default"),o.style.setProperty("pointer-events","none")})}setPinsVisibility(s){this.isPinsVisible=s,this.isPinsVisible&&this.renderAnnotationsPins(),this.removeAnnotationsPins()}removeAnnotationPin(s){let i=this.pins.get(s);!i&&s==="temporary-pin"||(i&&(i.remove(),this.pins.delete(s)),s!=="temporary-pin"&&(this.annotations=this.annotations.filter(o=>o.uuid!==s)))}updateAnnotations(s){this.logger.log("updateAnnotations",s),this.annotations=s,this.isPinsVisible&&(this.removeAnnotationsPins(),this.renderAnnotationsPins())}setActive(s){if(this.isActive!==s){if(this.isActive=s,this.isActive){this.addListeners(),this.addAllCursors(),this.prepareElements();return}this.resetPins(),this.removeListeners(),this.removeAddCursor()}}renderTemporaryPin(s){var h,v,c,p;(h=this.temporaryPinCoordinates).elementId||(h.elementId=s);let i=this.pins.get("temporary-pin");if(s&&s!==this.temporaryPinCoordinates.elementId&&(this.pins.get("temporary-pin").remove(),this.pins.delete("temporary-pin"),this.temporaryPinCoordinates.elementId=s,i=null),!i){let g=(v=this.elementsWithDataId[s])==null?void 0:v.getBoundingClientRect();i=document.createElement("superviz-comments-annotation-pin"),i.id="superviz-temporary-pin",i.setAttribute("type","add"),i.setAttribute("showInput",""),i.setAttribute("containerSides",JSON.stringify(g)),i.setAttribute("commentsSide",this.commentsSide),i.setAttribute("position",JSON.stringify(this.temporaryPinCoordinates)),i.setAttribute("annotation",JSON.stringify({})),i.setAttribute("localAvatar",(c=this.localParticipant.avatar)!=null?c:""),i.setAttribute("localName",(p=this.localParticipant.name)!=null?p:""),i.setAttribute("participantsList",JSON.stringify(this.participants)),i.setAttribute("keepPositionRatio",""),i.setAttributeNode(document.createAttribute("active")),this.addTemporaryPinToElement(s,i)}let{x:o,y:a}=this.temporaryPinCoordinates;i.setAttribute("position",JSON.stringify({x:o,y:a})),this.pins.set("temporary-pin",i)}renderAnnotationsPins(){if(!this.annotations.length){this.removeAnnotationsPins();return}this.annotations.forEach(s=>{if(s.resolved)return;let{x:i,y:o,elementId:a,type:h}=JSON.parse(s.position);if(h!=="html"||this.pins.has(s.uuid)||!this.elementsWithDataId[a])return;let c=this.divWrappers.get(a);if(!c)return;let p=this.createPin(s,i,o);c.appendChild(p),this.pins.set(s.uuid,p)})}updatePinsPositions(){this.voidElementsWrappers.forEach((s,i)=>{let o=JSON.stringify(s.getBoundingClientRect()),a=this.elementsWithDataId[i].getBoundingClientRect();this.elementsWithDataId[i].tagName.toLowerCase()==="ellipse"&&(a=this.elementsWithDataId[i].viewportElement.getBoundingClientRect()),!(0,ul.isEqual)(JSON.stringify(a),o)&&(s.style.setProperty("top",`${a.top}px`),s.style.setProperty("left",`${a.left}px`),s.style.setProperty("width",`${a.width}px`),s.style.setProperty("height",`${a.height}px`))})}clearElement(s){if(!this.elementsWithDataId[s])return;let o=this.divWrappers.get(s);if(o){let a=o.children,{length:h}=a;for(let v=0;v<h;++v){let c=a.item(v);this.pins.delete(c.id)}o.remove()}this.voidElementsWrappers.delete(s),this.removeElementListeners(s),this.divWrappers.delete(s),this.elementsWithDataId[s]=void 0,this.voidElementsWrappers.size||(cancelAnimationFrame(this.animateFrame),this.animateFrame=void 0)}resetSelectedPin(){!this.selectedPin||(this.selectedPin.removeAttribute("active"),this.selectedPin=null)}resetHoveredWrapper(){!this.hoveredWrapper||this.onMouseLeave({target:this.hoveredWrapper})}removeAnnotationsPins(){this.pins.forEach(s=>{s.remove()}),this.pins.clear()}setElementReadyToPin(s,i){if(!this.elementsWithDataId[i]){if(this.elementsWithDataId[i]=s,!this.divWrappers.get(i)){let o=this.createWrapper(s,i);this.divWrappers.set(i,o)}!this.isActive||!this.isPinsVisible||(this.addCursor(this.divWrappers.get(i),i),this.addElementListeners(i))}}handleSvgElement(s,i){let o=s.viewportElement;if(o===void 0)return;if(s.tagName.toLowerCase()==="svg"){let D=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");return D.setAttribute("height","100%"),D.setAttribute("width","100%"),D.style.setProperty("overflow","visible"),D.appendChild(i),s.appendChild(D),s.style.setProperty("overflow","visible"),i}let v=s.tagName.toLowerCase(),c=v==="ellipse",p=v==="rect";if(!c&&!p)return;let g=document.createElementNS("http://www.w3.org/2000/svg","svg"),_=document.createElementNS("http://www.w3.org/2000/svg",v),y,P,M,S,F,U;if(p){let D=s;y=D.getAttribute("x"),P=D.getAttribute("y"),M=D.getAttribute("width"),S=D.getAttribute("height"),F=D.getAttribute("rx"),U=D.getAttribute("ry"),_.setAttribute("fill","transparent"),_.setAttribute("stroke","transparent"),_.setAttribute("x","0"),_.setAttribute("y","0"),_.setAttribute("rx",F),_.setAttribute("ry",U)}if(c){let D=s.getAttribute("cx"),ue=s.getAttribute("cy");F=s.getAttribute("rx"),U=s.getAttribute("ry"),y=Number(D)-Number(F),P=Number(ue)-Number(U);let{width:ce,height:he}=o.getBoundingClientRect();M=`${ce}px`,S=`${he}px`,_.setAttribute("fill","transparent"),_.setAttribute("stroke","transparent"),_.setAttribute("cx",D),_.setAttribute("cy",ue),_.setAttribute("rx",F),_.setAttribute("ry",U)}return _.setAttribute("height",S),_.setAttribute("width",M),g.setAttribute("height",S),g.setAttribute("width",M),g.appendChild(_),i.appendChild(g),s.style.setProperty("overflow","visible"),i.setAttribute("data-wrapper-type",`svg-${v}`),i}addTemporaryPinToElement(s,i){if(!this.elementsWithDataId[s])return;let a=this.divWrappers.get(s);!a||a.appendChild(i)}createPin(s,i,o){let a=document.createElement("superviz-comments-annotation-pin");return a.setAttribute("type","show"),a.setAttribute("annotation",JSON.stringify(s)),a.setAttribute("position",JSON.stringify({x:i,y:o})),a.setAttribute("keepPositionRatio",""),a.setAttribute("participantsList",JSON.stringify(this.participants)),a.id=s.uuid,a}addCursor(s,i){let o=s,a=s.getAttribute("data-wrapper-type");if(a){let h=a.split("-")[1];o=this.divWrappers.get(i).querySelector(h)}o.style.setProperty("cursor",'url("https://production.cdn.superviz.com/static/pin-html.png") 0 100, pointer'),o.style.setProperty("pointer-events","auto")}createWrapper(s,i){var p;let o=`superviz-id-${i}`;if(this.divWrappers.get(i))return;let a=s.getBoundingClientRect(),h=document.createElement("div");h.setAttribute("data-wrapper-id",i),h.id=o,h.style.position="absolute",h.style.pointerEvents="none",h.style.transform="translateX(0) translateY(0) scale(1)",h.style.cursor="default",h.style.top="0",h.style.left="0",h.style.width="100%",h.style.height="100%",h.style.pointerEvents="none";let v=window.getComputedStyle(s).getPropertyValue("border-radius");if(h.style.borderRadius=v,!this.VOID_ELEMENTS.includes(this.elementsWithDataId[i].tagName.toLowerCase()))return this.elementsWithDataId[i].appendChild(h),this.setPositionNotStatic(this.elementsWithDataId[i]),h;h=(p=this.handleSvgElement(s,h))!=null?p:h,h.style.position="fixed",h.style.top=`${a.top}px`,h.style.left=`${a.left}px`,h.style.width=`${a.width}px`,h.style.height=`${a.height}px`;let c=this.elementsWithDataId[i].parentElement;return(!c||s.viewportElement)&&(c=document.body),this.setPositionNotStatic(c),c.appendChild(h),this.voidElementsWrappers.set(i,h),this.animateFrame||(this.animateFrame=requestAnimationFrame(this.animate)),h}setPositionNotStatic(s){let{position:i}=window.getComputedStyle(s);i==="static"&&s.style.setProperty("position","relative")}};I();var xs=Bt(mn());I();I();var ft=Bt(ll()),Ki=class{constructor(){this.browser=ft.default.getParser(navigator.userAgent)}get clientStats(){return this.browser.getResult()}get isFirefox(){return this.browser.isBrowser(ft.default.BROWSER_MAP.firefox)}get isSafari(){return this.browser.isBrowser(ft.default.BROWSER_MAP.safari)}get isChrome(){return this.browser.isBrowser(ft.default.BROWSER_MAP.chrome)}get isIE(){return this.browser.isBrowser(ft.default.BROWSER_MAP.ie)}get isEdge(){return this.browser.isBrowser(ft.default.BROWSER_MAP.edge)}get isMobileDevice(){return(this.browser.is(ft.default.PLATFORMS_MAP.mobile)||this.browser.is(ft.default.PLATFORMS_MAP.tablet))&&!navigator.userAgent.match(/iPad/i)}get isTabletDevice(){return this.browser.is(ft.default.PLATFORMS_MAP.tablet)}get isAndroid(){return this.isMobileDevice&&!!navigator.userAgent.match(/Android/i)}get isIpad(){return!!navigator.userAgent.match(/iPad/i)}get isIphone(){return this.isMobileDevice&&!!navigator.userAgent.match(/iPhone/i)}get isAppleMobileDevice(){return this.isIpad||this.isIphone}};I();var qi=class{constructor(){this.updateMeetingConnectionStatus=s=>{this.oldConnectionStatus=this.connectionStatus,this.connectionStatus=s,this.connectionStatusObserver.publish(s),this.logger.log("CONNECTION STATUS CHANGE",s)};this.onUpdateBrowserOnlineStatus=s=>{let{type:i}=s;if(i==="online"){this.updateMeetingConnectionStatus(1);return}this.updateMeetingConnectionStatus(4)};this.logger=new re("@superviz/sdk/connection-service"),this.connectionStatus=0,this.connectionStatusObserver=new se({logger:this.logger})}addListeners(){window.addEventListener("online",this.onUpdateBrowserOnlineStatus),window.addEventListener("offline",this.onUpdateBrowserOnlineStatus)}removeListeners(){window.removeEventListener("online",this.onUpdateBrowserOnlineStatus),window.removeEventListener("offline",this.onUpdateBrowserOnlineStatus)}};I();I();var Ji=class{build(s,i,o,a={},h={}){let v=document.querySelector(`#${s}`),c=new URL(i);if(this.wrapperId||this.element)throw new Error("Tried to initialize two frames with the same FrameBricklayer instance");this.element=document.createElement("iframe"),Object.entries(a).forEach(([p,g])=>{c.searchParams.set(p,g)}),Object.entries(h).forEach(([p,g])=>{this.element.setAttribute(p,g)}),this.element.src=c.toString(),this.element.id=o,v.appendChild(this.element),this.wrapperId=s}destroy(){if(!this.wrapperId)throw new Error("Tried to destroy a frame before it was initialized");let s=document.querySelector(`#${this.wrapperId}`);!!s&&!!s.querySelector(`#${this.element.id}`)&&s.removeChild(this.element),this.wrapperId=null,this.element=null}};I();var Yi=class{constructor(s){this.observers={};this.sourceBlockList=["vue-devtools-proxy","vue-devtools-backend"];this.originBlockList=["https://sketchfab.com"];this.publish=(s,i={})=>{this.logger.log("MessageBridge","Posting message to frame",s,i),this.contentWindow.postMessage({type:s,data:i},this.allowedOrigins)};this.listen=(s,i)=>{this.observers[s]||(this.observers[s]=new se({logger:this.logger})),this.observers[s].subscribe(i)};this.onReceiveMessage=s=>{let{type:i,data:o,source:a}=s.data;if(this.sourceBlockList.includes(a)||this.originBlockList.includes(s.origin))return;let h=!!i,v=!this.domains.length||this.domains.includes(s.origin),c=this.observers.hasOwnProperty(i);if(this.logger.log("MessageBridge",`Message received -
        TYPE: ${s.type}
        ORIGIN: ${s.origin}
        DATA: ${JSON.stringify(s.data)} `),!h||!v||!c){this.logger.log("MessageBridge","Message discarded");return}this.observers[i].publish(o)};let{contentWindow:i,domains:o=[],allowedOrigins:a="*",sourceBlockList:h=[],logger:v}=s;if(this.logger=v,this.domains=o,this.allowedOrigins=a,this.sourceBlockList.push(...h),typeof window=="undefined")throw new Error("MessageBridge: window is undefined");this.contentWindow=i,window.addEventListener("message",this.onReceiveMessage)}destroy(){Object.entries(this.observers).forEach(([s,i])=>{i.reset(),delete this.observers[s]}),window.removeEventListener("message",this.onReceiveMessage),delete this.logger,delete this.allowedOrigins,delete this.contentWindow,delete this.domains,delete this.observers,delete this.sourceBlockList}};I();var cl="sv-video-frame",zn=class{constructor(s){this.logger=new re("@superviz/sdk/video-conference-manager");this.frameStateObserver=new se({logger:this.logger});this.frameSizeObserver=new se({logger:this.logger});this.waitingForHostObserver=new se({logger:this.logger});this.realtimeEventsObserver=new se({logger:this.logger});this.sameAccountErrorObserver=new se({logger:this.logger});this.devicesObserver=new se({logger:this.logger});this.meetingStateObserver=new se({logger:this.logger});this.meetingConnectionObserver=new se({logger:this.logger});this.participantJoinedObserver=new se({logger:this.logger});this.participantLeftObserver=new se({logger:this.logger});this.participantListObserver=new se({logger:this.logger});this.frameState=0;this.layoutModalsAndCamerasConfig=(s,i)=>{let o=s,a=i,h=["left","right","bottom","top"].includes(a),v=["left","right","center"].includes(o);return h||(a="right"),v||(o="right"),this.browserService.isMobileDevice?(a="bottom",{layoutPosition:o,camerasPosition:a}):(o==="left"&&a==="right"&&(o="right"),o==="right"&&a==="left"&&(o="left"),{layoutPosition:o,camerasPosition:a})};this.onFrameLoad=()=>{this.messageBridge=new Yi({logger:this.logger,contentWindow:this.bricklayer.element.contentWindow}),this.addMessagesListeners(),this.updateFrameState(2),this.updateFrameLocale(),this.updateMeetingAvatars(),this.onWindowResize(),this.setCustomColors(),this.setCallbacks()};this.setFrameOffset=s=>{let i=s!=null?s:{};["top","bottom","left","right"].forEach(o=>{Object.keys(i).includes(o)||(i[o]=0)}),this.frameOffset=i};this.setCustomColors=()=>{this.customColors&&this.messageBridge.publish("frame.color-list-update",this.customColors),this.styles&&this.messageBridge.publish("frame.styles-update",this.styles)};this.setCallbacks=()=>{if(!this.callbacks)return;let s={onToggleMicrophone:!!this.callbacks.onToggleMicrophone,onToggleCam:!!this.callbacks.onToggleCam,onToggleTranscript:!!this.callbacks.onToggleTranscript,onToggleChat:!!this.callbacks.onToggleChat,onToggleScreenShare:!!this.callbacks.onToggleScreenShare,onClickHangup:!!this.callbacks.onClickHangup,onToggleMeetingSetup:!!this.callbacks.onToggleMeetingSetup};this.messageBridge.listen("callback-called",i=>{var o,a;(a=(o=this.callbacks)[i])==null||a.call(o)}),this.messageBridge.publish("frame.callbacks-update",JSON.stringify(s))};this.setFrameStyle=s=>{let i=document.createElement("style"),{bottom:o,left:a,right:h,top:v}=this.frameOffset;if(i.innerHTML=`
      :root {
        --superviz-offset-top: ${v}px;
        --superviz-offset-right: ${h}px;
        --superviz-offset-left: ${a}px;
        --superviz-offset-bottom: ${o}px;
      }     
    `,document.head.appendChild(i),this.browserService.isMobileDevice){this.bricklayer.element.classList.add("sv-video-frame--bottom");return}this.bricklayer.element.classList.add(`sv-video-frame--${s}`)};this.onFrameDimensionsUpdate=({width:s,height:i})=>{let o=document.getElementById(cl),{bottom:a,right:h,left:v,top:c}=this.frameOffset,p=this.isWaterMarkEnabled?40:0,g=`${s}px`,_=`${i+p}px`;(s>=window.innerWidth||this.isHorizontalCameraEnabled)&&(g=`calc(100% - ${h}px - ${v}px)`),i>=window.innerHeight&&(_=`calc(100% - ${c}px - ${a}px)`),o.style.width=g,o.style.height=_,this.frameSizeObserver.publish({width:o.offsetWidth,height:o.offsetHeight})};this.onWindowResize=()=>{let{top:s,bottom:i,right:o,left:a}=this.frameOffset,{innerHeight:h,innerWidth:v}=window,c=h-s-i,p=v-o-a;!this.messageBridge||this.messageBridge.publish("frame.parent-window-size-update",{height:c,width:p})};this.updateFrameLocale=()=>{var h,v;if(!this.frameLocale||!((h=this.frameLocale)!=null&&h.language)&&((v=this.frameLocale)==null?void 0:v.locales))return;let{language:s,locales:i}=this.frameLocale,o=i.map(c=>c==null?void 0:c.language),a=["en",...o];if(s&&!a.includes(s))throw new Error("The default language is not available in the language listing.");this.messageBridge.publish("frame.locales-update",this.frameLocale)};this.updateMeetingAvatars=()=>{this.messageBridge.publish("frame.avatar-list-update",this.meetingAvatars)};this.onParticipantJoined=s=>{this.participantJoinedObserver.publish(s)};this.onParticipantLeft=s=>{this.participantLeftObserver.publish(s)};this.onMeetingHostChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.host-change",data:s})};this.onMeetingKickParticipant=s=>{this.realtimeEventsObserver.publish({event:"meeting.kick-participant",data:s})};this.onFollowParticipantDidChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.follow-participant",data:s})};this.onGoToDidChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.go-to-participant",data:s})};this.onGather=()=>{this.realtimeEventsObserver.publish({event:"realtime.gather",data:!0})};this.onGridModeChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.grid-mode-change",data:s})};this.onDrawingChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.drawing-change",data:s})};this.onTranscriptChange=s=>{this.realtimeEventsObserver.publish({event:"realtime.transcript-change",data:s})};this.onSameAccountError=s=>{this.sameAccountErrorObserver.publish(s)};this.onDevicesChange=s=>{this.devicesObserver.publish(s)};this.meetingStateUpdate=s=>{this.meetingStateObserver.publish(s)};this.onConnectionStatusChange=s=>{this.meetingConnectionObserver.publish(s)};this.onWaitingForHostDidChange=s=>{this.waitingForHostObserver.publish(s)};this.onParticipantListUpdate=s=>{this.participantListObserver.publish(s)};var Dt,Wt,ke,xe;let{language:i,canUseCams:o,canUseChat:a,canUseScreenshare:h,canUseDefaultAvatars:v,canUseFollow:c,canUseGoTo:p,canUseGather:g,canShowAudienceList:_,canUseDefaultToolbar:y,canUseTranscription:P,browserService:M,offset:S,locales:F,avatars:U,customColors:D,styles:ue,waterMark:ce,layoutPosition:he,camerasPosition:fe,skipMeetingSettings:J,devices:ee,layoutMode:Te,collaborationMode:me,callbacks:it}=s;this.browserService=M;let wt=this.layoutModalsAndCamerasConfig(he,fe),ct=document.createElement("div");this.frameConfig={apiKey:z.get("apiKey"),apiUrl:z.get("apiUrl"),ablyKey:z.get("ablyKey"),debug:z.get("debug"),roomId:z.get("roomId"),limits:z.get("limits"),collaborationMode:me,canUseFollow:c,canUseGoTo:p,canUseCams:o,canUseChat:a,canUseGather:g,canUseScreenshare:h,canUseDefaultAvatars:v,canUseTranscription:P,canShowAudienceList:_,camerasPosition:(Dt=wt.camerasPosition)!=null?Dt:"right",canUseDefaultToolbar:y,devices:{audioInput:(Wt=ee==null?void 0:ee.audioInput)!=null?Wt:!0,audioOutput:(ke=ee==null?void 0:ee.audioOutput)!=null?ke:!0,videoInput:(xe=ee==null?void 0:ee.videoInput)!=null?xe:!0},waterMark:ce,layoutMode:Te,skipMeetingSettings:J,layoutPosition:wt.layoutPosition},this.customColors=D,this.callbacks=it,this.styles=ue,ct.classList.add("sv_video_wrapper"),ct.id="sv-video-wrapper",document.body.appendChild(ct),this.updateFrameState(1),this.bricklayer=new Ji,this.bricklayer.build(ct.id,z.get("conferenceLayerUrl"),cl,void 0,{allow:"camera *;microphone *; display-capture *;"}),this.setFrameOffset(S),this.setFrameStyle(wt.camerasPosition),this.bricklayer.element.addEventListener("load",this.onFrameLoad),this.frameLocale={language:i,locales:F},this.meetingAvatars=U,window.addEventListener("resize",this.onWindowResize),window.addEventListener("orientationchange",this.onWindowResize)}get isWaterMarkEnabled(){return this.browserService.isMobileDevice?!1:this.frameConfig.waterMark}get isHorizontalCameraEnabled(){return this.browserService.isMobileDevice?!1:["top","bottom"].includes(this.frameConfig.camerasPosition)}addMessagesListeners(){this.messageBridge.listen("meeting.waiting-for-host",this.onWaitingForHostDidChange),this.messageBridge.listen("meeting.participant-joined",this.onParticipantJoined),this.messageBridge.listen("meeting.participant-list-update",this.onParticipantListUpdate),this.messageBridge.listen("meeting.participant-left",this.onParticipantLeft),this.messageBridge.listen("meeting.host-change",this.onMeetingHostChange),this.messageBridge.listen("meeting.kick-participant",this.onMeetingKickParticipant),this.messageBridge.listen("meeting.same-participant-error",this.onSameAccountError),this.messageBridge.listen("meeting.state-update",this.meetingStateUpdate),this.messageBridge.listen("meeting.connection-status-change",this.onConnectionStatusChange),this.messageBridge.listen("meeting.devices-change",this.onDevicesChange),this.messageBridge.listen("realtime.grid-mode-change",this.onGridModeChange),this.messageBridge.listen("realtime.drawing-change",this.onDrawingChange),this.messageBridge.listen("realtime.transcript-change",this.onTranscriptChange),this.messageBridge.listen("frame.dimensions-update",this.onFrameDimensionsUpdate),this.messageBridge.listen("realtime.follow-participant",this.onFollowParticipantDidChange),this.messageBridge.listen("realtime.go-to-participant",this.onGoToDidChange),this.messageBridge.listen("realtime.gather",this.onGather)}updateFrameState(s){s!==this.frameState&&(this.frameState=s,this.frameStateObserver.publish(this.frameState));let i={[1]:6,[2]:7,[0]:8};this.meetingStateUpdate(i[s])}start(s){this.messageBridge.publish("meeting.start",We(ie({},s),{config:this.frameConfig}))}leave(){this.messageBridge.publish("meeting.leave"),this.destroy()}destroy(){var s,i,o,a,h,v,c,p,g,_;(s=this.messageBridge)==null||s.destroy(),(i=this.bricklayer)==null||i.destroy(),(o=this.frameSizeObserver)==null||o.destroy(),(a=this.realtimeEventsObserver)==null||a.destroy(),(h=this.sameAccountErrorObserver)==null||h.destroy(),(v=this.devicesObserver)==null||v.destroy(),(c=this.meetingStateObserver)==null||c.destroy(),(p=this.meetingConnectionObserver)==null||p.destroy(),(g=this.participantJoinedObserver)==null||g.destroy(),(_=this.participantLeftObserver)==null||_.destroy(),this.bricklayer=null,this.frameState=null,window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("orientationchange",this.onWindowResize)}publishMessageToFrame(s,i){!this.messageBridge||this.messageBridge.publish(s,i)}};var _b=1e3*60,Vn=null,Fs=class extends Ge{constructor(i){var o,a;super();this.participantToFrameList=[];this.participantsOnMeeting=[];this.kickParticipantsOnHostLeave=!1;this.startVideo=()=>{var i,o,a,h,v,c,p,g,_,y,P,M,S,F,U,D,ue,ce,he,fe,J,ee,Te,me,it,wt,ct,Dt,Wt,ke,xe,Kn,Gt,Ue,qn,Jn,Yn;this.videoConfig={language:(i=this.params)==null?void 0:i.language,canUseTranscription:((o=this.params)==null?void 0:o.transcriptOff)===!1,canShowAudienceList:(h=(a=this.params)==null?void 0:a.showAudienceList)!=null?h:!0,canUseChat:!((v=this.params)!=null&&v.chatOff),canUseCams:!((c=this.params)!=null&&c.camsOff),canUseScreenshare:!((p=this.params)!=null&&p.screenshareOff),canUseDefaultAvatars:!!((g=this.params)!=null&&g.defaultAvatars)&&!((y=(_=this.localParticipant)==null?void 0:_.avatar)!=null&&y.model3DUrl),canUseGather:!!((P=this.params)!=null&&P.enableGather),canUseFollow:!!((M=this.params)!=null&&M.enableFollow),canUseGoTo:!!((S=this.params)!=null&&S.enableGoTo),canUseDefaultToolbar:(U=(F=this.params)==null?void 0:F.defaultToolbar)!=null?U:!0,camerasPosition:(ue=(D=this.params)==null?void 0:D.collaborationMode)==null?void 0:ue.position,devices:(ce=this.params)==null?void 0:ce.devices,skipMeetingSettings:(he=this.params)==null?void 0:he.skipMeetingSettings,browserService:this.browserService,offset:(fe=this.params)==null?void 0:fe.offset,locales:(ee=(J=this.params)==null?void 0:J.locales)!=null?ee:[],avatars:(me=(Te=this.params)==null?void 0:Te.avatars)!=null?me:[],customColors:z.get("colors"),waterMark:z.get("waterMark"),styles:(it=this.params)==null?void 0:it.styles,collaborationMode:(Dt=(ct=(wt=this.params)==null?void 0:wt.collaborationMode)==null?void 0:ct.enabled)!=null?Dt:!0,layoutPosition:((ke=(Wt=this.params)==null?void 0:Wt.collaborationMode)==null?void 0:ke.enabled)===!1?"center":(Gt=(Kn=(xe=this.params)==null?void 0:xe.collaborationMode)==null?void 0:Kn.modalPosition)!=null?Gt:"center",layoutMode:(Jn=(qn=(Ue=this.params)==null?void 0:Ue.collaborationMode)==null?void 0:qn.initialView)!=null?Jn:"list",callbacks:(Yn=this.params)==null?void 0:Yn.callbacks},this.logger.log("video conference @ start video",this.videoConfig),this.videoManager=new zn(this.videoConfig),this.subscribeToVideoEvents()};this.subscribeToVideoEvents=()=>{this.logger.log("video conference @ subscribe to video events"),this.videoManager.meetingConnectionObserver.subscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.subscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.subscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.subscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.subscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.subscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.subscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.subscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.subscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.subscribe(this.onSameAccountError),this.videoManager.devicesObserver.subscribe(this.onDevicesChange)};this.unsubscribeFromVideoEvents=()=>{this.logger.log("video conference @ unsubscribe from video events"),this.videoManager.meetingConnectionObserver.unsubscribe(this.connectionService.updateMeetingConnectionStatus),this.videoManager.participantListObserver.unsubscribe(this.onParticipantListUpdate),this.videoManager.waitingForHostObserver.unsubscribe(this.onWaitingForHost),this.videoManager.frameSizeObserver.unsubscribe(this.onFrameSizeDidChange),this.videoManager.meetingStateObserver.unsubscribe(this.onMeetingStateChange),this.videoManager.frameStateObserver.unsubscribe(this.onFrameStateChange),this.videoManager.realtimeEventsObserver.unsubscribe(this.onRealtimeEventFromFrame),this.videoManager.participantJoinedObserver.unsubscribe(this.onParticipantJoined),this.videoManager.participantLeftObserver.unsubscribe(this.onParticipantLeft),this.videoManager.sameAccountErrorObserver.unsubscribe(this.onSameAccountError),this.videoManager.devicesObserver.unsubscribe(this.onDevicesChange)};this.suscribeToRealtimeEvents=()=>{this.logger.log("video conference @ subscribe to realtime events"),this.realtime.kickAllParticipantsObserver.subscribe(this.onKickAllParticipantsDidChange),this.realtime.kickParticipantObserver.subscribe(this.onKickLocalParticipant),this.realtime.participantJoinedObserver.subscribe(this.onParticipantJoinedOnRealtime),this.realtime.participantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.roomInfoUpdatedObserver.subscribe(this.onRoomInfoUpdated),this.realtime.participantsObserver.subscribe(this.onRealtimeParticipantsDidChange)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("video conference @ unsubscribe from realtime events"),this.realtime.kickAllParticipantsObserver.unsubscribe(this.onKickAllParticipantsDidChange),this.realtime.participantJoinedObserver.unsubscribe(this.onParticipantJoinedOnRealtime),this.realtime.participantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.roomInfoUpdatedObserver.unsubscribe(this.onRoomInfoUpdated),this.realtime.participantsObserver.unsubscribe(this.onRealtimeParticipantsDidChange)};this.createParticipantFromAblyPresence=i=>{var o;return{id:i.clientId,color:this.realtime.getSlotColor((o=i.data)==null?void 0:o.slotIndex).color,avatar:i.data.avatar,type:i.data.type,name:i.data.name,isHost:this.realtime.hostClientId===i.clientId}};this.onFrameSizeDidChange=i=>{this.publish("frame.dimensions-update",i)};this.onWaitingForHost=i=>{this.publish("meeting.waiting-for-host",i)};this.onConnectionStatusChange=i=>{this.logger.log("video conference @ on connection status change",i);let o=[2,4,3,6];o.includes(i)&&this.realtime.freezeSync(!0),o.includes(this.connectionService.oldConnectionStatus)&&!o.includes(i)&&this.realtime.freezeSync(!1),this.publish("meeting.connection-status-change",i)};this.onMeetingStateChange=i=>{this.logger.log("video conference @ on meeting state change",i),this.publish("meeting.state-update",i)};this.onSameAccountError=i=>{this.publish("meeting.same-participant-error",i),this.detach()};this.onDevicesChange=i=>{this.publish("meeting.devices-change",i)};this.onFrameStateChange=i=>{this.logger.log("video conference @ on frame state change",i),i===2&&(this.videoManager.start({group:this.group,participant:this.localParticipant,roomId:z.get("roomId")}),this.publish("meeting.start"))};this.onRealtimeEventFromFrame=({event:i,data:o})=>{this.logger.log("video conference @ on realtime event from frame",i,o);let a={["realtime.host-change"]:h=>this.realtime.setHost(h),["realtime.gather"]:h=>this.realtime.setGather(h),["realtime.grid-mode-change"]:h=>this.realtime.setGridMode(h),["realtime.drawing-change"]:h=>{this.realtime.setDrawing(h)},["realtime.follow-participant"]:h=>{this.realtime.setFollowParticipant(h)},["meeting.kick-participant"]:h=>{this.realtime.setKickParticipant(h)},["realtime.transcript-change"]:h=>{this.realtime.setTranscript(h)},["realtime.go-to-participant"]:h=>{this.eventBus.publish("realtime.go-to-participant",h)}}[i](o);this.publish(i,o)};this.onParticipantJoined=i=>{var o;if(this.logger.log("video conference @ on participant joined",i),this.localParticipant=i,this.publish("meeting.participant-joined",i),this.publish("my-participant.joined",i),this.kickParticipantsOnHostLeave=!((o=this.params)!=null&&o.allowGuests),this.videoConfig.canUseDefaultAvatars){this.realtime.updateMyProperties({avatar:i.avatar,name:i.name,type:i.type});return}this.realtime.updateMyProperties({name:i.name,type:i.type})};this.onParticipantLeft=i=>{this.logger.log("video conference @ on participant left",this.localParticipant),this.publish("my-participant.left",this.localParticipant),this.detach()};this.onParticipantListUpdate=i=>{this.logger.log("video conference @ on participant list update",i);let o=i.map(a=>{var v;let h=this.realtime.getParticipants[a.id];return{id:a.id,color:(v=a.color)!=null?v:this.realtime.getSlotColor(h.data.slotIndex).color,avatar:a.avatar,name:a.name,type:a.type,isHost:a.isHost}});(0,xs.isEqual)(this.participantsOnMeeting,o)||(this.publish("meeting.participant-list-update",o),this.participantsOnMeeting.length!==o.length&&this.publish("meeting.amount-of-participants-update",o.length),this.participantsOnMeeting=o)};this.onKickAllParticipantsDidChange=i=>{this.logger.log("video conference @ on kick all participants did change",i),this.publish("meeting.kick-all-participants",i),this.detach()};this.onKickLocalParticipant=()=>{this.logger.log("video conference @ on kick local participant"),this.publish("meeting.kick-participant",this.localParticipant),this.detach()};this.onRoomInfoUpdated=i=>{this.logger.log("video conference @ on room info updated",i);let{isGridModeEnable:o,followParticipantId:a,gather:h,drawing:v,transcript:c,hostClientId:p}=i;this.videoManager.publishMessageToFrame("realtime.host-change",p),this.onHostParticipantDidChange(p),this.videoManager.publishMessageToFrame("realtime.grid-mode-change",o),this.videoManager.publishMessageToFrame("realtime.drawing-change",v),this.videoManager.publishMessageToFrame("realtime.follow-participant",a),this.videoManager.publishMessageToFrame("realtime.transcript-change",c),this.realtime.hostClientId===this.localParticipant.id&&h&&this.realtime.setGather(!1)};this.onRealtimeParticipantsDidChange=i=>{this.logger.log("video conference @ on participants did change",i);let o=Object.values(i).map(a=>({timestamp:a.timestamp,connectionId:a.connectionId,participantId:a.clientId,color:this.realtime.getSlotColor(a.data.slotIndex).name,name:a.data.name,isHost:this.realtime.hostClientId===a.clientId,avatar:a.data.avatar,type:a.data.type}));(0,xs.isEqual)(this.participantToFrameList,o)||this.videoManager.publishMessageToFrame("realtime.participant-list-update",o),this.participantToFrameList=o,this.validateIfInTheRoomHasHost(i)};this.onHostParticipantDidChange=i=>{this.logger.log("video conference @ on host participant did change",i),this.videoManager.publishMessageToFrame("realtime.host-change",i);let o=this.participantsOnMeeting.find(a=>a.id===i);this.realtime.isLocalParticipantHost&&(this.realtime.setSyncProperty("meeting.host-change",o),this.publish("meeting.host-change",o))};this.onHostAvailabilityChange=i=>{if(this.logger.log("launcher service @ onHostAvailabilityChange"),i){this.publish("meeting.host-available");return}this.publish("meeting.no-host-available")};this.onParticipantJoinedOnRealtime=i=>{this.logger.log("video conference @ on participant joined on realtime",i),this.publish("meeting.participant-joined",this.createParticipantFromAblyPresence(i))};this.onParticipantLeftOnRealtime=i=>{this.logger.log("video conference @ on participant left on realtime",i),this.publish("meeting.participant-left",this.createParticipantFromAblyPresence(i))};this.validateIfInTheRoomHasHost=i=>{let o=Object.values(i).filter(v=>v.data.type==="host"),a=o.some(v=>v.clientId===this.realtime.hostClientId);if(!o.length&&this.kickParticipantsOnHostLeave&&this.localParticipant.type!=="host"&&!Vn&&(this.logger.log("video conference @ validate if in the room has host - init kick all participants timeout"),Vn=setTimeout(()=>{this.logger.log("video conference @ validate if in the room has host - kick all participants"),this.onKickLocalParticipant()},_b)),o.length&&Vn&&(this.logger.log("video conference @ validade if in the room has host - clear kick all participants timeout"),clearTimeout(Vn),Vn=null),this.onHostAvailabilityChange(!!o.length),!o.length||a)return;let h=o.reduce((v,c)=>(this.logger.log("video conference @ validade if in the room has host - reducing participants",{previus:v,current:c}),!v||c.clientId===this.realtime.hostClientId||c.timestamp>v.timestamp?c:v),null);h.clientId===this.realtime.hostClientId||h.clientId!==this.localParticipant.id||(this.logger.log("video conference @ validade if in the room has host - set host",h),this.realtime.setHost(h.clientId))};this.params=We(ie({},i),{userType:(a=(o=i==null?void 0:i.participantType)!=null?o:i==null?void 0:i.userType)!=null?a:"guest"}),this.name="videoConference",this.logger=new re(`@superviz/sdk/${"videoConference"}`),this.browserService=new Ki,this.connectionService=new qi,this.connectionService.addListeners(),this.connectionService.connectionStatusObserver.subscribe(this.onConnectionStatusChange)}toggleMeetingSetup(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-setup")}toggleMicrophone(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-microphone")}toggleCam(){this.videoManager.publishMessageToFrame("meeting-controls.toggle-cam")}toggleScreenShare(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-screenshare")}toggleChat(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-chat")}toggleTranscript(){return this.videoManager.publishMessageToFrame("meeting-controls.toggle-transcript")}hangUp(){this.videoManager.publishMessageToFrame("hang-up")}start(){this.logger.log("video conference @ start"),this.params.userType!=="guest"&&(this.localParticipant.type=this.params.userType),this.suscribeToRealtimeEvents(),this.startVideo()}destroy(){this.logger.log("video conference @ destroy");let{data:i}=this.realtime.participant,o=i.activeComponents.filter(a=>a!=="videoConference");this.realtime.updateMyProperties({activeComponents:o,type:"guest"}),this.kickParticipantsOnHostLeave=!1,this.publish("destroy"),this.unsubscribeFromRealtimeEvents(),this.unsubscribeFromVideoEvents(),this.videoManager.leave(),this.connectionService.removeListeners()}};I();I();var Xi=class extends Ge{constructor(i,o){var a;super();this.transformation={translate:{x:0,y:0},scale:1};this.subscribeToRealtimeEvents=()=>{this.logger.log("presence-mouse component @ subscribe to realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.subscribe(this.onParticipantsDidChange)};this.unsubscribeFromRealtimeEvents=()=>{this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.unsubscribe(this.onParticipantsDidChange)};this.setParticipantPrivate=i=>{this.isPrivate=i,this.realtime.updatePresenceMouse(We(ie({},this.localParticipant),{visible:!i}))};this.animate=()=>{this.renderDivWrapper(),this.updateParticipantsMouses(),requestAnimationFrame(this.animate)};this.goToMouse=i=>{let o=this.presences.get(i);if(!o)return;let a=this.canvas.getBoundingClientRect(),{width:h,height:v}=a,{x:c,y:p}=o,g=h/2,_=v/2,y=g-c,P=_-p;this.goToMouseCallback&&this.goToMouseCallback({x:y,y:P})};this.onMyParticipantMouseMove=i=>{let o=this.canvas.getContext("2d"),a=this.canvas.getBoundingClientRect(),h=i.x-a.left,v=i.y-a.top,p=(o==null?void 0:o.getTransform()).inverse(),g=new DOMPoint(h,v).matrixTransform(p),_={x:(g.x-this.transformation.translate.x)/this.transformation.scale,y:(g.y-this.transformation.translate.y)/this.transformation.scale};this.realtime.updatePresenceMouse(We(ie(ie({},this.localParticipant),_),{visible:!this.isPrivate}))};this.onParticipantsDidChange=i=>{this.logger.log("presence-mouse component @ on participants did change",i),Object.values(i).forEach(o=>{if(o.id!==this.localParticipant.id){if(this.following&&o.id!==this.following&&this.presences.has(o.id)){this.removePresenceMouseParticipant(o.id);return}this.presences.set(o.id,o)}}),this.following&&this.presences.get(this.following)&&this.goToMouse(this.following)};this.onMyParticipantMouseOut=i=>{let{x:o,y:a,width:h,height:v}=this.canvas.getBoundingClientRect();i.x>0&&i.y>0&&i.x<o+h&&i.y<a+v||this.realtime.updatePresenceMouse(ie({visible:!1},this.localParticipant))};this.onParticipantLeftOnRealtime=i=>{this.removePresenceMouseParticipant(i.id)};this.updateParticipantsMouses=()=>{this.presences.forEach(i=>{if(!(i!=null&&i.visible)){this.removePresenceMouseParticipant(i.id);return}this.renderPresenceMouses(i)})};this.renderPresenceMouses=i=>{let a=document.getElementById(`mouse-${i.id}`);a||(a=this.createMouseElement(i));let h=document.getElementById(`mouse-${i.id}`),v=document.getElementById(`mouse-${i.id}`);if(!h||!v)return;let c=h.getElementsByClassName("mouse-user-name")[0],p=v.getElementsByClassName("pointer-mouse")[0];p&&(p.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers-v2/${i.slotIndex}.svg)`),c&&(c.style.color=this.textColorValues.includes(i.slotIndex)?"#FFFFFF":"#26242A",c.style.backgroundColor=i.color,c.innerHTML=i.name);let{x:g,y:_}=i,y=this.canvas.getContext("2d"),P=y==null?void 0:y.getTransform(),M=P==null?void 0:P.e,S=P==null?void 0:P.f,F=this.transformation.translate.x+(g+M)*this.transformation.scale,U=this.transformation.translate.y+(_+S)*this.transformation.scale,D=this.divWrapper.clientWidth>F&&this.divWrapper.clientHeight>U&&i.visible;a.style.opacity=D?"1":"0",a.style.left=`${F}px`,a.style.top=`${U}px`};this.followMouse=i=>{this.following=i};if(this.name="presence",this.logger=new re(`@superviz/sdk/${"presence"}`),this.canvas=document.getElementById(i),this.presences=new Map,!this.canvas){let h=`Canvas with id ${i} not found`;throw this.logger.log(h),new Error(h)}this.divWrapper=this.renderDivWrapper(),this.animateFrame=requestAnimationFrame(this.animate),this.goToMouseCallback=(a=o==null?void 0:o.callbacks)==null?void 0:a.onGoToPresence}get textColorValues(){return[2,4,5,7,8,16]}start(){this.logger.log("presence-mouse component @ start"),this.canvas.addEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.addEventListener("mouseout",this.onMyParticipantMouseOut),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.subscribeToRealtimeEvents(),this.realtime.enterPresenceMouseChannel(this.localParticipant)}destroy(){this.logger.log("presence-mouse component @ destroy"),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.realtime.leavePresenceMouseChannel(),this.unsubscribeFromRealtimeEvents(),cancelAnimationFrame(this.animateFrame),this.canvas.removeEventListener("mousemove",this.onMyParticipantMouseMove),this.canvas.removeEventListener("mouseout",this.onMyParticipantMouseOut),this.divWrapper.remove()}renderDivWrapper(){let i=this.canvas.getBoundingClientRect(),o=document.getElementById("superviz-presence-mouse-wrapper");return o||(o=document.createElement("div"),o.id="superviz-presence-mouse-wrapper",this.canvas.parentElement.style.position="relative",this.canvas.parentElement.appendChild(o)),o.style.position="fixed",o.style.top=`${i.top}px`,o.style.left=`${i.left}px`,o.style.width=`${i.width}px`,o.style.height=`${i.height}px`,o.style.pointerEvents="none",o.style.overflow="hidden",o.style.zIndex="2",o}removePresenceMouseParticipant(i){let o=document.getElementById(`mouse-${i}`);o&&(o.remove(),this.presences.delete(i))}createMouseElement(i){let o=document.createElement("div");o.setAttribute("id",`mouse-${i.id}`),o.setAttribute("class","mouse-follower");let a=document.createElement("div");a.setAttribute("class","pointer-mouse");let h=document.createElement("div");return h.setAttribute("class","mouse-user-name"),h.innerHTML=i.name,o.appendChild(a),o.appendChild(h),o.style.left="0px",o.style.top="0px",this.divWrapper.appendChild(o),o}transform(i){this.transformation=i}};I();var hl=Bt(mn());I();var pl=[1,3,4,6,7,14,16];I();var Qi=(S=>(S.AREA="area",S.BASE="base",S.BR="br",S.COL="col",S.EMBED="embed",S.HR="hr",S.IMG="img",S.INPUT="input",S.LINK="link",S.META="meta",S.PARAM="param",S.SOURCE="source",S.TRACK="track",S.WBR="wbr",S))(Qi||{}),ji=(o=>(o.RECT="rect",o.ELLIPSE="ellipse",o.SVG="svg",o))(ji||{});var er=class extends Ge{constructor(i,o){var a;super();this.presences=new Map;this.mouses=new Map;this.transformation={translate:{x:0,y:0},scale:1};this.onMyParticipantMouseMove=i=>{if(this.isPrivate)return;let o=i.currentTarget,{left:a,top:h}=o.getBoundingClientRect(),v=(i.x-a-this.transformation.translate.x)/this.transformation.scale,c=(i.y-h-this.transformation.translate.y)/this.transformation.scale;this.realtime.updatePresenceMouse(We(ie({},this.localParticipant),{x:v,y:c,visible:!0}))};this.onMyParticipantMouseLeave=()=>{this.realtime.updatePresenceMouse(ie({visible:!1},this.localParticipant))};this.onParticipantsDidChange=i=>{this.logger.log("presence-mouse component @ on participants did change",i),Object.values(i).forEach(o=>{if(o.id===this.localParticipant.id)return;if(this.userBeingFollowedId&&o.id!==this.userBeingFollowedId&&this.presences.has(o.id)){this.removePresenceMouseParticipant(o.id);return}this.presences.set(o.id,o)}),this.animate(),this.updateParticipantsMouses()};this.goToMouse=i=>{let o=this.mouses.get(i);if(!!o){if(this.goToPresenceCallback){let{x:a,y:h}=this.mouses.get(i).getBoundingClientRect();this.goToPresenceCallback({x:a,y:h});return}o.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}};this.followMouse=i=>{this.userBeingFollowedId=i};this.onParticipantLeftOnRealtime=i=>{this.removePresenceMouseParticipant(i.id)};this.setParticipantPrivate=i=>{this.isPrivate=i,this.realtime.updatePresenceMouse(We(ie({},this.localParticipant),{visible:!i}))};this.getTextColorValue=i=>pl.includes(i)?"#FFFFFF":"#26242A";this.animate=()=>{Qi[this.containerTagname]&&this.updateVoidElementWrapper(),ji[this.containerTagname]&&this.updateSVGElementWrapper(),this.animationFrame=requestAnimationFrame(this.animate)};this.updateParticipantsMouses=()=>{this.presences.forEach(o=>{if(o.id!==this.localParticipant.id){if(!(o!=null&&o.visible)){this.removePresenceMouseParticipant(o.id);return}this.renderPresenceMouses(o)}}),this.presences.has(this.userBeingFollowedId)&&this.goToMouse(this.userBeingFollowedId)};this.renderPresenceMouses=i=>{if(i.id===this.localParticipant.id)return;let o=document.getElementById(`mouse-${i.id}`);if(o||(o=this.createMouseElement(i)),!o)return;let a=o.getElementsByClassName("mouse-user-name")[0],h=o.getElementsByClassName("pointer-mouse")[0];h&&(h.style.backgroundImage=`url(https://production.cdn.superviz.com/static/pointers-v2/${i.slotIndex}.svg)`),a&&(a.style.color=this.getTextColorValue(i.slotIndex),a.style.backgroundColor=i.color,a.innerHTML=i.name);let{x:v,y:c}=i,{translate:{x:p,y:g},scale:_}=this.transformation;o.style.transform=`translate(${p+v*_}px, ${g+c*_}px)`};this.renderVoidElementWrapper=()=>{let i=document.createElement("div"),o=this.container,{width:a,height:h,left:v,top:c}=this.container.getBoundingClientRect(),p=o.offsetLeft-v,g=o.offsetTop-c;i.style.position="absolute",i.style.width=`${a}px`,i.style.height=`${h}px`,i.style.top=`${c}px`,i.style.left=`${v}px`,i.style.overflow="visible",i.style.pointerEvents="none",this.container.parentElement.appendChild(i),this.wrapper=i};this.renderSVGElementWrapper=()=>{let i=this.containerTagname.toLowerCase();if(i==="svg"){this.createSVGWrapper();return}if(i==="rect"){this.createRectWrapper();return}i==="ellipse"&&this.createEllipseWrapper()};if(this.container=document.getElementById(i),this.logger=new re(`@superviz/sdk/${"presence"}`),!this.container){let h=`Element with id ${i} not found`;throw this.logger.log(h),new Error(h)}this.name="presence",this.containerTagname=this.container.tagName.toUpperCase(),this.goToPresenceCallback=(a=o==null?void 0:o.callbacks)==null?void 0:a.onGoToPresence}start(){this.logger.log("presence-mouse component @ start"),this.realtime.enterPresenceMouseChannel(this.localParticipant),this.renderWrapper(),this.addListeners(),this.subscribeToRealtimeEvents(),this.eventBus.subscribe("realtime.private-mode",this.setParticipantPrivate),this.animationFrame=requestAnimationFrame(this.animate),this.eventBus.subscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.subscribe("realtime.local-follow-participant",this.followMouse)}destroy(){cancelAnimationFrame(this.animationFrame),this.logger.log("presence-mouse component @ destroy"),this.realtime.leavePresenceMouseChannel(),this.removeListeners(),this.wrapper.remove(),this.presences.clear(),this.presences=void 0,this.container=void 0,this.wrapper=void 0,this.unsubscribeFromRealtimeEvents(),this.eventBus.unsubscribe("realtime.private-mode",this.setParticipantPrivate),this.eventBus.unsubscribe("realtime.go-to-participant",this.goToMouse),this.eventBus.unsubscribe("realtime.local-follow-participant",this.followMouse),this.logger=void 0}subscribeToRealtimeEvents(){this.logger.log("presence-mouse component @ subscribe to realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.subscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.subscribe(this.onParticipantsDidChange)}unsubscribeFromRealtimeEvents(){this.logger.log("presence-mouse component @ unsubscribe from realtime events"),this.realtime.presenceMouseParticipantLeaveObserver.unsubscribe(this.onParticipantLeftOnRealtime),this.realtime.presenceMouseObserver.unsubscribe(this.onParticipantsDidChange)}addListeners(){this.container.addEventListener("pointermove",this.onMyParticipantMouseMove),this.container.addEventListener("mouseleave",this.onMyParticipantMouseLeave)}removeListeners(){this.container.removeEventListener("pointermove",this.onMyParticipantMouseMove),this.container.removeEventListener("mouseleave",this.onMyParticipantMouseLeave)}setPositionNotStatic(){let{position:i}=window.getComputedStyle(this.container);i==="static"&&this.container.style.setProperty("position","relative")}createMouseElement(i){if(!this.wrapper)return;let o=document.createElement("div");o.setAttribute("id",`mouse-${i.id}`),o.setAttribute("class","mouse-follower");let a=document.createElement("div");a.setAttribute("class","pointer-mouse");let h=document.createElement("div");return h.setAttribute("class","mouse-user-name"),h.innerHTML=i.name,o.appendChild(a),o.appendChild(h),o.style.left="0px",o.style.top="0px",this.wrapper.appendChild(o),this.mouses.set(i.id,o),o}updateSVGPosition(){let i=this.container.parentElement.getBoundingClientRect(),o=this.container.getBoundingClientRect(),a=o.left-i.left,h=o.top-i.top,{width:v,height:c}=this.container.getBoundingClientRect();this.wrapper.style.setProperty("width",`${v}px`),this.wrapper.style.setProperty("height",`${c}px`),this.wrapper.style.setProperty("top",`${h}px`),this.wrapper.style.setProperty("left",`${a}px`)}createSVGWrapper(){let i=document.createElement("div"),o=this.container.parentElement.getBoundingClientRect(),a=this.container.getBoundingClientRect(),h=a.left-o.left,v=a.top-o.top,{width:c,height:p}=this.container.getBoundingClientRect();i.style.position="fixed",i.style.width=`${c}px`,i.style.height=`${p}px`,i.style.top=`${v}px`,i.style.left=`${h}px`,i.style.overflow="visible",i.style.pointerEvents="none",i.id="superviz-svg-wrapper",this.container.parentElement.appendChild(i),this.wrapper=i}createRectWrapper(){let i=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","rect"),a=document.createElement("div"),h=this.container.getAttribute("width"),v=this.container.getAttribute("height"),c=this.container.getAttribute("rx"),p=this.container.getAttribute("ry");o.setAttribute("fill","transparent"),o.setAttribute("stroke","transparent"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("rx",c),o.setAttribute("ry",p),o.setAttribute("height",v),o.setAttribute("width",h),i.setAttribute("height",v),i.setAttribute("width",h),i.appendChild(o),a.appendChild(i);let g=this.container.getBoundingClientRect();a.style.position="fixed",a.style.top=`${g.top}px`,a.style.left=`${g.left}px`,a.style.width=`${g.width}px`,a.style.height=`${g.height}px`,a.style.overflow="visible",a.style.pointerEvents="none",a.id="superviz-rect-wrapper";let _=this.container.viewportElement;for(;_.viewportElement;)_=_.viewportElement;_.parentElement.appendChild(a),this.wrapper=a}createEllipseWrapper(){let i=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),a=document.createElement("div"),h=this.container.getAttribute("cx"),v=this.container.getAttribute("cy"),c=this.container.getAttribute("rx"),p=this.container.getAttribute("ry"),g=Number(h)-Number(c),_=Number(v)-Number(p),y=String(2*Number(h)),P=String(2*Number(v));o.setAttribute("fill","transparent"),o.setAttribute("stroke","transparent"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("rx",c),o.setAttribute("ry",p),o.setAttribute("cx",`${Number(h)-g}`),o.setAttribute("cy",`${Number(v)-_}`),o.setAttribute("height",P),o.setAttribute("width",y),i.setAttribute("height",P),i.setAttribute("width",y),i.appendChild(o),a.appendChild(i);let M=this.container.getBoundingClientRect();a.style.position="fixed",a.style.top=`${M.top}px`,a.style.left=`${M.left}px`,a.style.width=`${M.width}px`,a.style.height=`${M.height}px`,a.style.overflow="visible",a.style.pointerEvents="none",a.id="superviz-ellipse-wrapper";let S=this.container.viewportElement;for(;S.viewportElement;)S=S.viewportElement;S.parentElement.appendChild(a),this.wrapper=a}transform(i){this.transformation=i}updateVoidElementWrapper(){let i=this.container.getBoundingClientRect(),o=this.wrapper.getBoundingClientRect(),a=this.container;if((0,hl.isEqual)(i,o))return;let h=a.offsetLeft,v=a.offsetTop;this.wrapper.style.setProperty("width",`${i.width}px`),this.wrapper.style.setProperty("height",`${i.height}px`),this.wrapper.style.setProperty("top",`${v}px`),this.wrapper.style.setProperty("left",`${h}px`),this.wrapper.id="superviz-void-wrapper"}updateSVGElementWrapper(){let{left:i,top:o,width:a,height:h}=this.container.getBoundingClientRect(),{left:v,top:c,width:p,height:g}=this.wrapper.getBoundingClientRect();if(!(i===v&&o===c&&a===p&&h===g)){if(this.containerTagname.toLowerCase()==="svg"){this.updateSVGPosition();return}this.wrapper.style.setProperty("width",`${a}px`),this.wrapper.style.setProperty("height",`${h}px`),this.wrapper.style.setProperty("top",`${o}px`),this.wrapper.style.setProperty("left",`${i}px`)}}renderWrapper(){if(!this.wrapper){if(Qi[this.containerTagname]){this.renderVoidElementWrapper();return}if(ji[this.containerTagname]){this.renderSVGElementWrapper();return}this.renderElementWrapper()}}removePresenceMouseParticipant(i){let o=document.getElementById(`mouse-${i}`);o&&(o.remove(),this.presences.delete(i),this.mouses.delete(i))}renderElementWrapper(){let i=document.createElement("div");i.style.position="absolute",i.style.width="100%",i.style.height="100%",i.style.top="0",i.style.left="0",i.style.overflow="visible",i.style.pointerEvents="none",this.setPositionNotStatic(),this.container.appendChild(i),this.wrapper=i}};var Ns=class{constructor(s,i){return document.getElementById(s).tagName.toLowerCase()==="canvas"?new Xi(s,i):new er(s,i)}};I();I();var tr=class{constructor(s){this.observers=new Map;this.subscribe=(s,i)=>{this.logger.log("pubsub service @ subscribe",{event:s,callback:i}),this.observers.has(s)||this.observers.set(s,new se),this.observers.get(s).subscribe(i)};this.unsubscribe=(s,i)=>{this.logger.log("pubsub service @ unsubscribe",{event:s,callback:i}),this.observers.has(s)&&(this.observers.get(s).reset(),this.observers.delete(s))};this.publish=(s,i)=>{this.logger.log("pubsub service @ publish",{event:s,data:i}),this.realtime.setSyncProperty(s,i)};this.publishEventToClient=(s,i)=>{this.logger.log("pubsub service @ publishEventToClient",{event:s,data:i}),this.observers.has(s)&&this.observers.get(s).publish(i)};this.destroy=()=>{this.logger.log("pubsub service @ destroy"),this.realtime.syncPropertiesObserver.unsubscribe(this.onSyncPropertiesChange),this.observers.forEach(s=>s.destroy()),this.observers.clear()};this.onSyncPropertiesChange=s=>{this.logger.log("pubsub service @ onSyncPropertiesChange",{properties:s}),Object.entries(s).forEach(([i,o])=>{this.publishEventToClient(i,o)})};this.logger=new re("@superviz/sdk/pubsub"),this.realtime=s,this.realtime.syncPropertiesObserver.subscribe(this.onSyncPropertiesChange),this.logger.log("PubSub created")}fetchHistory(s){return this.realtime.fetchSyncClientProperty(s)}};I();var Bs=class extends Ge{constructor(){super();this.callbacksToSubscribeWhenJoined=[];this.state="STOPPED";this.publish=(i,o)=>{if(!this.pubsub){let a=`Realtime component is not started yet. You can't publish event ${i} before start`;this.logger.log(a);return}this.pubsub.publish(i,o)};this.subscribe=(i,o)=>{if(!this.pubsub){this.callbacksToSubscribeWhenJoined.push({event:i,callback:o});return}this.pubsub.subscribe(i,o)};this.unsubscribe=(i,o)=>{this.pubsub.unsubscribe(i,o)};this.name="realtime",this.logger=new re("@superviz/sdk/realtime-component")}destroy(){this.logger.log("destroyed"),this.changeState("STOPPED"),this.pubsub.destroy()}start(){this.logger.log("started"),this.pubsub=new tr(this.realtime),this.callbacksToSubscribeWhenJoined.forEach(({event:i,callback:o})=>{this.pubsub.subscribe(i,o)}),this.changeState("STARTED")}fetchHistory(i){return this.pubsub.fetchHistory(i)}changeState(i){this.logger.log("realtime component @ changeState - state changed",i),this.state=i,this.pubsub.publishEventToClient("realtime-component.state-changed",this.state)}};I();var dl=Bt(mn());I();var Ds=(a=>(a.TOP_LEFT="top-left",a.TOP_RIGHT="top-right",a.BOTTOM_LEFT="bottom-left",a.BOTTOM_RIGHT="bottom-right",a))(Ds||{});var Ws=class extends Ge{constructor(i){var o;super();this.participants=[];this.onParticipantListUpdate=i=>{let a=Object.values(i).filter(({data:h})=>{var v;return(v=h.activeComponents)==null?void 0:v.includes("whoIsOnline")}).filter(({data:{isPrivate:h,id:v}})=>!h||h&&v===this.localParticipant.id).map(({data:h})=>{let{slotIndex:v,id:c,name:p,avatar:g,activeComponents:_}=h,{color:y}=this.realtime.getSlotColor(v),P=this.localParticipant.id===c,M=_.some(S=>S.includes("presence"));return this.setLocalData(P,!M,y,M),{name:p,id:c,slotIndex:v,color:y,isLocal:P,joinedPresence:M,avatar:g}});(0,dl.isEqual)(a,this.participants)||(this.following&&(a.find(({id:v})=>v===this.following)||this.stopFollowing({clientId:this.following})),this.participants=a,this.element.updateParticipants(this.participants))};this.setLocalData=(i,o,a,h)=>{!i||(this.element.disableDropdown=o,this.element.localParticipantData={color:a,id:this.localParticipant.id,joinedPresence:h})};this.goToMousePointer=({detail:{id:i}})=>{i!==this.localParticipant.id&&(this.eventBus.publish("realtime.go-to-participant",i),this.publish("who-is-online.go-to-participant",i))};this.followMousePointer=({detail:i})=>{if(this.eventBus.publish("realtime.local-follow-participant",i.id),this.following=i.id,this.following){this.publish("who-is-online.start-following-participant",this.following);return}this.publish("who-is-online.stop-following-participant")};this.setPrivate=({detail:{isPrivate:i,id:o}})=>{if(this.eventBus.publish("realtime.private-mode",i),this.realtime.setPrivateWIOParticipant(o,i),i){this.publish("who-is-online.enter-private-mode");return}this.publish("who-is-online.leave-private-mode")};this.setFollow=i=>{var o;if(i.clientId!==this.localParticipant.id){if(this.followMousePointer({detail:{id:(o=i==null?void 0:i.data)==null?void 0:o.id}}),!i.data.id){this.element.following=void 0;return}this.following=i.data.id,this.element.following=i.data}};this.follow=i=>{var o;if(this.realtime.setFollowWIOParticipant(ie({},i.detail)),this.following=(o=i.detail)==null?void 0:o.id,this.following){this.publish("who-is-online.start-follow-me",this.following);return}this.publish("who-is-online.stop-follow-me")};this.stopFollowing=i=>{var o;i.clientId===((o=this.element.following)==null?void 0:o.id)&&(this.element.following=void 0,this.following=void 0,this.eventBus.publish("realtime.local-follow-participant",void 0),this.publish("who-is-online.stop-following-participant"))};this.gather=i=>{this.realtime.setGatherWIOParticipant(ie({},i.detail)),this.publish("who-is-online.gather-all",i.detail.id)};if(this.name="whoIsOnline",this.logger=new re("@superviz/sdk/who-is-online-component"),typeof i!="object"){this.position=i!=null?i:"top-right";return}this.position=(o=i.position)!=null?o:"top-right",this.setStyles(i.styles)}start(){this.subscribeToRealtimeEvents(),this.positionWhoIsOnline(),this.addListeners(),this.realtime.enterWIOChannel(this.localParticipant)}destroy(){this.unsubscribeToRealtimeEvents(),this.realtime.leaveWIOChannel(),this.removeListeners(),this.element.remove(),this.element=null,this.participants=null}addListeners(){this.element.addEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.addEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.addEventListener("realtime.private-mode",this.setPrivate),this.element.addEventListener("realtime.follow-participant",this.follow),this.element.addEventListener("realtime.gather",this.gather)}removeListeners(){this.element.removeEventListener("realtime.local-follow-participant",this.followMousePointer),this.element.removeEventListener("realtime.go-to-participant",this.goToMousePointer),this.element.removeEventListener("realtime.private-mode",this.setPrivate),this.element.removeEventListener("realtime.follow-participant",this.follow),this.element.removeEventListener("realtime.gather",this.gather)}subscribeToRealtimeEvents(){this.realtime.participantsObserver.subscribe(this.onParticipantListUpdate),this.realtime.participantLeaveObserver.subscribe(this.stopFollowing),this.realtime.privateModeWIOObserver.subscribe(this.onParticipantListUpdate),this.realtime.followWIOObserver.subscribe(this.setFollow),this.realtime.gatherWIOObserver.subscribe(this.goToMousePointer)}unsubscribeToRealtimeEvents(){this.realtime.participantsObserver.unsubscribe(this.onParticipantListUpdate),this.realtime.participantLeaveObserver.unsubscribe(this.stopFollowing),this.realtime.privateModeWIOObserver.unsubscribe(this.onParticipantListUpdate),this.realtime.followWIOObserver.unsubscribe(this.setFollow),this.realtime.gatherWIOObserver.unsubscribe(this.goToMousePointer)}setStyles(i=""){if(!i)return;let o=document.createElement("style");o.textContent=i,o.id="superviz-who-is-online-styles",document.head.appendChild(o)}positionWhoIsOnline(){if(this.element=document.createElement("superviz-who-is-online"),Object.values(Ds).includes(this.position.toLowerCase())){document.body.appendChild(this.element);let[a,h]=this.position.split("-");this.element.position=`${a}: 20px; ${h}: 40px;`;return}let o=document.getElementById(this.position);if(!o){this.element.position="top: 20px; right: 40px;",document.body.appendChild(this.element);return}o.appendChild(this.element),this.element.position="position: relative;"}};export{Ls as CanvasPin,Ms as Comments,Ss as HTMLPin,Ns as MousePointers,Bs as Realtime,Fs as VideoConference,Ws as WhoIsOnline};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
